"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["_app-pages-browser_node_modules_sanity_lib__chunks-es_index3_mjs"],{

/***/ "(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/operators/pairwise.js":
/*!********************************************************************!*\
  !*** ./node_modules/rxjs/dist/esm5/internal/operators/pairwise.js ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   pairwise: function() { return /* binding */ pairwise; }\n/* harmony export */ });\n/* harmony import */ var _util_lift__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/lift */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/util/lift.js\");\n/* harmony import */ var _OperatorSubscriber__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./OperatorSubscriber */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/operators/OperatorSubscriber.js\");\n\n\nfunction pairwise() {\n    return (0,_util_lift__WEBPACK_IMPORTED_MODULE_0__.operate)(function(source, subscriber) {\n        var prev;\n        var hasPrev = false;\n        source.subscribe((0,_OperatorSubscriber__WEBPACK_IMPORTED_MODULE_1__.createOperatorSubscriber)(subscriber, function(value) {\n            var p = prev;\n            prev = value;\n            hasPrev && subscriber.next([\n                p,\n                value\n            ]);\n            hasPrev = true;\n        }));\n    });\n} //# sourceMappingURL=pairwise.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9yeGpzL2Rpc3QvZXNtNS9pbnRlcm5hbC9vcGVyYXRvcnMvcGFpcndpc2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQ3VDO0FBQ3lCO0FBNkMxRCxTQUFVRTtJQUNkLE9BQU9GLG1EQUFBQSxDQUFRLFNBQUNHLE1BQU0sRUFBRUMsVUFBVTtRQUNoQyxJQUFJQztRQUNKLElBQUlDLFVBQVU7UUFDZEgsT0FBT0ksU0FBUyxDQUNkTiw2RUFBQUEsQ0FBeUJHLFlBQVksU0FBQ0ksS0FBSztZQUN6QyxJQUFNQyxJQUFJSjtZQUNWQSxPQUFPRztZQUNQRixXQUFXRixXQUFXTSxJQUFJLENBQUM7Z0JBQUNEO2dCQUFHRDthQUFNO1lBQ3JDRixVQUFVO1FBQ1o7SUFFSjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uLi8uLi8uLi8uLi9zcmMvaW50ZXJuYWwvb3BlcmF0b3JzL3BhaXJ3aXNlLnRzP2FiNTQiXSwibmFtZXMiOlsib3BlcmF0ZSIsImNyZWF0ZU9wZXJhdG9yU3Vic2NyaWJlciIsInBhaXJ3aXNlIiwic291cmNlIiwic3Vic2NyaWJlciIsInByZXYiLCJoYXNQcmV2Iiwic3Vic2NyaWJlIiwidmFsdWUiLCJwIiwibmV4dCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/operators/pairwise.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/sanity/lib/_chunks-es/index3.mjs":
/*!*******************************************************!*\
  !*** ./node_modules/sanity/lib/_chunks-es/index3.mjs ***!
  \*******************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ StructureToolBoundary; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-runtime.js\");\n/* harmony import */ var react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-compiler-runtime */ \"(app-pages-browser)/./node_modules/react-compiler-runtime/dist/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var sanity__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! sanity */ \"(app-pages-browser)/./node_modules/sanity/lib/index.mjs\");\n/* harmony import */ var _generate_help_url_esm_mjs__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./generate-help-url.esm.mjs */ \"(app-pages-browser)/./node_modules/sanity/lib/_chunks-es/generate-help-url.esm.mjs\");\n/* harmony import */ var _pane_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./pane.mjs */ \"(app-pages-browser)/./node_modules/sanity/lib/_chunks-es/pane.mjs\");\n/* harmony import */ var sanity_router__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! sanity/router */ \"(app-pages-browser)/./node_modules/sanity/lib/router.mjs\");\n/* harmony import */ var lodash_omit_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash/omit.js */ \"(app-pages-browser)/./node_modules/lodash/omit.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! rxjs */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/util/isObservable.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! rxjs */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/observable/from.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! rxjs */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/observable/of.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! rxjs */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/firstValueFrom.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! rxjs */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/observable/concat.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! rxjs */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/observable/never.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! rxjs */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/ReplaySubject.js\");\n/* harmony import */ var nanoid__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! nanoid */ \"(app-pages-browser)/./node_modules/nanoid/index.browser.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! rxjs/operators */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/operators/publishReplay.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! rxjs/operators */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/operators/refCount.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! rxjs/operators */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/operators/switchMap.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! rxjs/operators */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/operators/map.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! rxjs/operators */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/operators/startWith.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! rxjs/operators */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/operators/pairwise.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! rxjs/operators */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/operators/scan.js\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! rxjs/operators */ \"(app-pages-browser)/./node_modules/rxjs/dist/esm5/internal/operators/distinctUntilChanged.js\");\n/* harmony import */ var _sanity_uuid__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! @sanity/uuid */ \"(app-pages-browser)/./node_modules/@sanity/uuid/node_modules/uuid/dist/esm-browser/v4.js\");\n/* harmony import */ var _sanity_icons__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! @sanity/icons */ \"(app-pages-browser)/./node_modules/@sanity/icons/dist/index.js\");\n/* harmony import */ var _sanity_ui__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! @sanity/ui */ \"(app-pages-browser)/./node_modules/@sanity/ui/dist/index.mjs\");\n/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! styled-components */ \"(app-pages-browser)/./node_modules/styled-components/dist/styled-components.browser.esm.js\");\n/* harmony import */ var is_hotkey_esm__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! is-hotkey-esm */ \"(app-pages-browser)/./node_modules/is-hotkey-esm/dist/index.js\");\n/* harmony import */ var lodash_isEqual_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! lodash/isEqual.js */ \"(app-pages-browser)/./node_modules/lodash/isEqual.js\");\n/* harmony import */ var _sanity_util_paths__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @sanity/util/paths */ \"(app-pages-browser)/./node_modules/@sanity/util/lib/paths.mjs\");\n/* harmony import */ var sanity_singletons__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! sanity/_singletons */ \"(app-pages-browser)/./node_modules/sanity/lib/_singletons.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst emptyArray = [];\nfunction PaneRouterProvider(props) {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(60), {\n    children,\n    flatIndex,\n    index,\n    params,\n    payload,\n    siblingIndex\n  } = props, {\n    navigate,\n    navigateIntent,\n    resolvePathFromState\n  } = (0,sanity_router__WEBPACK_IMPORTED_MODULE_5__.useRouter)(), routerState = (0,sanity_router__WEBPACK_IMPORTED_MODULE_5__.useRouterState)(), {\n    panes,\n    expand\n  } = (0,_pane_mjs__WEBPACK_IMPORTED_MODULE_6__.usePaneLayout)();\n  let t0;\n  t0 = routerState?.panes || emptyArray;\n  const routerPaneGroups = t0;\n  let t1;\n  t1 = panes?.[panes.length - 2];\n  const lastPane = t1, groupIndex = index - 1;\n  let t2;\n  $[0] !== groupIndex || $[1] !== routerPaneGroups || $[2] !== routerState || $[3] !== siblingIndex ? (t2 = (modifier) => {\n    const currentGroup = routerPaneGroups[groupIndex] || [], currentItem = currentGroup[siblingIndex], nextGroup = modifier(currentGroup, currentItem), nextPanes = [...routerPaneGroups.slice(0, groupIndex), nextGroup, ...routerPaneGroups.slice(groupIndex + 1)];\n    return {\n      ...routerState || {},\n      panes: nextPanes\n    };\n  }, $[0] = groupIndex, $[1] = routerPaneGroups, $[2] = routerState, $[3] = siblingIndex, $[4] = t2) : t2 = $[4];\n  const createNextRouterState = t2;\n  let t3;\n  $[5] !== createNextRouterState || $[6] !== navigate ? (t3 = (modifier_0) => {\n    const nextRouterState_0 = createNextRouterState(modifier_0);\n    return setTimeout(() => navigate(nextRouterState_0), 0), nextRouterState_0;\n  }, $[5] = createNextRouterState, $[6] = navigate, $[7] = t3) : t3 = $[7];\n  const modifyCurrentGroup = t3;\n  let t4;\n  $[8] !== createNextRouterState || $[9] !== resolvePathFromState || $[10] !== siblingIndex ? (t4 = (nextParams) => {\n    const nextRouterState_1 = createNextRouterState((siblings, item) => [...siblings.slice(0, siblingIndex), {\n      ...item,\n      params: nextParams\n    }, ...siblings.slice(siblingIndex + 1)]);\n    return resolvePathFromState(nextRouterState_1);\n  }, $[8] = createNextRouterState, $[9] = resolvePathFromState, $[10] = siblingIndex, $[11] = t4) : t4 = $[11];\n  const createPathWithParams = t4;\n  let t5;\n  $[12] !== modifyCurrentGroup || $[13] !== siblingIndex ? (t5 = (nextPayload) => {\n    modifyCurrentGroup((siblings_0, item_0) => [...siblings_0.slice(0, siblingIndex), {\n      ...item_0,\n      payload: nextPayload\n    }, ...siblings_0.slice(siblingIndex + 1)]);\n  }, $[12] = modifyCurrentGroup, $[13] = siblingIndex, $[14] = t5) : t5 = $[14];\n  const setPayload = t5;\n  let t6;\n  $[15] !== modifyCurrentGroup || $[16] !== siblingIndex ? (t6 = (nextParams_0) => {\n    modifyCurrentGroup((siblings_1, item_1) => [...siblings_1.slice(0, siblingIndex), {\n      ...item_1,\n      params: nextParams_0\n    }, ...siblings_1.slice(siblingIndex + 1)]);\n  }, $[15] = modifyCurrentGroup, $[16] = siblingIndex, $[17] = t6) : t6 = $[17];\n  const setParams = t6;\n  let t7;\n  $[18] !== groupIndex || $[19] !== navigate || $[20] !== routerPaneGroups ? (t7 = (t82) => {\n    const {\n      id,\n      parentRefPath,\n      type,\n      template\n    } = t82;\n    navigate({\n      panes: [...routerPaneGroups.slice(0, groupIndex + 1), [{\n        id,\n        params: {\n          template: template.id,\n          parentRefPath: (0,_sanity_util_paths__WEBPACK_IMPORTED_MODULE_7__.toString)(parentRefPath),\n          type\n        },\n        payload: template.params\n      }]]\n    });\n  }, $[18] = groupIndex, $[19] = navigate, $[20] = routerPaneGroups, $[21] = t7) : t7 = $[21];\n  const handleEditReference = t7;\n  let t8;\n  const t9 = routerPaneGroups[groupIndex] ? routerPaneGroups[groupIndex].length > 1 : !1, t10 = routerPaneGroups[groupIndex] ? routerPaneGroups[groupIndex].length : 0, t11 = flatIndex ? _pane_mjs__WEBPACK_IMPORTED_MODULE_6__.BackLink : void 0;\n  let t12, t13;\n  $[22] !== modifyCurrentGroup ? (t12 = (t142) => {\n    const opts = t142 === void 0 ? {} : t142;\n    modifyCurrentGroup(() => [{\n      id: opts.id || \"\",\n      payload: opts.payload,\n      params: opts.params || {}\n    }]);\n  }, t13 = () => {\n    modifyCurrentGroup(_temp$5);\n  }, $[22] = modifyCurrentGroup, $[23] = t12, $[24] = t13) : (t12 = $[23], t13 = $[24]);\n  let t14;\n  $[25] !== expand || $[26] !== groupIndex || $[27] !== lastPane || $[28] !== navigate || $[29] !== routerPaneGroups ? (t14 = (t152) => {\n    (t152 === void 0 || t152) && lastPane && expand(lastPane.element), navigate({\n      panes: [...routerPaneGroups.slice(0, groupIndex)]\n    });\n  }, $[25] = expand, $[26] = groupIndex, $[27] = lastPane, $[28] = navigate, $[29] = routerPaneGroups, $[30] = t14) : t14 = $[30];\n  let t15;\n  $[31] !== modifyCurrentGroup || $[32] !== siblingIndex ? (t15 = (options) => {\n    modifyCurrentGroup((siblings_3, item_3) => {\n      const duplicatedItem = {\n        ...item_3,\n        payload: options?.payload || item_3.payload,\n        params: options?.params || item_3.params\n      };\n      return [...siblings_3.slice(0, siblingIndex), duplicatedItem, ...siblings_3.slice(siblingIndex)];\n    });\n  }, $[31] = modifyCurrentGroup, $[32] = siblingIndex, $[33] = t15) : t15 = $[33];\n  let t16;\n  $[34] !== params || $[35] !== setParams ? (t16 = (viewId) => {\n    const restParams = lodash_omit_js__WEBPACK_IMPORTED_MODULE_3__(params, \"view\");\n    return setParams(viewId ? {\n      ...restParams,\n      view: viewId\n    } : restParams);\n  }, $[34] = params, $[35] = setParams, $[36] = t16) : t16 = $[36];\n  let t17;\n  $[37] !== createPathWithParams || $[38] !== flatIndex || $[39] !== groupIndex || $[40] !== handleEditReference || $[41] !== navigateIntent || $[42] !== params || $[43] !== payload || $[44] !== routerPaneGroups || $[45] !== setParams || $[46] !== setPayload || $[47] !== siblingIndex || $[48] !== t10 || $[49] !== t11 || $[50] !== t12 || $[51] !== t13 || $[52] !== t14 || $[53] !== t15 || $[54] !== t16 || $[55] !== t9 ? (t17 = {\n    index: flatIndex,\n    groupIndex,\n    siblingIndex,\n    payload,\n    params,\n    hasGroupSiblings: t9,\n    groupLength: t10,\n    routerPanesState: routerPaneGroups,\n    ChildLink: _pane_mjs__WEBPACK_IMPORTED_MODULE_6__.ChildLink,\n    BackLink: t11,\n    ReferenceChildLink: _pane_mjs__WEBPACK_IMPORTED_MODULE_6__.ReferenceChildLink,\n    handleEditReference,\n    ParameterizedLink: _pane_mjs__WEBPACK_IMPORTED_MODULE_6__.ParameterizedLink,\n    replaceCurrent: t12,\n    closeCurrent: t13,\n    closeCurrentAndAfter: t14,\n    duplicateCurrent: t15,\n    setView: t16,\n    setParams,\n    setPayload,\n    createPathWithParams,\n    navigateIntent\n  }, $[37] = createPathWithParams, $[38] = flatIndex, $[39] = groupIndex, $[40] = handleEditReference, $[41] = navigateIntent, $[42] = params, $[43] = payload, $[44] = routerPaneGroups, $[45] = setParams, $[46] = setPayload, $[47] = siblingIndex, $[48] = t10, $[49] = t11, $[50] = t12, $[51] = t13, $[52] = t14, $[53] = t15, $[54] = t16, $[55] = t9, $[56] = t17) : t17 = $[56], t8 = t17;\n  const ctx = t8;\n  let t18;\n  return $[57] !== children || $[58] !== ctx ? (t18 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(sanity_singletons__WEBPACK_IMPORTED_MODULE_8__.PaneRouterContext.Provider, { value: ctx, children }), $[57] = children, $[58] = ctx, $[59] = t18) : t18 = $[59], t18;\n}\nfunction _temp$5(siblings_2, item_2) {\n  return siblings_2.length > 1 ? siblings_2.filter((sibling) => sibling !== item_2) : siblings_2;\n}\nclass PaneResolutionError extends Error {\n  constructor({\n    message,\n    context,\n    helpId,\n    cause\n  }) {\n    super(message), this.name = \"PaneResolutionError\", this.context = context, this.helpId = helpId, this.cause = cause;\n  }\n}\nconst randomIdCache = /* @__PURE__ */ new WeakMap();\nfunction assignId(obj) {\n  const cachedValue = randomIdCache.get(obj);\n  if (cachedValue) return cachedValue;\n  const id = (0,nanoid__WEBPACK_IMPORTED_MODULE_9__.nanoid)();\n  return randomIdCache.set(obj, id), id;\n}\nconst isPromise = (thing) => !!thing && typeof thing?.then == \"function\", isSerializable = (thing) => (0,sanity__WEBPACK_IMPORTED_MODULE_10__.isRecord)(thing) ? typeof thing.serialize == \"function\" : !1, rethrowWithPaneResolutionErrors = (next) => (unresolvedPane, context, flatIndex) => {\n  try {\n    return next(unresolvedPane, context, flatIndex);\n  } catch (e) {\n    throw e instanceof PaneResolutionError ? e : new PaneResolutionError({\n      message: typeof e?.message == \"string\" ? e.message : \"\",\n      context,\n      cause: e\n    });\n  }\n}, wrapWithPublishReplay = (next) => (...args) => next(...args).pipe(\n  // need to add publishReplay + refCount to ensure new subscribers always\n  // get an emission. without this, memoized observables may get stuck\n  // waiting for their first emissions resulting in a loading pane\n  (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.publishReplay)(1),\n  (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.refCount)()\n);\nfunction createPaneResolver(middleware) {\n  const resolvePane = rethrowWithPaneResolutionErrors(wrapWithPublishReplay(middleware((unresolvedPane, context, flatIndex) => {\n    if (!unresolvedPane)\n      throw new PaneResolutionError({\n        message: \"Pane returned no child\",\n        context,\n        helpId: \"structure-item-returned-no-child\"\n      });\n    return isPromise(unresolvedPane) || (0,rxjs__WEBPACK_IMPORTED_MODULE_13__.isObservable)(unresolvedPane) ? (0,rxjs__WEBPACK_IMPORTED_MODULE_14__.from)(unresolvedPane).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.switchMap)((result) => resolvePane(result, context, flatIndex))) : isSerializable(unresolvedPane) ? resolvePane(unresolvedPane.serialize(context), context, flatIndex) : typeof unresolvedPane == \"function\" ? resolvePane(unresolvedPane(context.id, context), context, flatIndex) : (0,rxjs__WEBPACK_IMPORTED_MODULE_16__.of)(unresolvedPane);\n  })));\n  return resolvePane;\n}\nconst bindCache = /* @__PURE__ */ new WeakMap();\nfunction memoBind(obj, methodKey) {\n  const boundMethods = bindCache.get(obj) || /* @__PURE__ */ new Map();\n  if (boundMethods) {\n    const bound2 = boundMethods.get(methodKey);\n    if (bound2) return bound2;\n  }\n  const method = obj[methodKey];\n  if (typeof method != \"function\")\n    throw new Error(`Expected property \\`${methodKey}\\` to be a function but got ${typeof method} instead.`);\n  const bound = method.bind(obj);\n  return boundMethods.set(methodKey, bound), bindCache.set(obj, boundMethods), bound;\n}\nasync function resolveIntent(options) {\n  const resolvedPaneCache = /* @__PURE__ */ new Map(), resolvePane = createPaneResolver((nextFn) => (unresolvedPane, context, flatIndex) => {\n    const key = unresolvedPane && `${assignId(unresolvedPane)}-${context.path.join(\"__\")}`, cachedResolvedPane = key && resolvedPaneCache.get(key);\n    if (cachedResolvedPane) return cachedResolvedPane;\n    const result = nextFn(unresolvedPane, context, flatIndex);\n    return key && resolvedPaneCache.set(key, result), result;\n  }), fallbackEditorPanes = [[{\n    id: `__edit__${options.params.id}`,\n    params: {\n      ...lodash_omit_js__WEBPACK_IMPORTED_MODULE_3__(options.params, [\"id\"]),\n      type: options.params.type\n    },\n    payload: options.payload\n  }]];\n  async function traverse({\n    currentId,\n    flatIndex,\n    intent,\n    params,\n    parent: parent2,\n    path,\n    payload,\n    unresolvedPane,\n    levelIndex,\n    structureContext\n  }) {\n    if (!unresolvedPane) return [];\n    const {\n      id: targetId,\n      type: schemaTypeName,\n      ...otherParams\n    } = params, resolvedPane = await (0,rxjs__WEBPACK_IMPORTED_MODULE_17__.firstValueFrom)(resolvePane(unresolvedPane, {\n      id: currentId,\n      splitIndex: 0,\n      parent: parent2,\n      path,\n      index: flatIndex,\n      params: {},\n      payload: void 0,\n      structureContext\n    }, flatIndex));\n    return resolvedPane.type === \"document\" && resolvedPane.id === targetId ? [{\n      panes: [...path.slice(0, path.length - 1).map((i) => [{\n        id: i\n      }]), [{\n        id: targetId,\n        params: otherParams,\n        payload\n      }]],\n      depthIndex: path.length,\n      levelIndex\n    }] : (\n      // if the resolve pane's `canHandleIntent` returns true, then resolve\n      resolvedPane.canHandleIntent?.(intent, params, {\n        pane: resolvedPane,\n        index: flatIndex\n      }) || // if the pane's `canHandleIntent` did not return true, then match against\n      // this default case. we will resolve the intent if:\n      resolvedPane.type === \"documentList\" && // 1. the schema type matches (this required for the document to render)\n      resolvedPane.schemaTypeName === schemaTypeName && // 2. the filter is the default filter.\n      //\n      // NOTE: this case is to prevent false positive matches where the user\n      // has configured a more specific filter for a particular type. In that\n      // case, the user can implement their own `canHandleIntent` function\n      resolvedPane.options.filter === \"_type == $type\" ? [{\n        panes: [\n          // map the current path to router panes\n          ...path.map((id) => [{\n            id\n          }]),\n          // then augment with the intents IDs and params\n          [{\n            id: params.id,\n            params: otherParams,\n            payload\n          }]\n        ],\n        depthIndex: path.length,\n        levelIndex\n      }] : resolvedPane.type === \"list\" && resolvedPane.child && resolvedPane.items ? (await Promise.all(resolvedPane.items.map((item, nextLevelIndex) => item.type === \"divider\" ? Promise.resolve([]) : traverse({\n        currentId: item._id || item.id,\n        flatIndex: flatIndex + 1,\n        intent,\n        params,\n        parent: resolvedPane,\n        path: [...path, item.id],\n        payload,\n        unresolvedPane: typeof resolvedPane.child == \"function\" ? memoBind(resolvedPane, \"child\") : resolvedPane.child,\n        levelIndex: nextLevelIndex,\n        structureContext\n      })))).flat() : []\n    );\n  }\n  const closestPaneToRoot = (await traverse({\n    currentId: \"root\",\n    flatIndex: 0,\n    levelIndex: 0,\n    intent: options.intent,\n    params: options.params,\n    parent: null,\n    path: [],\n    payload: options.payload,\n    unresolvedPane: options.rootPaneNode,\n    structureContext: options.structureContext\n  })).sort((a, b) => a.depthIndex === b.depthIndex ? a.levelIndex - b.levelIndex : a.depthIndex - b.depthIndex)[0];\n  return closestPaneToRoot ? closestPaneToRoot.panes : fallbackEditorPanes;\n}\nconst fallbackEditorChild = (nodeId, context) => {\n  const id = nodeId.replace(/^__edit__/, \"\"), {\n    params,\n    payload,\n    structureContext: {\n      resolveDocumentNode\n    }\n  } = context, {\n    type,\n    template\n  } = params;\n  if (!type)\n    throw new Error(`Document type for document with ID ${id} was not provided in the router params.`);\n  let defaultDocumentBuilder = resolveDocumentNode({\n    schemaType: type,\n    documentId: id\n  }).id(\"editor\");\n  return template && (defaultDocumentBuilder = defaultDocumentBuilder.initialValueTemplate(template, payload)), defaultDocumentBuilder.serialize();\n};\nfunction hashContext(context) {\n  return `contextHash(${JSON.stringify({\n    id: context.id,\n    parentId: parent && assignId(parent),\n    path: context.path,\n    index: context.index,\n    splitIndex: context.splitIndex,\n    serializeOptionsIndex: context.serializeOptions?.index,\n    serializeOptionsPath: context.serializeOptions?.path\n  })})`;\n}\nconst hashResolvedPaneMeta = (meta) => {\n  const normalized = {\n    type: meta.type,\n    id: meta.routerPaneSibling.id,\n    params: meta.routerPaneSibling.params || {},\n    payload: meta.routerPaneSibling.payload || null,\n    flatIndex: meta.flatIndex,\n    groupIndex: meta.groupIndex,\n    siblingIndex: meta.siblingIndex,\n    path: meta.path,\n    paneNode: meta.type === \"resolvedMeta\" ? assignId(meta.paneNode) : null\n  };\n  return `metaHash(${JSON.stringify(normalized)})`;\n};\nfunction resolvePaneTree({\n  unresolvedPane,\n  flattenedRouterPanes,\n  parent: parent2,\n  path,\n  resolvePane,\n  structureContext\n}) {\n  const [current, ...rest] = flattenedRouterPanes, next = rest[0], context = {\n    id: current.routerPaneSibling.id,\n    splitIndex: current.siblingIndex,\n    parent: parent2,\n    path: [...path, current.routerPaneSibling.id],\n    index: current.flatIndex,\n    params: current.routerPaneSibling.params || {},\n    payload: current.routerPaneSibling.payload,\n    structureContext\n  };\n  try {\n    return resolvePane(unresolvedPane, context, current.flatIndex).pipe(\n      // this switch map receives a resolved pane\n      (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.switchMap)((paneNode) => {\n        const resolvedPaneMeta = {\n          type: \"resolvedMeta\",\n          ...current,\n          paneNode,\n          path: context.path\n        }, loadingPanes = rest.map((i, restIndex) => ({\n          type: \"loading\",\n          path: [...context.path, ...rest.slice(restIndex).map((_, currentIndex) => `[${i.flatIndex + currentIndex}]`)],\n          paneNode: null,\n          ...i\n        }));\n        if (!rest.length)\n          return (0,rxjs__WEBPACK_IMPORTED_MODULE_16__.of)([resolvedPaneMeta]);\n        let nextStream;\n        return (\n          /* the fallback editor case */\n          next?.routerPaneSibling.id.startsWith(\"__edit__\") ? nextStream = resolvePaneTree({\n            unresolvedPane: fallbackEditorChild,\n            flattenedRouterPanes: rest,\n            parent: parent2,\n            path: context.path,\n            resolvePane,\n            structureContext\n          }) : current.groupIndex === next?.groupIndex ? nextStream = resolvePaneTree({\n            unresolvedPane,\n            flattenedRouterPanes: rest,\n            parent: parent2,\n            path,\n            resolvePane,\n            structureContext\n          }) : nextStream = resolvePaneTree({\n            unresolvedPane: typeof paneNode.child == \"function\" ? memoBind(paneNode, \"child\") : paneNode.child,\n            flattenedRouterPanes: rest,\n            parent: paneNode,\n            path: context.path,\n            resolvePane,\n            structureContext\n          }), (0,rxjs__WEBPACK_IMPORTED_MODULE_18__.concat)(\n            // we emit the loading panes first in a concat (this emits immediately)\n            (0,rxjs__WEBPACK_IMPORTED_MODULE_16__.of)([resolvedPaneMeta, ...loadingPanes]),\n            // then whenever the next stream is done, the results will be combined.\n            nextStream.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_19__.map)((nextResolvedPanes) => [resolvedPaneMeta, ...nextResolvedPanes]))\n          )\n        );\n      })\n    );\n  } catch (e) {\n    if (e instanceof PaneResolutionError && (e.context && console.warn(`Pane resolution error at index ${e.context.index}${e.context.splitIndex > 0 ? ` for split pane index ${e.context.splitIndex}` : \"\"}: ${e.message}${e.helpId ? ` - see ${(0,_generate_help_url_esm_mjs__WEBPACK_IMPORTED_MODULE_20__.generateHelpUrl)(e.helpId)}` : \"\"}`, e), e.helpId === \"structure-item-returned-no-child\"))\n      return (0,rxjs__WEBPACK_IMPORTED_MODULE_16__.of)([]);\n    throw e;\n  }\n}\nfunction createResolvedPaneNodeStream({\n  routerPanesStream,\n  rootPaneNode,\n  initialCacheState = {\n    cacheKeysByFlatIndex: [],\n    flattenedRouterPanes: [],\n    resolvedPaneCache: /* @__PURE__ */ new Map(),\n    resolvePane: () => rxjs__WEBPACK_IMPORTED_MODULE_21__.NEVER\n  },\n  structureContext\n}) {\n  return routerPanesStream.pipe(\n    // add in implicit \"root\" router pane\n    (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_19__.map)((rawRouterPanes) => [[{\n      id: \"root\"\n    }], ...rawRouterPanes]),\n    // create flattened router panes\n    (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_19__.map)((routerPanes) => routerPanes.flatMap((routerPaneGroup, groupIndex) => routerPaneGroup.map((routerPaneSibling, siblingIndex) => ({\n      routerPaneSibling,\n      groupIndex,\n      siblingIndex\n    }))).map((i, index) => ({\n      ...i,\n      flatIndex: index\n    }))),\n    // calculate a \"diffIndex\" used for clearing the memo cache\n    (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_22__.startWith)([]),\n    (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_23__.pairwise)(),\n    (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_19__.map)(([prev, curr]) => {\n      for (let i = 0; i < curr.length; i++) {\n        const prevValue = prev[i], currValue = curr[i];\n        if (!lodash_isEqual_js__WEBPACK_IMPORTED_MODULE_4__(prevValue, currValue))\n          return {\n            flattenedRouterPanes: curr,\n            diffIndex: i\n          };\n      }\n      return {\n        flattenedRouterPanes: curr,\n        diffIndex: curr.length\n      };\n    }),\n    // create the memoized `resolvePane` function and manage the memo cache\n    (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_24__.scan)((acc, next) => {\n      const {\n        cacheKeysByFlatIndex,\n        resolvedPaneCache\n      } = acc, {\n        flattenedRouterPanes,\n        diffIndex\n      } = next, beforeDiffIndex = cacheKeysByFlatIndex.slice(0, diffIndex + 1), afterDiffIndex = cacheKeysByFlatIndex.slice(diffIndex + 1), keysToKeep = new Set(beforeDiffIndex.flatMap((keySet) => Array.from(keySet))), keysToDelete = afterDiffIndex.flatMap((keySet) => Array.from(keySet)).filter((key) => !keysToKeep.has(key));\n      for (const key of keysToDelete)\n        resolvedPaneCache.delete(key);\n      return {\n        flattenedRouterPanes,\n        cacheKeysByFlatIndex,\n        resolvedPaneCache,\n        resolvePane: createPaneResolver((nextFn) => (unresolvedPane, context, flatIndex) => {\n          const key = unresolvedPane && `${assignId(unresolvedPane)}-${hashContext(context)}`, cachedResolvedPane = key && resolvedPaneCache.get(key);\n          if (cachedResolvedPane) return cachedResolvedPane;\n          const result = nextFn(unresolvedPane, context, flatIndex);\n          if (!key) return result;\n          const cacheKeySet = cacheKeysByFlatIndex[flatIndex] || /* @__PURE__ */ new Set();\n          return cacheKeySet.add(key), cacheKeysByFlatIndex[flatIndex] = cacheKeySet, resolvedPaneCache.set(key, result), result;\n        })\n      };\n    }, initialCacheState),\n    // run the memoized, recursive resolving\n    (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.switchMap)(({\n      flattenedRouterPanes,\n      resolvePane\n    }) => resolvePaneTree({\n      unresolvedPane: rootPaneNode,\n      flattenedRouterPanes,\n      parent: null,\n      path: [],\n      resolvePane,\n      structureContext\n    }))\n  ).pipe(\n    // this diffs the previous emission with the current one. if there is a new\n    // loading pane at the same position where a previous pane already had a\n    // resolved value (looking at the IDs to compare), then return the previous\n    // pane instead of the loading pane\n    (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_24__.scan)((prev, next) => next.map((nextPane, index) => {\n      const prevPane = prev[index];\n      return !prevPane || nextPane.type !== \"loading\" ? nextPane : prevPane.routerPaneSibling.id === nextPane.routerPaneSibling.id ? prevPane : nextPane;\n    }), []),\n    // this prevents duplicate emissions\n    (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_25__.distinctUntilChanged)((prev, next) => {\n      if (prev.length !== next.length) return !1;\n      for (let i = 0; i < next.length; i++) {\n        const prevValue = prev[i], nextValue = next[i];\n        if (hashResolvedPaneMeta(prevValue) !== hashResolvedPaneMeta(nextValue))\n          return !1;\n      }\n      return !0;\n    })\n  );\n}\nfunction useRouterPanesStream() {\n  const routerStateSubject = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => new rxjs__WEBPACK_IMPORTED_MODULE_26__.ReplaySubject(1), []), routerPanes$ = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => routerStateSubject.asObservable().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_19__.map)((_routerState) => _routerState?.panes || [])), [routerStateSubject]), {\n    state: routerState\n  } = (0,sanity_router__WEBPACK_IMPORTED_MODULE_5__.useRouter)();\n  return (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    routerStateSubject.next(routerState);\n  }, [routerState, routerStateSubject]), routerPanes$;\n}\nfunction useResolvedPanes() {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(6), [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)();\n  if (error)\n    throw error;\n  const {\n    structureContext,\n    rootPaneNode\n  } = (0,_pane_mjs__WEBPACK_IMPORTED_MODULE_6__.useStructureTool)();\n  let t0;\n  $[0] === Symbol.for(\"react.memo_cache_sentinel\") ? (t0 = {\n    paneDataItems: [],\n    resolvedPanes: [],\n    routerPanes: []\n  }, $[0] = t0) : t0 = $[0];\n  const [data, setData] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(t0), routerPanesStream = useRouterPanesStream();\n  let t1, t2;\n  return $[1] !== rootPaneNode || $[2] !== routerPanesStream || $[3] !== structureContext ? (t1 = () => {\n    const subscription = createResolvedPaneNodeStream({\n      rootPaneNode,\n      routerPanesStream,\n      structureContext\n    }).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_19__.map)(_temp4)).subscribe({\n      next: (result) => setData(result),\n      error: (e) => setError(e)\n    });\n    return () => subscription.unsubscribe();\n  }, t2 = [rootPaneNode, routerPanesStream, structureContext], $[1] = rootPaneNode, $[2] = routerPanesStream, $[3] = structureContext, $[4] = t1, $[5] = t2) : (t1 = $[4], t2 = $[5]), (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(t1, t2), data;\n}\nfunction _temp4(resolvedPanes) {\n  const routerPanes = resolvedPanes.reduce(_temp2$3, []), groupsLen = routerPanes.length, paneDataItems = resolvedPanes.map((pane) => {\n    const {\n      groupIndex,\n      flatIndex,\n      siblingIndex,\n      routerPaneSibling,\n      path\n    } = pane, itemId = routerPaneSibling.id, nextGroup = routerPanes[groupIndex + 1];\n    return {\n      active: groupIndex === groupsLen - 2,\n      childItemId: nextGroup?.[0].id ?? null,\n      index: flatIndex,\n      itemId: routerPaneSibling.id,\n      groupIndex,\n      key: `${pane.type === \"loading\" ? \"unknown\" : pane.paneNode.id}-${itemId}-${siblingIndex}`,\n      pane: pane.type === \"loading\" ? _pane_mjs__WEBPACK_IMPORTED_MODULE_6__.LOADING_PANE : pane.paneNode,\n      params: routerPaneSibling.params || {},\n      path: path.join(\";\"),\n      payload: routerPaneSibling.payload,\n      selected: flatIndex === resolvedPanes.length - 1,\n      siblingIndex\n    };\n  });\n  return {\n    paneDataItems,\n    routerPanes,\n    resolvedPanes: paneDataItems.map(_temp3)\n  };\n}\nfunction _temp3(pane_0) {\n  return pane_0.pane;\n}\nfunction _temp2$3(acc, next) {\n  const currentGroup = acc[next.groupIndex] || [];\n  return currentGroup[next.siblingIndex] = next.routerPaneSibling, acc[next.groupIndex] = currentGroup, acc;\n}\nasync function ensureDocumentIdAndType(documentStore, id, type) {\n  if (id && type) return {\n    id,\n    type\n  };\n  if (!id && type) return {\n    id: (0,_sanity_uuid__WEBPACK_IMPORTED_MODULE_27__[\"default\"])(),\n    type\n  };\n  if (id && !type) {\n    const resolvedType = await (0,rxjs__WEBPACK_IMPORTED_MODULE_17__.firstValueFrom)(documentStore.resolveTypeForDocument(id));\n    return {\n      id,\n      type: resolvedType\n    };\n  }\n  throw new PaneResolutionError({\n    message: \"Neither document `id` or `type` was provided when trying to resolve intent.\"\n  });\n}\nconst EMPTY_RECORD = {}, IntentResolver = (0,react__WEBPACK_IMPORTED_MODULE_2__.memo)(function() {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(7), {\n    navigate\n  } = (0,sanity_router__WEBPACK_IMPORTED_MODULE_5__.useRouter)(), maybeIntent = (0,sanity_router__WEBPACK_IMPORTED_MODULE_5__.useRouterState)(_temp$4), {\n    rootPaneNode,\n    structureContext\n  } = (0,_pane_mjs__WEBPACK_IMPORTED_MODULE_6__.useStructureTool)(), documentStore = (0,sanity__WEBPACK_IMPORTED_MODULE_10__.useDocumentStore)(), [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);\n  if (error)\n    throw error;\n  let t0, t1;\n  return $[0] !== documentStore || $[1] !== maybeIntent || $[2] !== navigate || $[3] !== rootPaneNode || $[4] !== structureContext ? (t0 = () => {\n    if (maybeIntent) {\n      const {\n        intent,\n        params,\n        payload\n      } = maybeIntent;\n      let cancelled;\n      return cancelled = !1, async function() {\n        const {\n          id,\n          type\n        } = await ensureDocumentIdAndType(documentStore, typeof params.id == \"string\" ? params.id : void 0, typeof params.type == \"string\" ? params.type : void 0);\n        if (cancelled)\n          return;\n        const panes = await resolveIntent({\n          intent,\n          params: {\n            ...params,\n            id,\n            type\n          },\n          payload,\n          rootPaneNode,\n          structureContext\n        });\n        cancelled || navigate({\n          panes\n        }, {\n          replace: !0\n        });\n      }().catch(setError), () => {\n        cancelled = !0;\n      };\n    }\n  }, t1 = [documentStore, maybeIntent, navigate, rootPaneNode, structureContext], $[0] = documentStore, $[1] = maybeIntent, $[2] = navigate, $[3] = rootPaneNode, $[4] = structureContext, $[5] = t0, $[6] = t1) : (t0 = $[5], t1 = $[6]), (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(t0, t1), null;\n});\nfunction _temp$4(routerState) {\n  const intentName = typeof routerState.intent == \"string\" ? routerState.intent : void 0;\n  return intentName ? {\n    intent: intentName,\n    params: (0,sanity__WEBPACK_IMPORTED_MODULE_10__.isRecord)(routerState.params) ? routerState.params : EMPTY_RECORD,\n    payload: routerState.payload\n  } : void 0;\n}\nconst PathSegment = styled_components__WEBPACK_IMPORTED_MODULE_28__.styled.span`\n  &:not(:last-child)::after {\n    content: ' ➝ ';\n    opacity: 0.5;\n  }\n`;\nfunction formatStack(stack) {\n  return stack.replace(/\\(\\.\\.\\.\\)\\./g, `(...)\n  .`).replace(/__WEBPACK_IMPORTED_MODULE_\\d+_+/g, \"\").replace(/___default\\./g, \".\").replace(new RegExp(` \\\\(https?:\\\\/\\\\/${window.location.host}`, \"g\"), \" (\");\n}\nfunction StructureError(t0) {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(37), {\n    error\n  } = t0;\n  if (!(error instanceof PaneResolutionError))\n    throw error;\n  const {\n    cause\n  } = error, {\n    t\n  } = (0,sanity__WEBPACK_IMPORTED_MODULE_10__.useTranslation)(_pane_mjs__WEBPACK_IMPORTED_MODULE_6__.structureLocaleNamespace), stack = cause?.stack || error.stack, showStack = stack && !(cause instanceof _pane_mjs__WEBPACK_IMPORTED_MODULE_6__.SerializeError) && !error.message.includes(\"Module build failed:\");\n  let t1;\n  $[0] !== cause ? (t1 = cause instanceof _pane_mjs__WEBPACK_IMPORTED_MODULE_6__.SerializeError ? cause.path : [], $[0] = cause, $[1] = t1) : t1 = $[1];\n  const path = t1, helpId = cause instanceof _pane_mjs__WEBPACK_IMPORTED_MODULE_6__.SerializeError && cause.helpId || error.helpId, handleReload = _temp$3;\n  let t2;\n  $[2] !== t ? (t2 = t(\"structure-error.header.text\"), $[2] = t, $[3] = t2) : t2 = $[3];\n  let t3;\n  $[4] !== t2 ? (t3 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_29__.Heading, { as: \"h2\", children: t2 }), $[4] = t2, $[5] = t3) : t3 = $[5];\n  let t4;\n  $[6] !== path || $[7] !== t ? (t4 = path.length > 0 && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_29__.Stack, { space: 2, children: [\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_29__.Text, { size: 1, weight: \"medium\", children: t(\"structure-error.structure-path.label\") }),\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_29__.Code, { children: path.slice(1).map(_temp2$2) })\n  ] }), $[6] = path, $[7] = t, $[8] = t4) : t4 = $[8];\n  let t5;\n  $[9] !== t ? (t5 = t(\"structure-error.error.label\"), $[9] = t, $[10] = t5) : t5 = $[10];\n  let t6;\n  $[11] !== t5 ? (t6 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_29__.Text, { size: 1, weight: \"medium\", children: t5 }), $[11] = t5, $[12] = t6) : t6 = $[12];\n  let t7;\n  $[13] !== error.message || $[14] !== showStack || $[15] !== stack ? (t7 = showStack ? formatStack(stack) : error.message, $[13] = error.message, $[14] = showStack, $[15] = stack, $[16] = t7) : t7 = $[16];\n  let t8;\n  $[17] !== t7 ? (t8 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_29__.Code, { children: t7 }), $[17] = t7, $[18] = t8) : t8 = $[18];\n  let t9;\n  $[19] !== t6 || $[20] !== t8 ? (t9 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_29__.Stack, { marginTop: 4, space: 2, children: [\n    t6,\n    t8\n  ] }), $[19] = t6, $[20] = t8, $[21] = t9) : t9 = $[21];\n  let t10;\n  $[22] !== helpId || $[23] !== t ? (t10 = helpId && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_29__.Box, { marginTop: 4, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_29__.Text, { children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"a\", { href: (0,_generate_help_url_esm_mjs__WEBPACK_IMPORTED_MODULE_20__.generateHelpUrl)(helpId), rel: \"noopener noreferrer\", target: \"_blank\", children: t(\"structure-error.docs-link.text\") }) }) }), $[22] = helpId, $[23] = t, $[24] = t10) : t10 = $[24];\n  let t11;\n  $[25] !== t ? (t11 = t(\"structure-error.reload-button.text\"), $[25] = t, $[26] = t11) : t11 = $[26];\n  let t12;\n  $[27] !== t11 ? (t12 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_29__.Box, { marginTop: 4, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_generate_help_url_esm_mjs__WEBPACK_IMPORTED_MODULE_20__.Button, { text: t11, icon: _sanity_icons__WEBPACK_IMPORTED_MODULE_30__.SyncIcon, tone: \"primary\", onClick: handleReload }) }), $[27] = t11, $[28] = t12) : t12 = $[28];\n  let t13;\n  $[29] !== t10 || $[30] !== t12 || $[31] !== t4 || $[32] !== t9 ? (t13 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_29__.Card, { marginTop: 4, padding: 4, radius: 2, overflow: \"auto\", shadow: 1, tone: \"inherit\", children: [\n    t4,\n    t9,\n    t10,\n    t12\n  ] }), $[29] = t10, $[30] = t12, $[31] = t4, $[32] = t9, $[33] = t13) : t13 = $[33];\n  let t14;\n  return $[34] !== t13 || $[35] !== t3 ? (t14 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_29__.Card, { height: \"fill\", overflow: \"auto\", padding: 4, sizing: \"border\", tone: \"critical\", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_29__.Container, { children: [\n    t3,\n    t13\n  ] }) }), $[34] = t13, $[35] = t3, $[36] = t14) : t14 = $[36], t14;\n}\nfunction _temp2$2(segment, i) {\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(PathSegment, { children: segment }, `${segment}-${i}`);\n}\nfunction _temp$3() {\n  window.location.reload();\n}\nfunction UnknownPane(props) {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(14), {\n    isSelected,\n    pane,\n    paneKey\n  } = props;\n  let t0;\n  $[0] !== pane ? (t0 = (0,sanity__WEBPACK_IMPORTED_MODULE_10__.isRecord)(pane) && pane.type || null, $[0] = pane, $[1] = t0) : t0 = $[1];\n  const type = t0, {\n    t\n  } = (0,sanity__WEBPACK_IMPORTED_MODULE_10__.useTranslation)(_pane_mjs__WEBPACK_IMPORTED_MODULE_6__.structureLocaleNamespace);\n  let t1;\n  $[2] !== t ? (t1 = t(\"panes.unknown-pane-type.title\"), $[2] = t, $[3] = t1) : t1 = $[3];\n  let t2;\n  $[4] !== t1 ? (t2 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_pane_mjs__WEBPACK_IMPORTED_MODULE_6__.PaneHeader, { title: t1 }), $[4] = t1, $[5] = t2) : t2 = $[5];\n  let t3;\n  $[6] !== t || $[7] !== type ? (t3 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_pane_mjs__WEBPACK_IMPORTED_MODULE_6__.PaneContent, { children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_29__.Box, { padding: 4, children: typeof type == \"string\" ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_29__.Text, { as: \"p\", muted: !0, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(sanity__WEBPACK_IMPORTED_MODULE_10__.Translate, { t, i18nKey: \"panes.unknown-pane-type.unknown-type.text\", values: {\n    type\n  } }) }) : /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_29__.Text, { as: \"p\", muted: !0, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(sanity__WEBPACK_IMPORTED_MODULE_10__.Translate, { t, i18nKey: \"panes.unknown-pane-type.missing-type.text\" }) }) }) }), $[6] = t, $[7] = type, $[8] = t3) : t3 = $[8];\n  let t4;\n  return $[9] !== isSelected || $[10] !== paneKey || $[11] !== t2 || $[12] !== t3 ? (t4 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_pane_mjs__WEBPACK_IMPORTED_MODULE_6__.Pane, { id: paneKey, selected: isSelected, children: [\n    t2,\n    t3\n  ] }), $[9] = isSelected, $[10] = paneKey, $[11] = t2, $[12] = t3, $[13] = t4) : t4 = $[13], t4;\n}\nconst paneMap = {\n  component: (0,react__WEBPACK_IMPORTED_MODULE_2__.lazy)(() => __webpack_require__.e(/*! import() */ \"_app-pages-browser_node_modules_sanity_lib__chunks-es_index_mjs\").then(__webpack_require__.bind(__webpack_require__, /*! ./index.mjs */ \"(app-pages-browser)/./node_modules/sanity/lib/_chunks-es/index.mjs\"))),\n  document: (0,react__WEBPACK_IMPORTED_MODULE_2__.lazy)(() => Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ./pane.mjs */ \"(app-pages-browser)/./node_modules/sanity/lib/_chunks-es/pane.mjs\")).then(function(n) {\n    return n.pane;\n  })),\n  documentList: (0,react__WEBPACK_IMPORTED_MODULE_2__.lazy)(() => Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ./pane.mjs */ \"(app-pages-browser)/./node_modules/sanity/lib/_chunks-es/pane.mjs\")).then(function(n) {\n    return n.pane$1;\n  })),\n  list: (0,react__WEBPACK_IMPORTED_MODULE_2__.lazy)(() => __webpack_require__.e(/*! import() */ \"_app-pages-browser_node_modules_sanity_lib__chunks-es_index2_mjs\").then(__webpack_require__.bind(__webpack_require__, /*! ./index2.mjs */ \"(app-pages-browser)/./node_modules/sanity/lib/_chunks-es/index2.mjs\")))\n}, StructureToolPane = (0,react__WEBPACK_IMPORTED_MODULE_2__.memo)(function(props) {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(23), {\n    active,\n    childItemId,\n    groupIndex,\n    index,\n    itemId,\n    pane,\n    paneKey,\n    params,\n    payload,\n    path,\n    selected,\n    siblingIndex\n  } = props, PaneComponent = paneMap[pane.type] || UnknownPane;\n  let t0;\n  $[0] !== paneKey || $[1] !== path || $[2] !== selected ? (t0 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_pane_mjs__WEBPACK_IMPORTED_MODULE_6__.LoadingPane, { paneKey, path, selected }), $[0] = paneKey, $[1] = path, $[2] = selected, $[3] = t0) : t0 = $[3];\n  const t1 = childItemId || \"\";\n  let t2;\n  $[4] !== PaneComponent || $[5] !== active || $[6] !== index || $[7] !== itemId || $[8] !== pane || $[9] !== paneKey || $[10] !== selected || $[11] !== t1 ? (t2 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(PaneComponent, { childItemId: t1, index, itemId, isActive: active, isSelected: selected, paneKey, pane }), $[4] = PaneComponent, $[5] = active, $[6] = index, $[7] = itemId, $[8] = pane, $[9] = paneKey, $[10] = selected, $[11] = t1, $[12] = t2) : t2 = $[12];\n  let t3;\n  $[13] !== t0 || $[14] !== t2 ? (t3 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react__WEBPACK_IMPORTED_MODULE_2__.Suspense, { fallback: t0, children: t2 }), $[13] = t0, $[14] = t2, $[15] = t3) : t3 = $[15];\n  let t4;\n  return $[16] !== groupIndex || $[17] !== index || $[18] !== params || $[19] !== payload || $[20] !== siblingIndex || $[21] !== t3 ? (t4 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(PaneRouterProvider, { flatIndex: index, index: groupIndex, params, payload, siblingIndex, children: t3 }), $[16] = groupIndex, $[17] = index, $[18] = params, $[19] = payload, $[20] = siblingIndex, $[21] = t3, $[22] = t4) : t4 = $[22], t4;\n}, ({\n  params: prevParams = {},\n  payload: prevPayload = null,\n  ...prev\n}, {\n  params: nextParams = {},\n  payload: nextPayload = null,\n  ...next\n}) => {\n  if (!lodash_isEqual_js__WEBPACK_IMPORTED_MODULE_4__(prevParams, nextParams) || !lodash_isEqual_js__WEBPACK_IMPORTED_MODULE_4__(prevPayload, nextPayload)) return !1;\n  const keys = /* @__PURE__ */ new Set([...Object.keys(prev), ...Object.keys(next)]);\n  for (const key of keys)\n    if (prev[key] !== next[key]) return !1;\n  return !0;\n});\nfunction NoDocumentTypesScreen() {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(17), {\n    t\n  } = (0,sanity__WEBPACK_IMPORTED_MODULE_10__.useTranslation)(_pane_mjs__WEBPACK_IMPORTED_MODULE_6__.structureLocaleNamespace);\n  let t0;\n  $[0] === Symbol.for(\"react.memo_cache_sentinel\") ? (t0 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_29__.Box, { children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_29__.Text, { size: 1, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_icons__WEBPACK_IMPORTED_MODULE_30__.WarningOutlineIcon, {}) }) }), $[0] = t0) : t0 = $[0];\n  let t1;\n  $[1] !== t ? (t1 = t(\"no-document-types-screen.title\"), $[1] = t, $[2] = t1) : t1 = $[2];\n  let t2;\n  $[3] !== t1 ? (t2 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_29__.Text, { as: \"h1\", size: 1, weight: \"medium\", children: t1 }), $[3] = t1, $[4] = t2) : t2 = $[4];\n  let t3;\n  $[5] !== t ? (t3 = t(\"no-document-types-screen.subtitle\"), $[5] = t, $[6] = t3) : t3 = $[6];\n  let t4;\n  $[7] !== t3 ? (t4 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_29__.Text, { as: \"p\", muted: !0, size: 1, children: t3 }), $[7] = t3, $[8] = t4) : t4 = $[8];\n  let t5;\n  $[9] !== t ? (t5 = t(\"no-document-types-screen.link-text\"), $[9] = t, $[10] = t5) : t5 = $[10];\n  let t6;\n  $[11] !== t5 ? (t6 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_29__.Text, { as: \"p\", muted: !0, size: 1, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"a\", { href: \"https://www.sanity.io/docs/create-a-schema-and-configure-sanity-studio\", target: \"_blank\", rel: \"noreferrer\", children: t5 }) }), $[11] = t5, $[12] = t6) : t6 = $[12];\n  let t7;\n  return $[13] !== t2 || $[14] !== t4 || $[15] !== t6 ? (t7 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_29__.Card, { height: \"fill\", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_29__.Flex, { align: \"center\", height: \"fill\", justify: \"center\", padding: 4, sizing: \"border\", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_29__.Container, { width: 0, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_29__.Card, { padding: 4, radius: 2, shadow: 1, tone: \"caution\", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_29__.Flex, { children: [\n    t0,\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_29__.Stack, { flex: 1, marginLeft: 3, space: 3, children: [\n      t2,\n      t4,\n      t6\n    ] })\n  ] }) }) }) }) }), $[13] = t2, $[14] = t4, $[15] = t6, $[16] = t7) : t7 = $[16], t7;\n}\nconst DocumentTitle = (props) => {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(7), {\n    documentId,\n    documentType\n  } = props, editState = (0,sanity__WEBPACK_IMPORTED_MODULE_10__.useEditState)(documentId, documentType), schema = (0,sanity__WEBPACK_IMPORTED_MODULE_10__.useSchema)(), {\n    t\n  } = (0,sanity__WEBPACK_IMPORTED_MODULE_10__.useTranslation)(_pane_mjs__WEBPACK_IMPORTED_MODULE_6__.structureLocaleNamespace), isNewDocument = !editState?.published && !editState?.draft, documentValue = editState?.draft || editState?.published, schemaType = schema.get(documentType), {\n    value,\n    isLoading: previewValueIsLoading\n  } = (0,sanity__WEBPACK_IMPORTED_MODULE_10__.unstable_useValuePreview)({\n    enabled: !0,\n    schemaType,\n    value: documentValue\n  }), documentTitle = isNewDocument ? t(\"browser-document-title.new-document\", {\n    schemaType: schemaType?.title || schemaType?.name\n  }) : value?.title || t(\"browser-document-title.untitled-document\"), settled = editState.ready && !previewValueIsLoading, newTitle = useConstructDocumentTitle(documentTitle);\n  let t0;\n  $[0] !== newTitle || $[1] !== settled ? (t0 = () => {\n    settled && (document.title = newTitle);\n  }, $[0] = newTitle, $[1] = settled, $[2] = t0) : t0 = $[2];\n  let t1;\n  return $[3] !== documentTitle || $[4] !== newTitle || $[5] !== settled ? (t1 = [documentTitle, settled, newTitle], $[3] = documentTitle, $[4] = newTitle, $[5] = settled, $[6] = t1) : t1 = $[6], (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(t0, t1), null;\n}, PassthroughTitle = (props) => {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(5), {\n    title\n  } = props, newTitle = useConstructDocumentTitle(title);\n  let t0;\n  $[0] !== newTitle ? (t0 = () => {\n    document.title = newTitle;\n  }, $[0] = newTitle, $[1] = t0) : t0 = $[1];\n  let t1;\n  return $[2] !== newTitle || $[3] !== title ? (t1 = [newTitle, title], $[2] = newTitle, $[3] = title, $[4] = t1) : t1 = $[4], (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(t0, t1), null;\n}, StructureTitle = (props) => {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(8), {\n    resolvedPanes\n  } = props;\n  if (!resolvedPanes?.length)\n    return null;\n  const lastPane = resolvedPanes[resolvedPanes.length - 1];\n  if (isLoadingPane(lastPane)) {\n    let t02;\n    return $[0] === Symbol.for(\"react.memo_cache_sentinel\") ? (t02 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(PassthroughTitle, {}), $[0] = t02) : t02 = $[0], t02;\n  }\n  if (isDocumentPane(lastPane)) {\n    if (lastPane?.title) {\n      let t03;\n      return $[1] !== lastPane.title ? (t03 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(PassthroughTitle, { title: lastPane.title }), $[1] = lastPane.title, $[2] = t03) : t03 = $[2], t03;\n    }\n    let t02;\n    return $[3] !== lastPane.options.id || $[4] !== lastPane.options.type ? (t02 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DocumentTitle, { documentId: lastPane.options.id, documentType: lastPane.options.type }), $[3] = lastPane.options.id, $[4] = lastPane.options.type, $[5] = t02) : t02 = $[5], t02;\n  }\n  const t0 = lastPane?.title;\n  let t1;\n  return $[6] !== t0 ? (t1 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(PassthroughTitle, { title: t0 }), $[6] = t0, $[7] = t1) : t1 = $[7], t1;\n};\nfunction useConstructDocumentTitle(activeTitle) {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(3), structureToolBaseTitle = (0,_pane_mjs__WEBPACK_IMPORTED_MODULE_6__.useStructureTool)().structureContext.title;\n  let t0;\n  return $[0] !== activeTitle || $[1] !== structureToolBaseTitle ? (t0 = [activeTitle, structureToolBaseTitle].filter(_temp$2), $[0] = activeTitle, $[1] = structureToolBaseTitle, $[2] = t0) : t0 = $[2], t0.join(\" | \");\n}\nfunction _temp$2(title) {\n  return title;\n}\nfunction isDocumentPane(pane) {\n  return pane !== _pane_mjs__WEBPACK_IMPORTED_MODULE_6__.LOADING_PANE && pane.type === \"document\";\n}\nfunction isLoadingPane(pane) {\n  return pane === _pane_mjs__WEBPACK_IMPORTED_MODULE_6__.LOADING_PANE;\n}\nconst StyledPaneLayout = (0,styled_components__WEBPACK_IMPORTED_MODULE_28__.styled)((0,_pane_mjs__WEBPACK_IMPORTED_MODULE_6__.PaneLayout))`\n  min-height: 100%;\n  min-width: 320px;\n`, isSaveHotkey = (0,is_hotkey_esm__WEBPACK_IMPORTED_MODULE_31__.isHotkey)(\"mod+s\"), StructureTool = (0,react__WEBPACK_IMPORTED_MODULE_2__.memo)(function(t0) {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(31), {\n    onPaneChange\n  } = t0, {\n    push: pushToast\n  } = (0,_sanity_ui__WEBPACK_IMPORTED_MODULE_29__.useToast)(), schema = (0,sanity__WEBPACK_IMPORTED_MODULE_10__.useSchema)(), {\n    layoutCollapsed,\n    setLayoutCollapsed\n  } = (0,_pane_mjs__WEBPACK_IMPORTED_MODULE_6__.useStructureTool)(), {\n    paneDataItems,\n    resolvedPanes\n  } = useResolvedPanes(), isResolvingIntent = (0,sanity_router__WEBPACK_IMPORTED_MODULE_5__.useRouterState)(_temp$1), {\n    sanity: t1\n  } = (0,_sanity_ui__WEBPACK_IMPORTED_MODULE_29__.useTheme)(), {\n    media\n  } = t1, [portalElement, setPortalElement] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);\n  let t2;\n  $[0] !== setLayoutCollapsed ? (t2 = () => setLayoutCollapsed(!0), $[0] = setLayoutCollapsed, $[1] = t2) : t2 = $[1];\n  const handleRootCollapse = t2;\n  let t3;\n  $[2] !== setLayoutCollapsed ? (t3 = () => setLayoutCollapsed(!1), $[2] = setLayoutCollapsed, $[3] = t3) : t3 = $[3];\n  const handleRootExpand = t3;\n  let t4, t5;\n  $[4] !== onPaneChange || $[5] !== resolvedPanes ? (t4 = () => {\n    resolvedPanes.length && onPaneChange(resolvedPanes);\n  }, t5 = [onPaneChange, resolvedPanes], $[4] = onPaneChange, $[5] = resolvedPanes, $[6] = t4, $[7] = t5) : (t4 = $[6], t5 = $[7]), (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(t4, t5);\n  let t6, t7;\n  if ($[8] !== pushToast ? (t6 = () => {\n    const handleGlobalKeyDown = (event) => {\n      isSaveHotkey(event) && (event.preventDefault(), pushToast({\n        closable: !0,\n        id: \"auto-save-message\",\n        status: \"info\",\n        title: \"Your work is automatically saved!\",\n        duration: 4e3\n      }));\n    };\n    return window.addEventListener(\"keydown\", handleGlobalKeyDown), () => window.removeEventListener(\"keydown\", handleGlobalKeyDown);\n  }, t7 = [pushToast], $[8] = pushToast, $[9] = t6, $[10] = t7) : (t6 = $[9], t7 = $[10]), (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(t6, t7), !schema._original?.types.some(sanity__WEBPACK_IMPORTED_MODULE_10__._isCustomDocumentTypeDefinition)) {\n    let t82;\n    return $[11] === Symbol.for(\"react.memo_cache_sentinel\") ? (t82 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(NoDocumentTypesScreen, {}), $[11] = t82) : t82 = $[11], t82;\n  }\n  const t8 = portalElement || null, t9 = layoutCollapsed ? void 0 : \"fill\", t10 = media[1];\n  let t11;\n  $[12] !== paneDataItems ? (t11 = paneDataItems.map(_temp2$1), $[12] = paneDataItems, $[13] = t11) : t11 = $[13];\n  let t12;\n  $[14] !== isResolvingIntent || $[15] !== paneDataItems.length ? (t12 = paneDataItems.length <= 1 && isResolvingIntent && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_pane_mjs__WEBPACK_IMPORTED_MODULE_6__.LoadingPane, { paneKey: \"intent-resolver\" }), $[14] = isResolvingIntent, $[15] = paneDataItems.length, $[16] = t12) : t12 = $[16];\n  let t13;\n  $[17] !== handleRootCollapse || $[18] !== handleRootExpand || $[19] !== t10 || $[20] !== t11 || $[21] !== t12 || $[22] !== t9 ? (t13 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(StyledPaneLayout, { flex: 1, height: t9, minWidth: t10, onCollapse: handleRootCollapse, onExpand: handleRootExpand, children: [\n    t11,\n    t12\n  ] }), $[17] = handleRootCollapse, $[18] = handleRootExpand, $[19] = t10, $[20] = t11, $[21] = t12, $[22] = t9, $[23] = t13) : t13 = $[23];\n  let t14;\n  $[24] !== resolvedPanes ? (t14 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(StructureTitle, { resolvedPanes }), $[24] = resolvedPanes, $[25] = t14) : t14 = $[25];\n  let t15;\n  $[26] === Symbol.for(\"react.memo_cache_sentinel\") ? (t15 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { \"data-portal\": \"\", ref: setPortalElement }), $[26] = t15) : t15 = $[26];\n  let t16;\n  return $[27] !== t13 || $[28] !== t14 || $[29] !== t8 ? (t16 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui__WEBPACK_IMPORTED_MODULE_29__.PortalProvider, { element: t8, children: [\n    t13,\n    t14,\n    t15\n  ] }), $[27] = t13, $[28] = t14, $[29] = t8, $[30] = t16) : t16 = $[30], t16;\n});\nfunction _temp$1(routerState) {\n  return typeof routerState.intent == \"string\";\n}\nfunction _temp2$1(t0) {\n  const {\n    active,\n    childItemId,\n    groupIndex,\n    itemId,\n    key: paneKey,\n    pane,\n    index: paneIndex,\n    params: paneParams,\n    path,\n    payload,\n    siblingIndex,\n    selected\n  } = t0;\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react__WEBPACK_IMPORTED_MODULE_2__.Fragment, { children: pane === _pane_mjs__WEBPACK_IMPORTED_MODULE_6__.LOADING_PANE ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_pane_mjs__WEBPACK_IMPORTED_MODULE_6__.LoadingPane, { paneKey, path, selected }) : /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(StructureToolPane, { active, groupIndex, index: paneIndex, pane, childItemId, itemId, paneKey, params: paneParams, payload, path, selected, siblingIndex }) }, `${pane === _pane_mjs__WEBPACK_IMPORTED_MODULE_6__.LOADING_PANE ? \"loading\" : pane.type}-${paneIndex}`);\n}\nfunction StructureToolBoundary(t0) {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(14), {\n    tool: t1\n  } = t0, {\n    options\n  } = t1, {\n    unstable_sources: sources\n  } = (0,sanity__WEBPACK_IMPORTED_MODULE_10__.useWorkspace)(), [firstSource] = sources;\n  let t2;\n  $[0] !== options ? (t2 = options || {}, $[0] = options, $[1] = t2) : t2 = $[1];\n  const {\n    source,\n    defaultDocumentNode,\n    structure\n  } = t2;\n  let t3;\n  $[2] === Symbol.for(\"react.memo_cache_sentinel\") ? (t3 = [], $[2] = t3) : t3 = $[2], (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(_temp2, t3);\n  let t4;\n  $[3] === Symbol.for(\"react.memo_cache_sentinel\") ? (t4 = {\n    error: null\n  }, $[3] = t4) : t4 = $[3];\n  const [t5, setError] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(t4), {\n    error\n  } = t5;\n  if (error) {\n    let t62;\n    return $[4] !== error ? (t62 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(StructureError, { error }), $[4] = error, $[5] = t62) : t62 = $[5], t62;\n  }\n  const t6 = source || firstSource.name;\n  let t7, t8;\n  $[6] === Symbol.for(\"react.memo_cache_sentinel\") ? (t7 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(StructureTool, { onPaneChange: _pane_mjs__WEBPACK_IMPORTED_MODULE_6__.setActivePanes }), t8 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(IntentResolver, {}), $[6] = t7, $[7] = t8) : (t7 = $[6], t8 = $[7]);\n  let t9;\n  $[8] !== defaultDocumentNode || $[9] !== structure ? (t9 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_pane_mjs__WEBPACK_IMPORTED_MODULE_6__.StructureToolProvider, { defaultDocumentNode, structure, children: [\n    t7,\n    t8\n  ] }), $[8] = defaultDocumentNode, $[9] = structure, $[10] = t9) : t9 = $[10];\n  let t10;\n  return $[11] !== t6 || $[12] !== t9 ? (t10 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_generate_help_url_esm_mjs__WEBPACK_IMPORTED_MODULE_20__.ErrorBoundary, { onCatch: setError, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(sanity__WEBPACK_IMPORTED_MODULE_10__.SourceProvider, { name: t6, children: t9 }) }), $[11] = t6, $[12] = t9, $[13] = t10) : t10 = $[13], t10;\n}\nfunction _temp2() {\n  return (0,_pane_mjs__WEBPACK_IMPORTED_MODULE_6__.setActivePanes)([]), _temp;\n}\nfunction _temp() {\n  return (0,_pane_mjs__WEBPACK_IMPORTED_MODULE_6__.setActivePanes)([]);\n}\n\n//# sourceMappingURL=index3.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9zYW5pdHkvbGliL19jaHVua3MtZXMvaW5kZXgzLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBOEM7QUFDSDtBQUMwQztBQUM0RztBQUM1RztBQUMyTDtBQUN0TjtBQUN4QjtBQUMwRDtBQUM1RDtBQUMwRjtBQUN0RjtBQUN5QjtBQUMyRDtBQUM3RTtBQUNmO0FBQ2E7QUFDRDtBQUNNO0FBQ1M7QUFDdkQ7QUFDQTtBQUNBLFlBQVkseURBQUM7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsSUFBSSxFQUFFLHdEQUFTLGtCQUFrQiw2REFBYztBQUMvQztBQUNBO0FBQ0EsSUFBSSxFQUFFLHdEQUFhO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qiw0REFBUTtBQUNqQztBQUNBLFNBQVM7QUFDVDtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQSwwTEFBMEwsK0NBQVE7QUFDbE07QUFDQTtBQUNBLHNDQUFzQztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7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Q0EsbURBQW1ELHNEQUFHLG1CQUFtQixPQUFPO0FBQ2hGO0FBQ0E7QUFDQTtBQUNBLDJFQUEyRSxzREFBRyxrQkFBa0IsY0FBYyxxREFBYyxFQUFFLHdCQUF3QixzREFBRyxtQkFBbUI7QUFDNUs7QUFDQSw2RUFBNkUsdURBQUksQ0FBQyw0REFBcUIsSUFBSTtBQUMzRztBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsK0RBQStELHNEQUFHLENBQUMsc0VBQWEsSUFBSSw2Q0FBNkMsc0RBQUcsQ0FBQyxtREFBYyxJQUFJLHdCQUF3QixHQUFHO0FBQ2xMO0FBQ0E7QUFDQSxTQUFTLHlEQUFjO0FBQ3ZCO0FBQ0E7QUFDQSxTQUFTLHlEQUFjO0FBQ3ZCO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvc2FuaXR5L2xpYi9fY2h1bmtzLWVzL2luZGV4My5tanM/YWY0MyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBqc3gsIGpzeHMgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmltcG9ydCB7IGMgfSBmcm9tIFwicmVhY3QtY29tcGlsZXItcnVudGltZVwiO1xuaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlTWVtbywgbWVtbywgbGF6eSwgU3VzcGVuc2UsIEZyYWdtZW50IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBpc1JlY29yZCwgdXNlRG9jdW1lbnRTdG9yZSwgdXNlVHJhbnNsYXRpb24sIFRyYW5zbGF0ZSwgdXNlRWRpdFN0YXRlLCB1c2VTY2hlbWEsIHVuc3RhYmxlX3VzZVZhbHVlUHJldmlldywgX2lzQ3VzdG9tRG9jdW1lbnRUeXBlRGVmaW5pdGlvbiwgdXNlV29ya3NwYWNlLCBTb3VyY2VQcm92aWRlciB9IGZyb20gXCJzYW5pdHlcIjtcbmltcG9ydCB7IGdlbmVyYXRlSGVscFVybCwgQnV0dG9uLCBFcnJvckJvdW5kYXJ5IH0gZnJvbSBcIi4vZ2VuZXJhdGUtaGVscC11cmwuZXNtLm1qc1wiO1xuaW1wb3J0IHsgdXNlUGFuZUxheW91dCwgQmFja0xpbmssIENoaWxkTGluaywgUmVmZXJlbmNlQ2hpbGRMaW5rLCBQYXJhbWV0ZXJpemVkTGluaywgdXNlU3RydWN0dXJlVG9vbCwgTE9BRElOR19QQU5FLCBzdHJ1Y3R1cmVMb2NhbGVOYW1lc3BhY2UsIFNlcmlhbGl6ZUVycm9yLCBQYW5lSGVhZGVyLCBQYW5lQ29udGVudCwgUGFuZSwgTG9hZGluZ1BhbmUsIFBhbmVMYXlvdXQsIHNldEFjdGl2ZVBhbmVzLCBTdHJ1Y3R1cmVUb29sUHJvdmlkZXIgfSBmcm9tIFwiLi9wYW5lLm1qc1wiO1xuaW1wb3J0IHsgdXNlUm91dGVyLCB1c2VSb3V0ZXJTdGF0ZSB9IGZyb20gXCJzYW5pdHkvcm91dGVyXCI7XG5pbXBvcnQgb21pdCBmcm9tIFwibG9kYXNoL29taXQuanNcIjtcbmltcG9ydCB7IGlzT2JzZXJ2YWJsZSwgZnJvbSwgb2YsIGZpcnN0VmFsdWVGcm9tLCBORVZFUiwgY29uY2F0LCBSZXBsYXlTdWJqZWN0IH0gZnJvbSBcInJ4anNcIjtcbmltcG9ydCB7IG5hbm9pZCB9IGZyb20gXCJuYW5vaWRcIjtcbmltcG9ydCB7IHN3aXRjaE1hcCwgcHVibGlzaFJlcGxheSwgcmVmQ291bnQsIG1hcCwgc3RhcnRXaXRoLCBwYWlyd2lzZSwgc2NhbiwgZGlzdGluY3RVbnRpbENoYW5nZWQgfSBmcm9tIFwicnhqcy9vcGVyYXRvcnNcIjtcbmltcG9ydCB7IHV1aWQgfSBmcm9tIFwiQHNhbml0eS91dWlkXCI7XG5pbXBvcnQgeyBTeW5jSWNvbiwgV2FybmluZ091dGxpbmVJY29uIH0gZnJvbSBcIkBzYW5pdHkvaWNvbnNcIjtcbmltcG9ydCB7IFN0YWNrLCBUZXh0LCBDb2RlLCBCb3gsIEhlYWRpbmcsIENhcmQsIENvbnRhaW5lciwgRmxleCwgdXNlVG9hc3QsIHVzZVRoZW1lLCBQb3J0YWxQcm92aWRlciB9IGZyb20gXCJAc2FuaXR5L3VpXCI7XG5pbXBvcnQgeyBzdHlsZWQgfSBmcm9tIFwic3R5bGVkLWNvbXBvbmVudHNcIjtcbmltcG9ydCBcIi4uL19zaW5nbGV0b25zLm1qc1wiO1xuaW1wb3J0IHsgaXNIb3RrZXkgfSBmcm9tIFwiaXMtaG90a2V5LWVzbVwiO1xuaW1wb3J0IGlzRXF1YWwgZnJvbSBcImxvZGFzaC9pc0VxdWFsLmpzXCI7XG5pbXBvcnQgeyB0b1N0cmluZyB9IGZyb20gXCJAc2FuaXR5L3V0aWwvcGF0aHNcIjtcbmltcG9ydCB7IFBhbmVSb3V0ZXJDb250ZXh0IH0gZnJvbSBcInNhbml0eS9fc2luZ2xldG9uc1wiO1xuY29uc3QgZW1wdHlBcnJheSA9IFtdO1xuZnVuY3Rpb24gUGFuZVJvdXRlclByb3ZpZGVyKHByb3BzKSB7XG4gIGNvbnN0ICQgPSBjKDYwKSwge1xuICAgIGNoaWxkcmVuLFxuICAgIGZsYXRJbmRleCxcbiAgICBpbmRleCxcbiAgICBwYXJhbXMsXG4gICAgcGF5bG9hZCxcbiAgICBzaWJsaW5nSW5kZXhcbiAgfSA9IHByb3BzLCB7XG4gICAgbmF2aWdhdGUsXG4gICAgbmF2aWdhdGVJbnRlbnQsXG4gICAgcmVzb2x2ZVBhdGhGcm9tU3RhdGVcbiAgfSA9IHVzZVJvdXRlcigpLCByb3V0ZXJTdGF0ZSA9IHVzZVJvdXRlclN0YXRlKCksIHtcbiAgICBwYW5lcyxcbiAgICBleHBhbmRcbiAgfSA9IHVzZVBhbmVMYXlvdXQoKTtcbiAgbGV0IHQwO1xuICB0MCA9IHJvdXRlclN0YXRlPy5wYW5lcyB8fCBlbXB0eUFycmF5O1xuICBjb25zdCByb3V0ZXJQYW5lR3JvdXBzID0gdDA7XG4gIGxldCB0MTtcbiAgdDEgPSBwYW5lcz8uW3BhbmVzLmxlbmd0aCAtIDJdO1xuICBjb25zdCBsYXN0UGFuZSA9IHQxLCBncm91cEluZGV4ID0gaW5kZXggLSAxO1xuICBsZXQgdDI7XG4gICRbMF0gIT09IGdyb3VwSW5kZXggfHwgJFsxXSAhPT0gcm91dGVyUGFuZUdyb3VwcyB8fCAkWzJdICE9PSByb3V0ZXJTdGF0ZSB8fCAkWzNdICE9PSBzaWJsaW5nSW5kZXggPyAodDIgPSAobW9kaWZpZXIpID0+IHtcbiAgICBjb25zdCBjdXJyZW50R3JvdXAgPSByb3V0ZXJQYW5lR3JvdXBzW2dyb3VwSW5kZXhdIHx8IFtdLCBjdXJyZW50SXRlbSA9IGN1cnJlbnRHcm91cFtzaWJsaW5nSW5kZXhdLCBuZXh0R3JvdXAgPSBtb2RpZmllcihjdXJyZW50R3JvdXAsIGN1cnJlbnRJdGVtKSwgbmV4dFBhbmVzID0gWy4uLnJvdXRlclBhbmVHcm91cHMuc2xpY2UoMCwgZ3JvdXBJbmRleCksIG5leHRHcm91cCwgLi4ucm91dGVyUGFuZUdyb3Vwcy5zbGljZShncm91cEluZGV4ICsgMSldO1xuICAgIHJldHVybiB7XG4gICAgICAuLi5yb3V0ZXJTdGF0ZSB8fCB7fSxcbiAgICAgIHBhbmVzOiBuZXh0UGFuZXNcbiAgICB9O1xuICB9LCAkWzBdID0gZ3JvdXBJbmRleCwgJFsxXSA9IHJvdXRlclBhbmVHcm91cHMsICRbMl0gPSByb3V0ZXJTdGF0ZSwgJFszXSA9IHNpYmxpbmdJbmRleCwgJFs0XSA9IHQyKSA6IHQyID0gJFs0XTtcbiAgY29uc3QgY3JlYXRlTmV4dFJvdXRlclN0YXRlID0gdDI7XG4gIGxldCB0MztcbiAgJFs1XSAhPT0gY3JlYXRlTmV4dFJvdXRlclN0YXRlIHx8ICRbNl0gIT09IG5hdmlnYXRlID8gKHQzID0gKG1vZGlmaWVyXzApID0+IHtcbiAgICBjb25zdCBuZXh0Um91dGVyU3RhdGVfMCA9IGNyZWF0ZU5leHRSb3V0ZXJTdGF0ZShtb2RpZmllcl8wKTtcbiAgICByZXR1cm4gc2V0VGltZW91dCgoKSA9PiBuYXZpZ2F0ZShuZXh0Um91dGVyU3RhdGVfMCksIDApLCBuZXh0Um91dGVyU3RhdGVfMDtcbiAgfSwgJFs1XSA9IGNyZWF0ZU5leHRSb3V0ZXJTdGF0ZSwgJFs2XSA9IG5hdmlnYXRlLCAkWzddID0gdDMpIDogdDMgPSAkWzddO1xuICBjb25zdCBtb2RpZnlDdXJyZW50R3JvdXAgPSB0MztcbiAgbGV0IHQ0O1xuICAkWzhdICE9PSBjcmVhdGVOZXh0Um91dGVyU3RhdGUgfHwgJFs5XSAhPT0gcmVzb2x2ZVBhdGhGcm9tU3RhdGUgfHwgJFsxMF0gIT09IHNpYmxpbmdJbmRleCA/ICh0NCA9IChuZXh0UGFyYW1zKSA9PiB7XG4gICAgY29uc3QgbmV4dFJvdXRlclN0YXRlXzEgPSBjcmVhdGVOZXh0Um91dGVyU3RhdGUoKHNpYmxpbmdzLCBpdGVtKSA9PiBbLi4uc2libGluZ3Muc2xpY2UoMCwgc2libGluZ0luZGV4KSwge1xuICAgICAgLi4uaXRlbSxcbiAgICAgIHBhcmFtczogbmV4dFBhcmFtc1xuICAgIH0sIC4uLnNpYmxpbmdzLnNsaWNlKHNpYmxpbmdJbmRleCArIDEpXSk7XG4gICAgcmV0dXJuIHJlc29sdmVQYXRoRnJvbVN0YXRlKG5leHRSb3V0ZXJTdGF0ZV8xKTtcbiAgfSwgJFs4XSA9IGNyZWF0ZU5leHRSb3V0ZXJTdGF0ZSwgJFs5XSA9IHJlc29sdmVQYXRoRnJvbVN0YXRlLCAkWzEwXSA9IHNpYmxpbmdJbmRleCwgJFsxMV0gPSB0NCkgOiB0NCA9ICRbMTFdO1xuICBjb25zdCBjcmVhdGVQYXRoV2l0aFBhcmFtcyA9IHQ0O1xuICBsZXQgdDU7XG4gICRbMTJdICE9PSBtb2RpZnlDdXJyZW50R3JvdXAgfHwgJFsxM10gIT09IHNpYmxpbmdJbmRleCA/ICh0NSA9IChuZXh0UGF5bG9hZCkgPT4ge1xuICAgIG1vZGlmeUN1cnJlbnRHcm91cCgoc2libGluZ3NfMCwgaXRlbV8wKSA9PiBbLi4uc2libGluZ3NfMC5zbGljZSgwLCBzaWJsaW5nSW5kZXgpLCB7XG4gICAgICAuLi5pdGVtXzAsXG4gICAgICBwYXlsb2FkOiBuZXh0UGF5bG9hZFxuICAgIH0sIC4uLnNpYmxpbmdzXzAuc2xpY2Uoc2libGluZ0luZGV4ICsgMSldKTtcbiAgfSwgJFsxMl0gPSBtb2RpZnlDdXJyZW50R3JvdXAsICRbMTNdID0gc2libGluZ0luZGV4LCAkWzE0XSA9IHQ1KSA6IHQ1ID0gJFsxNF07XG4gIGNvbnN0IHNldFBheWxvYWQgPSB0NTtcbiAgbGV0IHQ2O1xuICAkWzE1XSAhPT0gbW9kaWZ5Q3VycmVudEdyb3VwIHx8ICRbMTZdICE9PSBzaWJsaW5nSW5kZXggPyAodDYgPSAobmV4dFBhcmFtc18wKSA9PiB7XG4gICAgbW9kaWZ5Q3VycmVudEdyb3VwKChzaWJsaW5nc18xLCBpdGVtXzEpID0+IFsuLi5zaWJsaW5nc18xLnNsaWNlKDAsIHNpYmxpbmdJbmRleCksIHtcbiAgICAgIC4uLml0ZW1fMSxcbiAgICAgIHBhcmFtczogbmV4dFBhcmFtc18wXG4gICAgfSwgLi4uc2libGluZ3NfMS5zbGljZShzaWJsaW5nSW5kZXggKyAxKV0pO1xuICB9LCAkWzE1XSA9IG1vZGlmeUN1cnJlbnRHcm91cCwgJFsxNl0gPSBzaWJsaW5nSW5kZXgsICRbMTddID0gdDYpIDogdDYgPSAkWzE3XTtcbiAgY29uc3Qgc2V0UGFyYW1zID0gdDY7XG4gIGxldCB0NztcbiAgJFsxOF0gIT09IGdyb3VwSW5kZXggfHwgJFsxOV0gIT09IG5hdmlnYXRlIHx8ICRbMjBdICE9PSByb3V0ZXJQYW5lR3JvdXBzID8gKHQ3ID0gKHQ4MikgPT4ge1xuICAgIGNvbnN0IHtcbiAgICAgIGlkLFxuICAgICAgcGFyZW50UmVmUGF0aCxcbiAgICAgIHR5cGUsXG4gICAgICB0ZW1wbGF0ZVxuICAgIH0gPSB0ODI7XG4gICAgbmF2aWdhdGUoe1xuICAgICAgcGFuZXM6IFsuLi5yb3V0ZXJQYW5lR3JvdXBzLnNsaWNlKDAsIGdyb3VwSW5kZXggKyAxKSwgW3tcbiAgICAgICAgaWQsXG4gICAgICAgIHBhcmFtczoge1xuICAgICAgICAgIHRlbXBsYXRlOiB0ZW1wbGF0ZS5pZCxcbiAgICAgICAgICBwYXJlbnRSZWZQYXRoOiB0b1N0cmluZyhwYXJlbnRSZWZQYXRoKSxcbiAgICAgICAgICB0eXBlXG4gICAgICAgIH0sXG4gICAgICAgIHBheWxvYWQ6IHRlbXBsYXRlLnBhcmFtc1xuICAgICAgfV1dXG4gICAgfSk7XG4gIH0sICRbMThdID0gZ3JvdXBJbmRleCwgJFsxOV0gPSBuYXZpZ2F0ZSwgJFsyMF0gPSByb3V0ZXJQYW5lR3JvdXBzLCAkWzIxXSA9IHQ3KSA6IHQ3ID0gJFsyMV07XG4gIGNvbnN0IGhhbmRsZUVkaXRSZWZlcmVuY2UgPSB0NztcbiAgbGV0IHQ4O1xuICBjb25zdCB0OSA9IHJvdXRlclBhbmVHcm91cHNbZ3JvdXBJbmRleF0gPyByb3V0ZXJQYW5lR3JvdXBzW2dyb3VwSW5kZXhdLmxlbmd0aCA+IDEgOiAhMSwgdDEwID0gcm91dGVyUGFuZUdyb3Vwc1tncm91cEluZGV4XSA/IHJvdXRlclBhbmVHcm91cHNbZ3JvdXBJbmRleF0ubGVuZ3RoIDogMCwgdDExID0gZmxhdEluZGV4ID8gQmFja0xpbmsgOiB2b2lkIDA7XG4gIGxldCB0MTIsIHQxMztcbiAgJFsyMl0gIT09IG1vZGlmeUN1cnJlbnRHcm91cCA/ICh0MTIgPSAodDE0MikgPT4ge1xuICAgIGNvbnN0IG9wdHMgPSB0MTQyID09PSB2b2lkIDAgPyB7fSA6IHQxNDI7XG4gICAgbW9kaWZ5Q3VycmVudEdyb3VwKCgpID0+IFt7XG4gICAgICBpZDogb3B0cy5pZCB8fCBcIlwiLFxuICAgICAgcGF5bG9hZDogb3B0cy5wYXlsb2FkLFxuICAgICAgcGFyYW1zOiBvcHRzLnBhcmFtcyB8fCB7fVxuICAgIH1dKTtcbiAgfSwgdDEzID0gKCkgPT4ge1xuICAgIG1vZGlmeUN1cnJlbnRHcm91cChfdGVtcCQ1KTtcbiAgfSwgJFsyMl0gPSBtb2RpZnlDdXJyZW50R3JvdXAsICRbMjNdID0gdDEyLCAkWzI0XSA9IHQxMykgOiAodDEyID0gJFsyM10sIHQxMyA9ICRbMjRdKTtcbiAgbGV0IHQxNDtcbiAgJFsyNV0gIT09IGV4cGFuZCB8fCAkWzI2XSAhPT0gZ3JvdXBJbmRleCB8fCAkWzI3XSAhPT0gbGFzdFBhbmUgfHwgJFsyOF0gIT09IG5hdmlnYXRlIHx8ICRbMjldICE9PSByb3V0ZXJQYW5lR3JvdXBzID8gKHQxNCA9ICh0MTUyKSA9PiB7XG4gICAgKHQxNTIgPT09IHZvaWQgMCB8fCB0MTUyKSAmJiBsYXN0UGFuZSAmJiBleHBhbmQobGFzdFBhbmUuZWxlbWVudCksIG5hdmlnYXRlKHtcbiAgICAgIHBhbmVzOiBbLi4ucm91dGVyUGFuZUdyb3Vwcy5zbGljZSgwLCBncm91cEluZGV4KV1cbiAgICB9KTtcbiAgfSwgJFsyNV0gPSBleHBhbmQsICRbMjZdID0gZ3JvdXBJbmRleCwgJFsyN10gPSBsYXN0UGFuZSwgJFsyOF0gPSBuYXZpZ2F0ZSwgJFsyOV0gPSByb3V0ZXJQYW5lR3JvdXBzLCAkWzMwXSA9IHQxNCkgOiB0MTQgPSAkWzMwXTtcbiAgbGV0IHQxNTtcbiAgJFszMV0gIT09IG1vZGlmeUN1cnJlbnRHcm91cCB8fCAkWzMyXSAhPT0gc2libGluZ0luZGV4ID8gKHQxNSA9IChvcHRpb25zKSA9PiB7XG4gICAgbW9kaWZ5Q3VycmVudEdyb3VwKChzaWJsaW5nc18zLCBpdGVtXzMpID0+IHtcbiAgICAgIGNvbnN0IGR1cGxpY2F0ZWRJdGVtID0ge1xuICAgICAgICAuLi5pdGVtXzMsXG4gICAgICAgIHBheWxvYWQ6IG9wdGlvbnM/LnBheWxvYWQgfHwgaXRlbV8zLnBheWxvYWQsXG4gICAgICAgIHBhcmFtczogb3B0aW9ucz8ucGFyYW1zIHx8IGl0ZW1fMy5wYXJhbXNcbiAgICAgIH07XG4gICAgICByZXR1cm4gWy4uLnNpYmxpbmdzXzMuc2xpY2UoMCwgc2libGluZ0luZGV4KSwgZHVwbGljYXRlZEl0ZW0sIC4uLnNpYmxpbmdzXzMuc2xpY2Uoc2libGluZ0luZGV4KV07XG4gICAgfSk7XG4gIH0sICRbMzFdID0gbW9kaWZ5Q3VycmVudEdyb3VwLCAkWzMyXSA9IHNpYmxpbmdJbmRleCwgJFszM10gPSB0MTUpIDogdDE1ID0gJFszM107XG4gIGxldCB0MTY7XG4gICRbMzRdICE9PSBwYXJhbXMgfHwgJFszNV0gIT09IHNldFBhcmFtcyA/ICh0MTYgPSAodmlld0lkKSA9PiB7XG4gICAgY29uc3QgcmVzdFBhcmFtcyA9IG9taXQocGFyYW1zLCBcInZpZXdcIik7XG4gICAgcmV0dXJuIHNldFBhcmFtcyh2aWV3SWQgPyB7XG4gICAgICAuLi5yZXN0UGFyYW1zLFxuICAgICAgdmlldzogdmlld0lkXG4gICAgfSA6IHJlc3RQYXJhbXMpO1xuICB9LCAkWzM0XSA9IHBhcmFtcywgJFszNV0gPSBzZXRQYXJhbXMsICRbMzZdID0gdDE2KSA6IHQxNiA9ICRbMzZdO1xuICBsZXQgdDE3O1xuICAkWzM3XSAhPT0gY3JlYXRlUGF0aFdpdGhQYXJhbXMgfHwgJFszOF0gIT09IGZsYXRJbmRleCB8fCAkWzM5XSAhPT0gZ3JvdXBJbmRleCB8fCAkWzQwXSAhPT0gaGFuZGxlRWRpdFJlZmVyZW5jZSB8fCAkWzQxXSAhPT0gbmF2aWdhdGVJbnRlbnQgfHwgJFs0Ml0gIT09IHBhcmFtcyB8fCAkWzQzXSAhPT0gcGF5bG9hZCB8fCAkWzQ0XSAhPT0gcm91dGVyUGFuZUdyb3VwcyB8fCAkWzQ1XSAhPT0gc2V0UGFyYW1zIHx8ICRbNDZdICE9PSBzZXRQYXlsb2FkIHx8ICRbNDddICE9PSBzaWJsaW5nSW5kZXggfHwgJFs0OF0gIT09IHQxMCB8fCAkWzQ5XSAhPT0gdDExIHx8ICRbNTBdICE9PSB0MTIgfHwgJFs1MV0gIT09IHQxMyB8fCAkWzUyXSAhPT0gdDE0IHx8ICRbNTNdICE9PSB0MTUgfHwgJFs1NF0gIT09IHQxNiB8fCAkWzU1XSAhPT0gdDkgPyAodDE3ID0ge1xuICAgIGluZGV4OiBmbGF0SW5kZXgsXG4gICAgZ3JvdXBJbmRleCxcbiAgICBzaWJsaW5nSW5kZXgsXG4gICAgcGF5bG9hZCxcbiAgICBwYXJhbXMsXG4gICAgaGFzR3JvdXBTaWJsaW5nczogdDksXG4gICAgZ3JvdXBMZW5ndGg6IHQxMCxcbiAgICByb3V0ZXJQYW5lc1N0YXRlOiByb3V0ZXJQYW5lR3JvdXBzLFxuICAgIENoaWxkTGluayxcbiAgICBCYWNrTGluazogdDExLFxuICAgIFJlZmVyZW5jZUNoaWxkTGluayxcbiAgICBoYW5kbGVFZGl0UmVmZXJlbmNlLFxuICAgIFBhcmFtZXRlcml6ZWRMaW5rLFxuICAgIHJlcGxhY2VDdXJyZW50OiB0MTIsXG4gICAgY2xvc2VDdXJyZW50OiB0MTMsXG4gICAgY2xvc2VDdXJyZW50QW5kQWZ0ZXI6IHQxNCxcbiAgICBkdXBsaWNhdGVDdXJyZW50OiB0MTUsXG4gICAgc2V0VmlldzogdDE2LFxuICAgIHNldFBhcmFtcyxcbiAgICBzZXRQYXlsb2FkLFxuICAgIGNyZWF0ZVBhdGhXaXRoUGFyYW1zLFxuICAgIG5hdmlnYXRlSW50ZW50XG4gIH0sICRbMzddID0gY3JlYXRlUGF0aFdpdGhQYXJhbXMsICRbMzhdID0gZmxhdEluZGV4LCAkWzM5XSA9IGdyb3VwSW5kZXgsICRbNDBdID0gaGFuZGxlRWRpdFJlZmVyZW5jZSwgJFs0MV0gPSBuYXZpZ2F0ZUludGVudCwgJFs0Ml0gPSBwYXJhbXMsICRbNDNdID0gcGF5bG9hZCwgJFs0NF0gPSByb3V0ZXJQYW5lR3JvdXBzLCAkWzQ1XSA9IHNldFBhcmFtcywgJFs0Nl0gPSBzZXRQYXlsb2FkLCAkWzQ3XSA9IHNpYmxpbmdJbmRleCwgJFs0OF0gPSB0MTAsICRbNDldID0gdDExLCAkWzUwXSA9IHQxMiwgJFs1MV0gPSB0MTMsICRbNTJdID0gdDE0LCAkWzUzXSA9IHQxNSwgJFs1NF0gPSB0MTYsICRbNTVdID0gdDksICRbNTZdID0gdDE3KSA6IHQxNyA9ICRbNTZdLCB0OCA9IHQxNztcbiAgY29uc3QgY3R4ID0gdDg7XG4gIGxldCB0MTg7XG4gIHJldHVybiAkWzU3XSAhPT0gY2hpbGRyZW4gfHwgJFs1OF0gIT09IGN0eCA/ICh0MTggPSAvKiBAX19QVVJFX18gKi8ganN4KFBhbmVSb3V0ZXJDb250ZXh0LlByb3ZpZGVyLCB7IHZhbHVlOiBjdHgsIGNoaWxkcmVuIH0pLCAkWzU3XSA9IGNoaWxkcmVuLCAkWzU4XSA9IGN0eCwgJFs1OV0gPSB0MTgpIDogdDE4ID0gJFs1OV0sIHQxODtcbn1cbmZ1bmN0aW9uIF90ZW1wJDUoc2libGluZ3NfMiwgaXRlbV8yKSB7XG4gIHJldHVybiBzaWJsaW5nc18yLmxlbmd0aCA+IDEgPyBzaWJsaW5nc18yLmZpbHRlcigoc2libGluZykgPT4gc2libGluZyAhPT0gaXRlbV8yKSA6IHNpYmxpbmdzXzI7XG59XG5jbGFzcyBQYW5lUmVzb2x1dGlvbkVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3Rvcih7XG4gICAgbWVzc2FnZSxcbiAgICBjb250ZXh0LFxuICAgIGhlbHBJZCxcbiAgICBjYXVzZVxuICB9KSB7XG4gICAgc3VwZXIobWVzc2FnZSksIHRoaXMubmFtZSA9IFwiUGFuZVJlc29sdXRpb25FcnJvclwiLCB0aGlzLmNvbnRleHQgPSBjb250ZXh0LCB0aGlzLmhlbHBJZCA9IGhlbHBJZCwgdGhpcy5jYXVzZSA9IGNhdXNlO1xuICB9XG59XG5jb25zdCByYW5kb21JZENhY2hlID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7XG5mdW5jdGlvbiBhc3NpZ25JZChvYmopIHtcbiAgY29uc3QgY2FjaGVkVmFsdWUgPSByYW5kb21JZENhY2hlLmdldChvYmopO1xuICBpZiAoY2FjaGVkVmFsdWUpIHJldHVybiBjYWNoZWRWYWx1ZTtcbiAgY29uc3QgaWQgPSBuYW5vaWQoKTtcbiAgcmV0dXJuIHJhbmRvbUlkQ2FjaGUuc2V0KG9iaiwgaWQpLCBpZDtcbn1cbmNvbnN0IGlzUHJvbWlzZSA9ICh0aGluZykgPT4gISF0aGluZyAmJiB0eXBlb2YgdGhpbmc/LnRoZW4gPT0gXCJmdW5jdGlvblwiLCBpc1NlcmlhbGl6YWJsZSA9ICh0aGluZykgPT4gaXNSZWNvcmQodGhpbmcpID8gdHlwZW9mIHRoaW5nLnNlcmlhbGl6ZSA9PSBcImZ1bmN0aW9uXCIgOiAhMSwgcmV0aHJvd1dpdGhQYW5lUmVzb2x1dGlvbkVycm9ycyA9IChuZXh0KSA9PiAodW5yZXNvbHZlZFBhbmUsIGNvbnRleHQsIGZsYXRJbmRleCkgPT4ge1xuICB0cnkge1xuICAgIHJldHVybiBuZXh0KHVucmVzb2x2ZWRQYW5lLCBjb250ZXh0LCBmbGF0SW5kZXgpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgdGhyb3cgZSBpbnN0YW5jZW9mIFBhbmVSZXNvbHV0aW9uRXJyb3IgPyBlIDogbmV3IFBhbmVSZXNvbHV0aW9uRXJyb3Ioe1xuICAgICAgbWVzc2FnZTogdHlwZW9mIGU/Lm1lc3NhZ2UgPT0gXCJzdHJpbmdcIiA/IGUubWVzc2FnZSA6IFwiXCIsXG4gICAgICBjb250ZXh0LFxuICAgICAgY2F1c2U6IGVcbiAgICB9KTtcbiAgfVxufSwgd3JhcFdpdGhQdWJsaXNoUmVwbGF5ID0gKG5leHQpID0+ICguLi5hcmdzKSA9PiBuZXh0KC4uLmFyZ3MpLnBpcGUoXG4gIC8vIG5lZWQgdG8gYWRkIHB1Ymxpc2hSZXBsYXkgKyByZWZDb3VudCB0byBlbnN1cmUgbmV3IHN1YnNjcmliZXJzIGFsd2F5c1xuICAvLyBnZXQgYW4gZW1pc3Npb24uIHdpdGhvdXQgdGhpcywgbWVtb2l6ZWQgb2JzZXJ2YWJsZXMgbWF5IGdldCBzdHVja1xuICAvLyB3YWl0aW5nIGZvciB0aGVpciBmaXJzdCBlbWlzc2lvbnMgcmVzdWx0aW5nIGluIGEgbG9hZGluZyBwYW5lXG4gIHB1Ymxpc2hSZXBsYXkoMSksXG4gIHJlZkNvdW50KClcbik7XG5mdW5jdGlvbiBjcmVhdGVQYW5lUmVzb2x2ZXIobWlkZGxld2FyZSkge1xuICBjb25zdCByZXNvbHZlUGFuZSA9IHJldGhyb3dXaXRoUGFuZVJlc29sdXRpb25FcnJvcnMod3JhcFdpdGhQdWJsaXNoUmVwbGF5KG1pZGRsZXdhcmUoKHVucmVzb2x2ZWRQYW5lLCBjb250ZXh0LCBmbGF0SW5kZXgpID0+IHtcbiAgICBpZiAoIXVucmVzb2x2ZWRQYW5lKVxuICAgICAgdGhyb3cgbmV3IFBhbmVSZXNvbHV0aW9uRXJyb3Ioe1xuICAgICAgICBtZXNzYWdlOiBcIlBhbmUgcmV0dXJuZWQgbm8gY2hpbGRcIixcbiAgICAgICAgY29udGV4dCxcbiAgICAgICAgaGVscElkOiBcInN0cnVjdHVyZS1pdGVtLXJldHVybmVkLW5vLWNoaWxkXCJcbiAgICAgIH0pO1xuICAgIHJldHVybiBpc1Byb21pc2UodW5yZXNvbHZlZFBhbmUpIHx8IGlzT2JzZXJ2YWJsZSh1bnJlc29sdmVkUGFuZSkgPyBmcm9tKHVucmVzb2x2ZWRQYW5lKS5waXBlKHN3aXRjaE1hcCgocmVzdWx0KSA9PiByZXNvbHZlUGFuZShyZXN1bHQsIGNvbnRleHQsIGZsYXRJbmRleCkpKSA6IGlzU2VyaWFsaXphYmxlKHVucmVzb2x2ZWRQYW5lKSA/IHJlc29sdmVQYW5lKHVucmVzb2x2ZWRQYW5lLnNlcmlhbGl6ZShjb250ZXh0KSwgY29udGV4dCwgZmxhdEluZGV4KSA6IHR5cGVvZiB1bnJlc29sdmVkUGFuZSA9PSBcImZ1bmN0aW9uXCIgPyByZXNvbHZlUGFuZSh1bnJlc29sdmVkUGFuZShjb250ZXh0LmlkLCBjb250ZXh0KSwgY29udGV4dCwgZmxhdEluZGV4KSA6IG9mKHVucmVzb2x2ZWRQYW5lKTtcbiAgfSkpKTtcbiAgcmV0dXJuIHJlc29sdmVQYW5lO1xufVxuY29uc3QgYmluZENhY2hlID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7XG5mdW5jdGlvbiBtZW1vQmluZChvYmosIG1ldGhvZEtleSkge1xuICBjb25zdCBib3VuZE1ldGhvZHMgPSBiaW5kQ2FjaGUuZ2V0KG9iaikgfHwgLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgaWYgKGJvdW5kTWV0aG9kcykge1xuICAgIGNvbnN0IGJvdW5kMiA9IGJvdW5kTWV0aG9kcy5nZXQobWV0aG9kS2V5KTtcbiAgICBpZiAoYm91bmQyKSByZXR1cm4gYm91bmQyO1xuICB9XG4gIGNvbnN0IG1ldGhvZCA9IG9ialttZXRob2RLZXldO1xuICBpZiAodHlwZW9mIG1ldGhvZCAhPSBcImZ1bmN0aW9uXCIpXG4gICAgdGhyb3cgbmV3IEVycm9yKGBFeHBlY3RlZCBwcm9wZXJ0eSBcXGAke21ldGhvZEtleX1cXGAgdG8gYmUgYSBmdW5jdGlvbiBidXQgZ290ICR7dHlwZW9mIG1ldGhvZH0gaW5zdGVhZC5gKTtcbiAgY29uc3QgYm91bmQgPSBtZXRob2QuYmluZChvYmopO1xuICByZXR1cm4gYm91bmRNZXRob2RzLnNldChtZXRob2RLZXksIGJvdW5kKSwgYmluZENhY2hlLnNldChvYmosIGJvdW5kTWV0aG9kcyksIGJvdW5kO1xufVxuYXN5bmMgZnVuY3Rpb24gcmVzb2x2ZUludGVudChvcHRpb25zKSB7XG4gIGNvbnN0IHJlc29sdmVkUGFuZUNhY2hlID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKSwgcmVzb2x2ZVBhbmUgPSBjcmVhdGVQYW5lUmVzb2x2ZXIoKG5leHRGbikgPT4gKHVucmVzb2x2ZWRQYW5lLCBjb250ZXh0LCBmbGF0SW5kZXgpID0+IHtcbiAgICBjb25zdCBrZXkgPSB1bnJlc29sdmVkUGFuZSAmJiBgJHthc3NpZ25JZCh1bnJlc29sdmVkUGFuZSl9LSR7Y29udGV4dC5wYXRoLmpvaW4oXCJfX1wiKX1gLCBjYWNoZWRSZXNvbHZlZFBhbmUgPSBrZXkgJiYgcmVzb2x2ZWRQYW5lQ2FjaGUuZ2V0KGtleSk7XG4gICAgaWYgKGNhY2hlZFJlc29sdmVkUGFuZSkgcmV0dXJuIGNhY2hlZFJlc29sdmVkUGFuZTtcbiAgICBjb25zdCByZXN1bHQgPSBuZXh0Rm4odW5yZXNvbHZlZFBhbmUsIGNvbnRleHQsIGZsYXRJbmRleCk7XG4gICAgcmV0dXJuIGtleSAmJiByZXNvbHZlZFBhbmVDYWNoZS5zZXQoa2V5LCByZXN1bHQpLCByZXN1bHQ7XG4gIH0pLCBmYWxsYmFja0VkaXRvclBhbmVzID0gW1t7XG4gICAgaWQ6IGBfX2VkaXRfXyR7b3B0aW9ucy5wYXJhbXMuaWR9YCxcbiAgICBwYXJhbXM6IHtcbiAgICAgIC4uLm9taXQob3B0aW9ucy5wYXJhbXMsIFtcImlkXCJdKSxcbiAgICAgIHR5cGU6IG9wdGlvbnMucGFyYW1zLnR5cGVcbiAgICB9LFxuICAgIHBheWxvYWQ6IG9wdGlvbnMucGF5bG9hZFxuICB9XV07XG4gIGFzeW5jIGZ1bmN0aW9uIHRyYXZlcnNlKHtcbiAgICBjdXJyZW50SWQsXG4gICAgZmxhdEluZGV4LFxuICAgIGludGVudCxcbiAgICBwYXJhbXMsXG4gICAgcGFyZW50OiBwYXJlbnQyLFxuICAgIHBhdGgsXG4gICAgcGF5bG9hZCxcbiAgICB1bnJlc29sdmVkUGFuZSxcbiAgICBsZXZlbEluZGV4LFxuICAgIHN0cnVjdHVyZUNvbnRleHRcbiAgfSkge1xuICAgIGlmICghdW5yZXNvbHZlZFBhbmUpIHJldHVybiBbXTtcbiAgICBjb25zdCB7XG4gICAgICBpZDogdGFyZ2V0SWQsXG4gICAgICB0eXBlOiBzY2hlbWFUeXBlTmFtZSxcbiAgICAgIC4uLm90aGVyUGFyYW1zXG4gICAgfSA9IHBhcmFtcywgcmVzb2x2ZWRQYW5lID0gYXdhaXQgZmlyc3RWYWx1ZUZyb20ocmVzb2x2ZVBhbmUodW5yZXNvbHZlZFBhbmUsIHtcbiAgICAgIGlkOiBjdXJyZW50SWQsXG4gICAgICBzcGxpdEluZGV4OiAwLFxuICAgICAgcGFyZW50OiBwYXJlbnQyLFxuICAgICAgcGF0aCxcbiAgICAgIGluZGV4OiBmbGF0SW5kZXgsXG4gICAgICBwYXJhbXM6IHt9LFxuICAgICAgcGF5bG9hZDogdm9pZCAwLFxuICAgICAgc3RydWN0dXJlQ29udGV4dFxuICAgIH0sIGZsYXRJbmRleCkpO1xuICAgIHJldHVybiByZXNvbHZlZFBhbmUudHlwZSA9PT0gXCJkb2N1bWVudFwiICYmIHJlc29sdmVkUGFuZS5pZCA9PT0gdGFyZ2V0SWQgPyBbe1xuICAgICAgcGFuZXM6IFsuLi5wYXRoLnNsaWNlKDAsIHBhdGgubGVuZ3RoIC0gMSkubWFwKChpKSA9PiBbe1xuICAgICAgICBpZDogaVxuICAgICAgfV0pLCBbe1xuICAgICAgICBpZDogdGFyZ2V0SWQsXG4gICAgICAgIHBhcmFtczogb3RoZXJQYXJhbXMsXG4gICAgICAgIHBheWxvYWRcbiAgICAgIH1dXSxcbiAgICAgIGRlcHRoSW5kZXg6IHBhdGgubGVuZ3RoLFxuICAgICAgbGV2ZWxJbmRleFxuICAgIH1dIDogKFxuICAgICAgLy8gaWYgdGhlIHJlc29sdmUgcGFuZSdzIGBjYW5IYW5kbGVJbnRlbnRgIHJldHVybnMgdHJ1ZSwgdGhlbiByZXNvbHZlXG4gICAgICByZXNvbHZlZFBhbmUuY2FuSGFuZGxlSW50ZW50Py4oaW50ZW50LCBwYXJhbXMsIHtcbiAgICAgICAgcGFuZTogcmVzb2x2ZWRQYW5lLFxuICAgICAgICBpbmRleDogZmxhdEluZGV4XG4gICAgICB9KSB8fCAvLyBpZiB0aGUgcGFuZSdzIGBjYW5IYW5kbGVJbnRlbnRgIGRpZCBub3QgcmV0dXJuIHRydWUsIHRoZW4gbWF0Y2ggYWdhaW5zdFxuICAgICAgLy8gdGhpcyBkZWZhdWx0IGNhc2UuIHdlIHdpbGwgcmVzb2x2ZSB0aGUgaW50ZW50IGlmOlxuICAgICAgcmVzb2x2ZWRQYW5lLnR5cGUgPT09IFwiZG9jdW1lbnRMaXN0XCIgJiYgLy8gMS4gdGhlIHNjaGVtYSB0eXBlIG1hdGNoZXMgKHRoaXMgcmVxdWlyZWQgZm9yIHRoZSBkb2N1bWVudCB0byByZW5kZXIpXG4gICAgICByZXNvbHZlZFBhbmUuc2NoZW1hVHlwZU5hbWUgPT09IHNjaGVtYVR5cGVOYW1lICYmIC8vIDIuIHRoZSBmaWx0ZXIgaXMgdGhlIGRlZmF1bHQgZmlsdGVyLlxuICAgICAgLy9cbiAgICAgIC8vIE5PVEU6IHRoaXMgY2FzZSBpcyB0byBwcmV2ZW50IGZhbHNlIHBvc2l0aXZlIG1hdGNoZXMgd2hlcmUgdGhlIHVzZXJcbiAgICAgIC8vIGhhcyBjb25maWd1cmVkIGEgbW9yZSBzcGVjaWZpYyBmaWx0ZXIgZm9yIGEgcGFydGljdWxhciB0eXBlLiBJbiB0aGF0XG4gICAgICAvLyBjYXNlLCB0aGUgdXNlciBjYW4gaW1wbGVtZW50IHRoZWlyIG93biBgY2FuSGFuZGxlSW50ZW50YCBmdW5jdGlvblxuICAgICAgcmVzb2x2ZWRQYW5lLm9wdGlvbnMuZmlsdGVyID09PSBcIl90eXBlID09ICR0eXBlXCIgPyBbe1xuICAgICAgICBwYW5lczogW1xuICAgICAgICAgIC8vIG1hcCB0aGUgY3VycmVudCBwYXRoIHRvIHJvdXRlciBwYW5lc1xuICAgICAgICAgIC4uLnBhdGgubWFwKChpZCkgPT4gW3tcbiAgICAgICAgICAgIGlkXG4gICAgICAgICAgfV0pLFxuICAgICAgICAgIC8vIHRoZW4gYXVnbWVudCB3aXRoIHRoZSBpbnRlbnRzIElEcyBhbmQgcGFyYW1zXG4gICAgICAgICAgW3tcbiAgICAgICAgICAgIGlkOiBwYXJhbXMuaWQsXG4gICAgICAgICAgICBwYXJhbXM6IG90aGVyUGFyYW1zLFxuICAgICAgICAgICAgcGF5bG9hZFxuICAgICAgICAgIH1dXG4gICAgICAgIF0sXG4gICAgICAgIGRlcHRoSW5kZXg6IHBhdGgubGVuZ3RoLFxuICAgICAgICBsZXZlbEluZGV4XG4gICAgICB9XSA6IHJlc29sdmVkUGFuZS50eXBlID09PSBcImxpc3RcIiAmJiByZXNvbHZlZFBhbmUuY2hpbGQgJiYgcmVzb2x2ZWRQYW5lLml0ZW1zID8gKGF3YWl0IFByb21pc2UuYWxsKHJlc29sdmVkUGFuZS5pdGVtcy5tYXAoKGl0ZW0sIG5leHRMZXZlbEluZGV4KSA9PiBpdGVtLnR5cGUgPT09IFwiZGl2aWRlclwiID8gUHJvbWlzZS5yZXNvbHZlKFtdKSA6IHRyYXZlcnNlKHtcbiAgICAgICAgY3VycmVudElkOiBpdGVtLl9pZCB8fCBpdGVtLmlkLFxuICAgICAgICBmbGF0SW5kZXg6IGZsYXRJbmRleCArIDEsXG4gICAgICAgIGludGVudCxcbiAgICAgICAgcGFyYW1zLFxuICAgICAgICBwYXJlbnQ6IHJlc29sdmVkUGFuZSxcbiAgICAgICAgcGF0aDogWy4uLnBhdGgsIGl0ZW0uaWRdLFxuICAgICAgICBwYXlsb2FkLFxuICAgICAgICB1bnJlc29sdmVkUGFuZTogdHlwZW9mIHJlc29sdmVkUGFuZS5jaGlsZCA9PSBcImZ1bmN0aW9uXCIgPyBtZW1vQmluZChyZXNvbHZlZFBhbmUsIFwiY2hpbGRcIikgOiByZXNvbHZlZFBhbmUuY2hpbGQsXG4gICAgICAgIGxldmVsSW5kZXg6IG5leHRMZXZlbEluZGV4LFxuICAgICAgICBzdHJ1Y3R1cmVDb250ZXh0XG4gICAgICB9KSkpKS5mbGF0KCkgOiBbXVxuICAgICk7XG4gIH1cbiAgY29uc3QgY2xvc2VzdFBhbmVUb1Jvb3QgPSAoYXdhaXQgdHJhdmVyc2Uoe1xuICAgIGN1cnJlbnRJZDogXCJyb290XCIsXG4gICAgZmxhdEluZGV4OiAwLFxuICAgIGxldmVsSW5kZXg6IDAsXG4gICAgaW50ZW50OiBvcHRpb25zLmludGVudCxcbiAgICBwYXJhbXM6IG9wdGlvbnMucGFyYW1zLFxuICAgIHBhcmVudDogbnVsbCxcbiAgICBwYXRoOiBbXSxcbiAgICBwYXlsb2FkOiBvcHRpb25zLnBheWxvYWQsXG4gICAgdW5yZXNvbHZlZFBhbmU6IG9wdGlvbnMucm9vdFBhbmVOb2RlLFxuICAgIHN0cnVjdHVyZUNvbnRleHQ6IG9wdGlvbnMuc3RydWN0dXJlQ29udGV4dFxuICB9KSkuc29ydCgoYSwgYikgPT4gYS5kZXB0aEluZGV4ID09PSBiLmRlcHRoSW5kZXggPyBhLmxldmVsSW5kZXggLSBiLmxldmVsSW5kZXggOiBhLmRlcHRoSW5kZXggLSBiLmRlcHRoSW5kZXgpWzBdO1xuICByZXR1cm4gY2xvc2VzdFBhbmVUb1Jvb3QgPyBjbG9zZXN0UGFuZVRvUm9vdC5wYW5lcyA6IGZhbGxiYWNrRWRpdG9yUGFuZXM7XG59XG5jb25zdCBmYWxsYmFja0VkaXRvckNoaWxkID0gKG5vZGVJZCwgY29udGV4dCkgPT4ge1xuICBjb25zdCBpZCA9IG5vZGVJZC5yZXBsYWNlKC9eX19lZGl0X18vLCBcIlwiKSwge1xuICAgIHBhcmFtcyxcbiAgICBwYXlsb2FkLFxuICAgIHN0cnVjdHVyZUNvbnRleHQ6IHtcbiAgICAgIHJlc29sdmVEb2N1bWVudE5vZGVcbiAgICB9XG4gIH0gPSBjb250ZXh0LCB7XG4gICAgdHlwZSxcbiAgICB0ZW1wbGF0ZVxuICB9ID0gcGFyYW1zO1xuICBpZiAoIXR5cGUpXG4gICAgdGhyb3cgbmV3IEVycm9yKGBEb2N1bWVudCB0eXBlIGZvciBkb2N1bWVudCB3aXRoIElEICR7aWR9IHdhcyBub3QgcHJvdmlkZWQgaW4gdGhlIHJvdXRlciBwYXJhbXMuYCk7XG4gIGxldCBkZWZhdWx0RG9jdW1lbnRCdWlsZGVyID0gcmVzb2x2ZURvY3VtZW50Tm9kZSh7XG4gICAgc2NoZW1hVHlwZTogdHlwZSxcbiAgICBkb2N1bWVudElkOiBpZFxuICB9KS5pZChcImVkaXRvclwiKTtcbiAgcmV0dXJuIHRlbXBsYXRlICYmIChkZWZhdWx0RG9jdW1lbnRCdWlsZGVyID0gZGVmYXVsdERvY3VtZW50QnVpbGRlci5pbml0aWFsVmFsdWVUZW1wbGF0ZSh0ZW1wbGF0ZSwgcGF5bG9hZCkpLCBkZWZhdWx0RG9jdW1lbnRCdWlsZGVyLnNlcmlhbGl6ZSgpO1xufTtcbmZ1bmN0aW9uIGhhc2hDb250ZXh0KGNvbnRleHQpIHtcbiAgcmV0dXJuIGBjb250ZXh0SGFzaCgke0pTT04uc3RyaW5naWZ5KHtcbiAgICBpZDogY29udGV4dC5pZCxcbiAgICBwYXJlbnRJZDogcGFyZW50ICYmIGFzc2lnbklkKHBhcmVudCksXG4gICAgcGF0aDogY29udGV4dC5wYXRoLFxuICAgIGluZGV4OiBjb250ZXh0LmluZGV4LFxuICAgIHNwbGl0SW5kZXg6IGNvbnRleHQuc3BsaXRJbmRleCxcbiAgICBzZXJpYWxpemVPcHRpb25zSW5kZXg6IGNvbnRleHQuc2VyaWFsaXplT3B0aW9ucz8uaW5kZXgsXG4gICAgc2VyaWFsaXplT3B0aW9uc1BhdGg6IGNvbnRleHQuc2VyaWFsaXplT3B0aW9ucz8ucGF0aFxuICB9KX0pYDtcbn1cbmNvbnN0IGhhc2hSZXNvbHZlZFBhbmVNZXRhID0gKG1ldGEpID0+IHtcbiAgY29uc3Qgbm9ybWFsaXplZCA9IHtcbiAgICB0eXBlOiBtZXRhLnR5cGUsXG4gICAgaWQ6IG1ldGEucm91dGVyUGFuZVNpYmxpbmcuaWQsXG4gICAgcGFyYW1zOiBtZXRhLnJvdXRlclBhbmVTaWJsaW5nLnBhcmFtcyB8fCB7fSxcbiAgICBwYXlsb2FkOiBtZXRhLnJvdXRlclBhbmVTaWJsaW5nLnBheWxvYWQgfHwgbnVsbCxcbiAgICBmbGF0SW5kZXg6IG1ldGEuZmxhdEluZGV4LFxuICAgIGdyb3VwSW5kZXg6IG1ldGEuZ3JvdXBJbmRleCxcbiAgICBzaWJsaW5nSW5kZXg6IG1ldGEuc2libGluZ0luZGV4LFxuICAgIHBhdGg6IG1ldGEucGF0aCxcbiAgICBwYW5lTm9kZTogbWV0YS50eXBlID09PSBcInJlc29sdmVkTWV0YVwiID8gYXNzaWduSWQobWV0YS5wYW5lTm9kZSkgOiBudWxsXG4gIH07XG4gIHJldHVybiBgbWV0YUhhc2goJHtKU09OLnN0cmluZ2lmeShub3JtYWxpemVkKX0pYDtcbn07XG5mdW5jdGlvbiByZXNvbHZlUGFuZVRyZWUoe1xuICB1bnJlc29sdmVkUGFuZSxcbiAgZmxhdHRlbmVkUm91dGVyUGFuZXMsXG4gIHBhcmVudDogcGFyZW50MixcbiAgcGF0aCxcbiAgcmVzb2x2ZVBhbmUsXG4gIHN0cnVjdHVyZUNvbnRleHRcbn0pIHtcbiAgY29uc3QgW2N1cnJlbnQsIC4uLnJlc3RdID0gZmxhdHRlbmVkUm91dGVyUGFuZXMsIG5leHQgPSByZXN0WzBdLCBjb250ZXh0ID0ge1xuICAgIGlkOiBjdXJyZW50LnJvdXRlclBhbmVTaWJsaW5nLmlkLFxuICAgIHNwbGl0SW5kZXg6IGN1cnJlbnQuc2libGluZ0luZGV4LFxuICAgIHBhcmVudDogcGFyZW50MixcbiAgICBwYXRoOiBbLi4ucGF0aCwgY3VycmVudC5yb3V0ZXJQYW5lU2libGluZy5pZF0sXG4gICAgaW5kZXg6IGN1cnJlbnQuZmxhdEluZGV4LFxuICAgIHBhcmFtczogY3VycmVudC5yb3V0ZXJQYW5lU2libGluZy5wYXJhbXMgfHwge30sXG4gICAgcGF5bG9hZDogY3VycmVudC5yb3V0ZXJQYW5lU2libGluZy5wYXlsb2FkLFxuICAgIHN0cnVjdHVyZUNvbnRleHRcbiAgfTtcbiAgdHJ5IHtcbiAgICByZXR1cm4gcmVzb2x2ZVBhbmUodW5yZXNvbHZlZFBhbmUsIGNvbnRleHQsIGN1cnJlbnQuZmxhdEluZGV4KS5waXBlKFxuICAgICAgLy8gdGhpcyBzd2l0Y2ggbWFwIHJlY2VpdmVzIGEgcmVzb2x2ZWQgcGFuZVxuICAgICAgc3dpdGNoTWFwKChwYW5lTm9kZSkgPT4ge1xuICAgICAgICBjb25zdCByZXNvbHZlZFBhbmVNZXRhID0ge1xuICAgICAgICAgIHR5cGU6IFwicmVzb2x2ZWRNZXRhXCIsXG4gICAgICAgICAgLi4uY3VycmVudCxcbiAgICAgICAgICBwYW5lTm9kZSxcbiAgICAgICAgICBwYXRoOiBjb250ZXh0LnBhdGhcbiAgICAgICAgfSwgbG9hZGluZ1BhbmVzID0gcmVzdC5tYXAoKGksIHJlc3RJbmRleCkgPT4gKHtcbiAgICAgICAgICB0eXBlOiBcImxvYWRpbmdcIixcbiAgICAgICAgICBwYXRoOiBbLi4uY29udGV4dC5wYXRoLCAuLi5yZXN0LnNsaWNlKHJlc3RJbmRleCkubWFwKChfLCBjdXJyZW50SW5kZXgpID0+IGBbJHtpLmZsYXRJbmRleCArIGN1cnJlbnRJbmRleH1dYCldLFxuICAgICAgICAgIHBhbmVOb2RlOiBudWxsLFxuICAgICAgICAgIC4uLmlcbiAgICAgICAgfSkpO1xuICAgICAgICBpZiAoIXJlc3QubGVuZ3RoKVxuICAgICAgICAgIHJldHVybiBvZihbcmVzb2x2ZWRQYW5lTWV0YV0pO1xuICAgICAgICBsZXQgbmV4dFN0cmVhbTtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAvKiB0aGUgZmFsbGJhY2sgZWRpdG9yIGNhc2UgKi9cbiAgICAgICAgICBuZXh0Py5yb3V0ZXJQYW5lU2libGluZy5pZC5zdGFydHNXaXRoKFwiX19lZGl0X19cIikgPyBuZXh0U3RyZWFtID0gcmVzb2x2ZVBhbmVUcmVlKHtcbiAgICAgICAgICAgIHVucmVzb2x2ZWRQYW5lOiBmYWxsYmFja0VkaXRvckNoaWxkLFxuICAgICAgICAgICAgZmxhdHRlbmVkUm91dGVyUGFuZXM6IHJlc3QsXG4gICAgICAgICAgICBwYXJlbnQ6IHBhcmVudDIsXG4gICAgICAgICAgICBwYXRoOiBjb250ZXh0LnBhdGgsXG4gICAgICAgICAgICByZXNvbHZlUGFuZSxcbiAgICAgICAgICAgIHN0cnVjdHVyZUNvbnRleHRcbiAgICAgICAgICB9KSA6IGN1cnJlbnQuZ3JvdXBJbmRleCA9PT0gbmV4dD8uZ3JvdXBJbmRleCA/IG5leHRTdHJlYW0gPSByZXNvbHZlUGFuZVRyZWUoe1xuICAgICAgICAgICAgdW5yZXNvbHZlZFBhbmUsXG4gICAgICAgICAgICBmbGF0dGVuZWRSb3V0ZXJQYW5lczogcmVzdCxcbiAgICAgICAgICAgIHBhcmVudDogcGFyZW50MixcbiAgICAgICAgICAgIHBhdGgsXG4gICAgICAgICAgICByZXNvbHZlUGFuZSxcbiAgICAgICAgICAgIHN0cnVjdHVyZUNvbnRleHRcbiAgICAgICAgICB9KSA6IG5leHRTdHJlYW0gPSByZXNvbHZlUGFuZVRyZWUoe1xuICAgICAgICAgICAgdW5yZXNvbHZlZFBhbmU6IHR5cGVvZiBwYW5lTm9kZS5jaGlsZCA9PSBcImZ1bmN0aW9uXCIgPyBtZW1vQmluZChwYW5lTm9kZSwgXCJjaGlsZFwiKSA6IHBhbmVOb2RlLmNoaWxkLFxuICAgICAgICAgICAgZmxhdHRlbmVkUm91dGVyUGFuZXM6IHJlc3QsXG4gICAgICAgICAgICBwYXJlbnQ6IHBhbmVOb2RlLFxuICAgICAgICAgICAgcGF0aDogY29udGV4dC5wYXRoLFxuICAgICAgICAgICAgcmVzb2x2ZVBhbmUsXG4gICAgICAgICAgICBzdHJ1Y3R1cmVDb250ZXh0XG4gICAgICAgICAgfSksIGNvbmNhdChcbiAgICAgICAgICAgIC8vIHdlIGVtaXQgdGhlIGxvYWRpbmcgcGFuZXMgZmlyc3QgaW4gYSBjb25jYXQgKHRoaXMgZW1pdHMgaW1tZWRpYXRlbHkpXG4gICAgICAgICAgICBvZihbcmVzb2x2ZWRQYW5lTWV0YSwgLi4ubG9hZGluZ1BhbmVzXSksXG4gICAgICAgICAgICAvLyB0aGVuIHdoZW5ldmVyIHRoZSBuZXh0IHN0cmVhbSBpcyBkb25lLCB0aGUgcmVzdWx0cyB3aWxsIGJlIGNvbWJpbmVkLlxuICAgICAgICAgICAgbmV4dFN0cmVhbS5waXBlKG1hcCgobmV4dFJlc29sdmVkUGFuZXMpID0+IFtyZXNvbHZlZFBhbmVNZXRhLCAuLi5uZXh0UmVzb2x2ZWRQYW5lc10pKVxuICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICAgIH0pXG4gICAgKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGlmIChlIGluc3RhbmNlb2YgUGFuZVJlc29sdXRpb25FcnJvciAmJiAoZS5jb250ZXh0ICYmIGNvbnNvbGUud2FybihgUGFuZSByZXNvbHV0aW9uIGVycm9yIGF0IGluZGV4ICR7ZS5jb250ZXh0LmluZGV4fSR7ZS5jb250ZXh0LnNwbGl0SW5kZXggPiAwID8gYCBmb3Igc3BsaXQgcGFuZSBpbmRleCAke2UuY29udGV4dC5zcGxpdEluZGV4fWAgOiBcIlwifTogJHtlLm1lc3NhZ2V9JHtlLmhlbHBJZCA/IGAgLSBzZWUgJHtnZW5lcmF0ZUhlbHBVcmwoZS5oZWxwSWQpfWAgOiBcIlwifWAsIGUpLCBlLmhlbHBJZCA9PT0gXCJzdHJ1Y3R1cmUtaXRlbS1yZXR1cm5lZC1uby1jaGlsZFwiKSlcbiAgICAgIHJldHVybiBvZihbXSk7XG4gICAgdGhyb3cgZTtcbiAgfVxufVxuZnVuY3Rpb24gY3JlYXRlUmVzb2x2ZWRQYW5lTm9kZVN0cmVhbSh7XG4gIHJvdXRlclBhbmVzU3RyZWFtLFxuICByb290UGFuZU5vZGUsXG4gIGluaXRpYWxDYWNoZVN0YXRlID0ge1xuICAgIGNhY2hlS2V5c0J5RmxhdEluZGV4OiBbXSxcbiAgICBmbGF0dGVuZWRSb3V0ZXJQYW5lczogW10sXG4gICAgcmVzb2x2ZWRQYW5lQ2FjaGU6IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCksXG4gICAgcmVzb2x2ZVBhbmU6ICgpID0+IE5FVkVSXG4gIH0sXG4gIHN0cnVjdHVyZUNvbnRleHRcbn0pIHtcbiAgcmV0dXJuIHJvdXRlclBhbmVzU3RyZWFtLnBpcGUoXG4gICAgLy8gYWRkIGluIGltcGxpY2l0IFwicm9vdFwiIHJvdXRlciBwYW5lXG4gICAgbWFwKChyYXdSb3V0ZXJQYW5lcykgPT4gW1t7XG4gICAgICBpZDogXCJyb290XCJcbiAgICB9XSwgLi4ucmF3Um91dGVyUGFuZXNdKSxcbiAgICAvLyBjcmVhdGUgZmxhdHRlbmVkIHJvdXRlciBwYW5lc1xuICAgIG1hcCgocm91dGVyUGFuZXMpID0+IHJvdXRlclBhbmVzLmZsYXRNYXAoKHJvdXRlclBhbmVHcm91cCwgZ3JvdXBJbmRleCkgPT4gcm91dGVyUGFuZUdyb3VwLm1hcCgocm91dGVyUGFuZVNpYmxpbmcsIHNpYmxpbmdJbmRleCkgPT4gKHtcbiAgICAgIHJvdXRlclBhbmVTaWJsaW5nLFxuICAgICAgZ3JvdXBJbmRleCxcbiAgICAgIHNpYmxpbmdJbmRleFxuICAgIH0pKSkubWFwKChpLCBpbmRleCkgPT4gKHtcbiAgICAgIC4uLmksXG4gICAgICBmbGF0SW5kZXg6IGluZGV4XG4gICAgfSkpKSxcbiAgICAvLyBjYWxjdWxhdGUgYSBcImRpZmZJbmRleFwiIHVzZWQgZm9yIGNsZWFyaW5nIHRoZSBtZW1vIGNhY2hlXG4gICAgc3RhcnRXaXRoKFtdKSxcbiAgICBwYWlyd2lzZSgpLFxuICAgIG1hcCgoW3ByZXYsIGN1cnJdKSA9PiB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGN1cnIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgcHJldlZhbHVlID0gcHJldltpXSwgY3VyclZhbHVlID0gY3VycltpXTtcbiAgICAgICAgaWYgKCFpc0VxdWFsKHByZXZWYWx1ZSwgY3VyclZhbHVlKSlcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZmxhdHRlbmVkUm91dGVyUGFuZXM6IGN1cnIsXG4gICAgICAgICAgICBkaWZmSW5kZXg6IGlcbiAgICAgICAgICB9O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZmxhdHRlbmVkUm91dGVyUGFuZXM6IGN1cnIsXG4gICAgICAgIGRpZmZJbmRleDogY3Vyci5sZW5ndGhcbiAgICAgIH07XG4gICAgfSksXG4gICAgLy8gY3JlYXRlIHRoZSBtZW1vaXplZCBgcmVzb2x2ZVBhbmVgIGZ1bmN0aW9uIGFuZCBtYW5hZ2UgdGhlIG1lbW8gY2FjaGVcbiAgICBzY2FuKChhY2MsIG5leHQpID0+IHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgY2FjaGVLZXlzQnlGbGF0SW5kZXgsXG4gICAgICAgIHJlc29sdmVkUGFuZUNhY2hlXG4gICAgICB9ID0gYWNjLCB7XG4gICAgICAgIGZsYXR0ZW5lZFJvdXRlclBhbmVzLFxuICAgICAgICBkaWZmSW5kZXhcbiAgICAgIH0gPSBuZXh0LCBiZWZvcmVEaWZmSW5kZXggPSBjYWNoZUtleXNCeUZsYXRJbmRleC5zbGljZSgwLCBkaWZmSW5kZXggKyAxKSwgYWZ0ZXJEaWZmSW5kZXggPSBjYWNoZUtleXNCeUZsYXRJbmRleC5zbGljZShkaWZmSW5kZXggKyAxKSwga2V5c1RvS2VlcCA9IG5ldyBTZXQoYmVmb3JlRGlmZkluZGV4LmZsYXRNYXAoKGtleVNldCkgPT4gQXJyYXkuZnJvbShrZXlTZXQpKSksIGtleXNUb0RlbGV0ZSA9IGFmdGVyRGlmZkluZGV4LmZsYXRNYXAoKGtleVNldCkgPT4gQXJyYXkuZnJvbShrZXlTZXQpKS5maWx0ZXIoKGtleSkgPT4gIWtleXNUb0tlZXAuaGFzKGtleSkpO1xuICAgICAgZm9yIChjb25zdCBrZXkgb2Yga2V5c1RvRGVsZXRlKVxuICAgICAgICByZXNvbHZlZFBhbmVDYWNoZS5kZWxldGUoa2V5KTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGZsYXR0ZW5lZFJvdXRlclBhbmVzLFxuICAgICAgICBjYWNoZUtleXNCeUZsYXRJbmRleCxcbiAgICAgICAgcmVzb2x2ZWRQYW5lQ2FjaGUsXG4gICAgICAgIHJlc29sdmVQYW5lOiBjcmVhdGVQYW5lUmVzb2x2ZXIoKG5leHRGbikgPT4gKHVucmVzb2x2ZWRQYW5lLCBjb250ZXh0LCBmbGF0SW5kZXgpID0+IHtcbiAgICAgICAgICBjb25zdCBrZXkgPSB1bnJlc29sdmVkUGFuZSAmJiBgJHthc3NpZ25JZCh1bnJlc29sdmVkUGFuZSl9LSR7aGFzaENvbnRleHQoY29udGV4dCl9YCwgY2FjaGVkUmVzb2x2ZWRQYW5lID0ga2V5ICYmIHJlc29sdmVkUGFuZUNhY2hlLmdldChrZXkpO1xuICAgICAgICAgIGlmIChjYWNoZWRSZXNvbHZlZFBhbmUpIHJldHVybiBjYWNoZWRSZXNvbHZlZFBhbmU7XG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV4dEZuKHVucmVzb2x2ZWRQYW5lLCBjb250ZXh0LCBmbGF0SW5kZXgpO1xuICAgICAgICAgIGlmICgha2V5KSByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgIGNvbnN0IGNhY2hlS2V5U2V0ID0gY2FjaGVLZXlzQnlGbGF0SW5kZXhbZmxhdEluZGV4XSB8fCAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICAgICAgICAgIHJldHVybiBjYWNoZUtleVNldC5hZGQoa2V5KSwgY2FjaGVLZXlzQnlGbGF0SW5kZXhbZmxhdEluZGV4XSA9IGNhY2hlS2V5U2V0LCByZXNvbHZlZFBhbmVDYWNoZS5zZXQoa2V5LCByZXN1bHQpLCByZXN1bHQ7XG4gICAgICAgIH0pXG4gICAgICB9O1xuICAgIH0sIGluaXRpYWxDYWNoZVN0YXRlKSxcbiAgICAvLyBydW4gdGhlIG1lbW9pemVkLCByZWN1cnNpdmUgcmVzb2x2aW5nXG4gICAgc3dpdGNoTWFwKCh7XG4gICAgICBmbGF0dGVuZWRSb3V0ZXJQYW5lcyxcbiAgICAgIHJlc29sdmVQYW5lXG4gICAgfSkgPT4gcmVzb2x2ZVBhbmVUcmVlKHtcbiAgICAgIHVucmVzb2x2ZWRQYW5lOiByb290UGFuZU5vZGUsXG4gICAgICBmbGF0dGVuZWRSb3V0ZXJQYW5lcyxcbiAgICAgIHBhcmVudDogbnVsbCxcbiAgICAgIHBhdGg6IFtdLFxuICAgICAgcmVzb2x2ZVBhbmUsXG4gICAgICBzdHJ1Y3R1cmVDb250ZXh0XG4gICAgfSkpXG4gICkucGlwZShcbiAgICAvLyB0aGlzIGRpZmZzIHRoZSBwcmV2aW91cyBlbWlzc2lvbiB3aXRoIHRoZSBjdXJyZW50IG9uZS4gaWYgdGhlcmUgaXMgYSBuZXdcbiAgICAvLyBsb2FkaW5nIHBhbmUgYXQgdGhlIHNhbWUgcG9zaXRpb24gd2hlcmUgYSBwcmV2aW91cyBwYW5lIGFscmVhZHkgaGFkIGFcbiAgICAvLyByZXNvbHZlZCB2YWx1ZSAobG9va2luZyBhdCB0aGUgSURzIHRvIGNvbXBhcmUpLCB0aGVuIHJldHVybiB0aGUgcHJldmlvdXNcbiAgICAvLyBwYW5lIGluc3RlYWQgb2YgdGhlIGxvYWRpbmcgcGFuZVxuICAgIHNjYW4oKHByZXYsIG5leHQpID0+IG5leHQubWFwKChuZXh0UGFuZSwgaW5kZXgpID0+IHtcbiAgICAgIGNvbnN0IHByZXZQYW5lID0gcHJldltpbmRleF07XG4gICAgICByZXR1cm4gIXByZXZQYW5lIHx8IG5leHRQYW5lLnR5cGUgIT09IFwibG9hZGluZ1wiID8gbmV4dFBhbmUgOiBwcmV2UGFuZS5yb3V0ZXJQYW5lU2libGluZy5pZCA9PT0gbmV4dFBhbmUucm91dGVyUGFuZVNpYmxpbmcuaWQgPyBwcmV2UGFuZSA6IG5leHRQYW5lO1xuICAgIH0pLCBbXSksXG4gICAgLy8gdGhpcyBwcmV2ZW50cyBkdXBsaWNhdGUgZW1pc3Npb25zXG4gICAgZGlzdGluY3RVbnRpbENoYW5nZWQoKHByZXYsIG5leHQpID0+IHtcbiAgICAgIGlmIChwcmV2Lmxlbmd0aCAhPT0gbmV4dC5sZW5ndGgpIHJldHVybiAhMTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmV4dC5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBwcmV2VmFsdWUgPSBwcmV2W2ldLCBuZXh0VmFsdWUgPSBuZXh0W2ldO1xuICAgICAgICBpZiAoaGFzaFJlc29sdmVkUGFuZU1ldGEocHJldlZhbHVlKSAhPT0gaGFzaFJlc29sdmVkUGFuZU1ldGEobmV4dFZhbHVlKSlcbiAgICAgICAgICByZXR1cm4gITE7XG4gICAgICB9XG4gICAgICByZXR1cm4gITA7XG4gICAgfSlcbiAgKTtcbn1cbmZ1bmN0aW9uIHVzZVJvdXRlclBhbmVzU3RyZWFtKCkge1xuICBjb25zdCByb3V0ZXJTdGF0ZVN1YmplY3QgPSB1c2VNZW1vKCgpID0+IG5ldyBSZXBsYXlTdWJqZWN0KDEpLCBbXSksIHJvdXRlclBhbmVzJCA9IHVzZU1lbW8oKCkgPT4gcm91dGVyU3RhdGVTdWJqZWN0LmFzT2JzZXJ2YWJsZSgpLnBpcGUobWFwKChfcm91dGVyU3RhdGUpID0+IF9yb3V0ZXJTdGF0ZT8ucGFuZXMgfHwgW10pKSwgW3JvdXRlclN0YXRlU3ViamVjdF0pLCB7XG4gICAgc3RhdGU6IHJvdXRlclN0YXRlXG4gIH0gPSB1c2VSb3V0ZXIoKTtcbiAgcmV0dXJuIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgcm91dGVyU3RhdGVTdWJqZWN0Lm5leHQocm91dGVyU3RhdGUpO1xuICB9LCBbcm91dGVyU3RhdGUsIHJvdXRlclN0YXRlU3ViamVjdF0pLCByb3V0ZXJQYW5lcyQ7XG59XG5mdW5jdGlvbiB1c2VSZXNvbHZlZFBhbmVzKCkge1xuICBjb25zdCAkID0gYyg2KSwgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZSgpO1xuICBpZiAoZXJyb3IpXG4gICAgdGhyb3cgZXJyb3I7XG4gIGNvbnN0IHtcbiAgICBzdHJ1Y3R1cmVDb250ZXh0LFxuICAgIHJvb3RQYW5lTm9kZVxuICB9ID0gdXNlU3RydWN0dXJlVG9vbCgpO1xuICBsZXQgdDA7XG4gICRbMF0gPT09IFN5bWJvbC5mb3IoXCJyZWFjdC5tZW1vX2NhY2hlX3NlbnRpbmVsXCIpID8gKHQwID0ge1xuICAgIHBhbmVEYXRhSXRlbXM6IFtdLFxuICAgIHJlc29sdmVkUGFuZXM6IFtdLFxuICAgIHJvdXRlclBhbmVzOiBbXVxuICB9LCAkWzBdID0gdDApIDogdDAgPSAkWzBdO1xuICBjb25zdCBbZGF0YSwgc2V0RGF0YV0gPSB1c2VTdGF0ZSh0MCksIHJvdXRlclBhbmVzU3RyZWFtID0gdXNlUm91dGVyUGFuZXNTdHJlYW0oKTtcbiAgbGV0IHQxLCB0MjtcbiAgcmV0dXJuICRbMV0gIT09IHJvb3RQYW5lTm9kZSB8fCAkWzJdICE9PSByb3V0ZXJQYW5lc1N0cmVhbSB8fCAkWzNdICE9PSBzdHJ1Y3R1cmVDb250ZXh0ID8gKHQxID0gKCkgPT4ge1xuICAgIGNvbnN0IHN1YnNjcmlwdGlvbiA9IGNyZWF0ZVJlc29sdmVkUGFuZU5vZGVTdHJlYW0oe1xuICAgICAgcm9vdFBhbmVOb2RlLFxuICAgICAgcm91dGVyUGFuZXNTdHJlYW0sXG4gICAgICBzdHJ1Y3R1cmVDb250ZXh0XG4gICAgfSkucGlwZShtYXAoX3RlbXA0KSkuc3Vic2NyaWJlKHtcbiAgICAgIG5leHQ6IChyZXN1bHQpID0+IHNldERhdGEocmVzdWx0KSxcbiAgICAgIGVycm9yOiAoZSkgPT4gc2V0RXJyb3IoZSlcbiAgICB9KTtcbiAgICByZXR1cm4gKCkgPT4gc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gIH0sIHQyID0gW3Jvb3RQYW5lTm9kZSwgcm91dGVyUGFuZXNTdHJlYW0sIHN0cnVjdHVyZUNvbnRleHRdLCAkWzFdID0gcm9vdFBhbmVOb2RlLCAkWzJdID0gcm91dGVyUGFuZXNTdHJlYW0sICRbM10gPSBzdHJ1Y3R1cmVDb250ZXh0LCAkWzRdID0gdDEsICRbNV0gPSB0MikgOiAodDEgPSAkWzRdLCB0MiA9ICRbNV0pLCB1c2VFZmZlY3QodDEsIHQyKSwgZGF0YTtcbn1cbmZ1bmN0aW9uIF90ZW1wNChyZXNvbHZlZFBhbmVzKSB7XG4gIGNvbnN0IHJvdXRlclBhbmVzID0gcmVzb2x2ZWRQYW5lcy5yZWR1Y2UoX3RlbXAyJDMsIFtdKSwgZ3JvdXBzTGVuID0gcm91dGVyUGFuZXMubGVuZ3RoLCBwYW5lRGF0YUl0ZW1zID0gcmVzb2x2ZWRQYW5lcy5tYXAoKHBhbmUpID0+IHtcbiAgICBjb25zdCB7XG4gICAgICBncm91cEluZGV4LFxuICAgICAgZmxhdEluZGV4LFxuICAgICAgc2libGluZ0luZGV4LFxuICAgICAgcm91dGVyUGFuZVNpYmxpbmcsXG4gICAgICBwYXRoXG4gICAgfSA9IHBhbmUsIGl0ZW1JZCA9IHJvdXRlclBhbmVTaWJsaW5nLmlkLCBuZXh0R3JvdXAgPSByb3V0ZXJQYW5lc1tncm91cEluZGV4ICsgMV07XG4gICAgcmV0dXJuIHtcbiAgICAgIGFjdGl2ZTogZ3JvdXBJbmRleCA9PT0gZ3JvdXBzTGVuIC0gMixcbiAgICAgIGNoaWxkSXRlbUlkOiBuZXh0R3JvdXA/LlswXS5pZCA/PyBudWxsLFxuICAgICAgaW5kZXg6IGZsYXRJbmRleCxcbiAgICAgIGl0ZW1JZDogcm91dGVyUGFuZVNpYmxpbmcuaWQsXG4gICAgICBncm91cEluZGV4LFxuICAgICAga2V5OiBgJHtwYW5lLnR5cGUgPT09IFwibG9hZGluZ1wiID8gXCJ1bmtub3duXCIgOiBwYW5lLnBhbmVOb2RlLmlkfS0ke2l0ZW1JZH0tJHtzaWJsaW5nSW5kZXh9YCxcbiAgICAgIHBhbmU6IHBhbmUudHlwZSA9PT0gXCJsb2FkaW5nXCIgPyBMT0FESU5HX1BBTkUgOiBwYW5lLnBhbmVOb2RlLFxuICAgICAgcGFyYW1zOiByb3V0ZXJQYW5lU2libGluZy5wYXJhbXMgfHwge30sXG4gICAgICBwYXRoOiBwYXRoLmpvaW4oXCI7XCIpLFxuICAgICAgcGF5bG9hZDogcm91dGVyUGFuZVNpYmxpbmcucGF5bG9hZCxcbiAgICAgIHNlbGVjdGVkOiBmbGF0SW5kZXggPT09IHJlc29sdmVkUGFuZXMubGVuZ3RoIC0gMSxcbiAgICAgIHNpYmxpbmdJbmRleFxuICAgIH07XG4gIH0pO1xuICByZXR1cm4ge1xuICAgIHBhbmVEYXRhSXRlbXMsXG4gICAgcm91dGVyUGFuZXMsXG4gICAgcmVzb2x2ZWRQYW5lczogcGFuZURhdGFJdGVtcy5tYXAoX3RlbXAzKVxuICB9O1xufVxuZnVuY3Rpb24gX3RlbXAzKHBhbmVfMCkge1xuICByZXR1cm4gcGFuZV8wLnBhbmU7XG59XG5mdW5jdGlvbiBfdGVtcDIkMyhhY2MsIG5leHQpIHtcbiAgY29uc3QgY3VycmVudEdyb3VwID0gYWNjW25leHQuZ3JvdXBJbmRleF0gfHwgW107XG4gIHJldHVybiBjdXJyZW50R3JvdXBbbmV4dC5zaWJsaW5nSW5kZXhdID0gbmV4dC5yb3V0ZXJQYW5lU2libGluZywgYWNjW25leHQuZ3JvdXBJbmRleF0gPSBjdXJyZW50R3JvdXAsIGFjYztcbn1cbmFzeW5jIGZ1bmN0aW9uIGVuc3VyZURvY3VtZW50SWRBbmRUeXBlKGRvY3VtZW50U3RvcmUsIGlkLCB0eXBlKSB7XG4gIGlmIChpZCAmJiB0eXBlKSByZXR1cm4ge1xuICAgIGlkLFxuICAgIHR5cGVcbiAgfTtcbiAgaWYgKCFpZCAmJiB0eXBlKSByZXR1cm4ge1xuICAgIGlkOiB1dWlkKCksXG4gICAgdHlwZVxuICB9O1xuICBpZiAoaWQgJiYgIXR5cGUpIHtcbiAgICBjb25zdCByZXNvbHZlZFR5cGUgPSBhd2FpdCBmaXJzdFZhbHVlRnJvbShkb2N1bWVudFN0b3JlLnJlc29sdmVUeXBlRm9yRG9jdW1lbnQoaWQpKTtcbiAgICByZXR1cm4ge1xuICAgICAgaWQsXG4gICAgICB0eXBlOiByZXNvbHZlZFR5cGVcbiAgICB9O1xuICB9XG4gIHRocm93IG5ldyBQYW5lUmVzb2x1dGlvbkVycm9yKHtcbiAgICBtZXNzYWdlOiBcIk5laXRoZXIgZG9jdW1lbnQgYGlkYCBvciBgdHlwZWAgd2FzIHByb3ZpZGVkIHdoZW4gdHJ5aW5nIHRvIHJlc29sdmUgaW50ZW50LlwiXG4gIH0pO1xufVxuY29uc3QgRU1QVFlfUkVDT1JEID0ge30sIEludGVudFJlc29sdmVyID0gbWVtbyhmdW5jdGlvbigpIHtcbiAgY29uc3QgJCA9IGMoNyksIHtcbiAgICBuYXZpZ2F0ZVxuICB9ID0gdXNlUm91dGVyKCksIG1heWJlSW50ZW50ID0gdXNlUm91dGVyU3RhdGUoX3RlbXAkNCksIHtcbiAgICByb290UGFuZU5vZGUsXG4gICAgc3RydWN0dXJlQ29udGV4dFxuICB9ID0gdXNlU3RydWN0dXJlVG9vbCgpLCBkb2N1bWVudFN0b3JlID0gdXNlRG9jdW1lbnRTdG9yZSgpLCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlKG51bGwpO1xuICBpZiAoZXJyb3IpXG4gICAgdGhyb3cgZXJyb3I7XG4gIGxldCB0MCwgdDE7XG4gIHJldHVybiAkWzBdICE9PSBkb2N1bWVudFN0b3JlIHx8ICRbMV0gIT09IG1heWJlSW50ZW50IHx8ICRbMl0gIT09IG5hdmlnYXRlIHx8ICRbM10gIT09IHJvb3RQYW5lTm9kZSB8fCAkWzRdICE9PSBzdHJ1Y3R1cmVDb250ZXh0ID8gKHQwID0gKCkgPT4ge1xuICAgIGlmIChtYXliZUludGVudCkge1xuICAgICAgY29uc3Qge1xuICAgICAgICBpbnRlbnQsXG4gICAgICAgIHBhcmFtcyxcbiAgICAgICAgcGF5bG9hZFxuICAgICAgfSA9IG1heWJlSW50ZW50O1xuICAgICAgbGV0IGNhbmNlbGxlZDtcbiAgICAgIHJldHVybiBjYW5jZWxsZWQgPSAhMSwgYXN5bmMgZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICBpZCxcbiAgICAgICAgICB0eXBlXG4gICAgICAgIH0gPSBhd2FpdCBlbnN1cmVEb2N1bWVudElkQW5kVHlwZShkb2N1bWVudFN0b3JlLCB0eXBlb2YgcGFyYW1zLmlkID09IFwic3RyaW5nXCIgPyBwYXJhbXMuaWQgOiB2b2lkIDAsIHR5cGVvZiBwYXJhbXMudHlwZSA9PSBcInN0cmluZ1wiID8gcGFyYW1zLnR5cGUgOiB2b2lkIDApO1xuICAgICAgICBpZiAoY2FuY2VsbGVkKVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgcGFuZXMgPSBhd2FpdCByZXNvbHZlSW50ZW50KHtcbiAgICAgICAgICBpbnRlbnQsXG4gICAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgICAuLi5wYXJhbXMsXG4gICAgICAgICAgICBpZCxcbiAgICAgICAgICAgIHR5cGVcbiAgICAgICAgICB9LFxuICAgICAgICAgIHBheWxvYWQsXG4gICAgICAgICAgcm9vdFBhbmVOb2RlLFxuICAgICAgICAgIHN0cnVjdHVyZUNvbnRleHRcbiAgICAgICAgfSk7XG4gICAgICAgIGNhbmNlbGxlZCB8fCBuYXZpZ2F0ZSh7XG4gICAgICAgICAgcGFuZXNcbiAgICAgICAgfSwge1xuICAgICAgICAgIHJlcGxhY2U6ICEwXG4gICAgICAgIH0pO1xuICAgICAgfSgpLmNhdGNoKHNldEVycm9yKSwgKCkgPT4ge1xuICAgICAgICBjYW5jZWxsZWQgPSAhMDtcbiAgICAgIH07XG4gICAgfVxuICB9LCB0MSA9IFtkb2N1bWVudFN0b3JlLCBtYXliZUludGVudCwgbmF2aWdhdGUsIHJvb3RQYW5lTm9kZSwgc3RydWN0dXJlQ29udGV4dF0sICRbMF0gPSBkb2N1bWVudFN0b3JlLCAkWzFdID0gbWF5YmVJbnRlbnQsICRbMl0gPSBuYXZpZ2F0ZSwgJFszXSA9IHJvb3RQYW5lTm9kZSwgJFs0XSA9IHN0cnVjdHVyZUNvbnRleHQsICRbNV0gPSB0MCwgJFs2XSA9IHQxKSA6ICh0MCA9ICRbNV0sIHQxID0gJFs2XSksIHVzZUVmZmVjdCh0MCwgdDEpLCBudWxsO1xufSk7XG5mdW5jdGlvbiBfdGVtcCQ0KHJvdXRlclN0YXRlKSB7XG4gIGNvbnN0IGludGVudE5hbWUgPSB0eXBlb2Ygcm91dGVyU3RhdGUuaW50ZW50ID09IFwic3RyaW5nXCIgPyByb3V0ZXJTdGF0ZS5pbnRlbnQgOiB2b2lkIDA7XG4gIHJldHVybiBpbnRlbnROYW1lID8ge1xuICAgIGludGVudDogaW50ZW50TmFtZSxcbiAgICBwYXJhbXM6IGlzUmVjb3JkKHJvdXRlclN0YXRlLnBhcmFtcykgPyByb3V0ZXJTdGF0ZS5wYXJhbXMgOiBFTVBUWV9SRUNPUkQsXG4gICAgcGF5bG9hZDogcm91dGVyU3RhdGUucGF5bG9hZFxuICB9IDogdm9pZCAwO1xufVxuY29uc3QgUGF0aFNlZ21lbnQgPSBzdHlsZWQuc3BhbmBcbiAgJjpub3QoOmxhc3QtY2hpbGQpOjphZnRlciB7XG4gICAgY29udGVudDogJyDinp0gJztcbiAgICBvcGFjaXR5OiAwLjU7XG4gIH1cbmA7XG5mdW5jdGlvbiBmb3JtYXRTdGFjayhzdGFjaykge1xuICByZXR1cm4gc3RhY2sucmVwbGFjZSgvXFwoXFwuXFwuXFwuXFwpXFwuL2csIGAoLi4uKVxuICAuYCkucmVwbGFjZSgvX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV9cXGQrXysvZywgXCJcIikucmVwbGFjZSgvX19fZGVmYXVsdFxcLi9nLCBcIi5cIikucmVwbGFjZShuZXcgUmVnRXhwKGAgXFxcXChodHRwcz86XFxcXC9cXFxcLyR7d2luZG93LmxvY2F0aW9uLmhvc3R9YCwgXCJnXCIpLCBcIiAoXCIpO1xufVxuZnVuY3Rpb24gU3RydWN0dXJlRXJyb3IodDApIHtcbiAgY29uc3QgJCA9IGMoMzcpLCB7XG4gICAgZXJyb3JcbiAgfSA9IHQwO1xuICBpZiAoIShlcnJvciBpbnN0YW5jZW9mIFBhbmVSZXNvbHV0aW9uRXJyb3IpKVxuICAgIHRocm93IGVycm9yO1xuICBjb25zdCB7XG4gICAgY2F1c2VcbiAgfSA9IGVycm9yLCB7XG4gICAgdFxuICB9ID0gdXNlVHJhbnNsYXRpb24oc3RydWN0dXJlTG9jYWxlTmFtZXNwYWNlKSwgc3RhY2sgPSBjYXVzZT8uc3RhY2sgfHwgZXJyb3Iuc3RhY2ssIHNob3dTdGFjayA9IHN0YWNrICYmICEoY2F1c2UgaW5zdGFuY2VvZiBTZXJpYWxpemVFcnJvcikgJiYgIWVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoXCJNb2R1bGUgYnVpbGQgZmFpbGVkOlwiKTtcbiAgbGV0IHQxO1xuICAkWzBdICE9PSBjYXVzZSA/ICh0MSA9IGNhdXNlIGluc3RhbmNlb2YgU2VyaWFsaXplRXJyb3IgPyBjYXVzZS5wYXRoIDogW10sICRbMF0gPSBjYXVzZSwgJFsxXSA9IHQxKSA6IHQxID0gJFsxXTtcbiAgY29uc3QgcGF0aCA9IHQxLCBoZWxwSWQgPSBjYXVzZSBpbnN0YW5jZW9mIFNlcmlhbGl6ZUVycm9yICYmIGNhdXNlLmhlbHBJZCB8fCBlcnJvci5oZWxwSWQsIGhhbmRsZVJlbG9hZCA9IF90ZW1wJDM7XG4gIGxldCB0MjtcbiAgJFsyXSAhPT0gdCA/ICh0MiA9IHQoXCJzdHJ1Y3R1cmUtZXJyb3IuaGVhZGVyLnRleHRcIiksICRbMl0gPSB0LCAkWzNdID0gdDIpIDogdDIgPSAkWzNdO1xuICBsZXQgdDM7XG4gICRbNF0gIT09IHQyID8gKHQzID0gLyogQF9fUFVSRV9fICovIGpzeChIZWFkaW5nLCB7IGFzOiBcImgyXCIsIGNoaWxkcmVuOiB0MiB9KSwgJFs0XSA9IHQyLCAkWzVdID0gdDMpIDogdDMgPSAkWzVdO1xuICBsZXQgdDQ7XG4gICRbNl0gIT09IHBhdGggfHwgJFs3XSAhPT0gdCA/ICh0NCA9IHBhdGgubGVuZ3RoID4gMCAmJiAvKiBAX19QVVJFX18gKi8ganN4cyhTdGFjaywgeyBzcGFjZTogMiwgY2hpbGRyZW46IFtcbiAgICAvKiBAX19QVVJFX18gKi8ganN4KFRleHQsIHsgc2l6ZTogMSwgd2VpZ2h0OiBcIm1lZGl1bVwiLCBjaGlsZHJlbjogdChcInN0cnVjdHVyZS1lcnJvci5zdHJ1Y3R1cmUtcGF0aC5sYWJlbFwiKSB9KSxcbiAgICAvKiBAX19QVVJFX18gKi8ganN4KENvZGUsIHsgY2hpbGRyZW46IHBhdGguc2xpY2UoMSkubWFwKF90ZW1wMiQyKSB9KVxuICBdIH0pLCAkWzZdID0gcGF0aCwgJFs3XSA9IHQsICRbOF0gPSB0NCkgOiB0NCA9ICRbOF07XG4gIGxldCB0NTtcbiAgJFs5XSAhPT0gdCA/ICh0NSA9IHQoXCJzdHJ1Y3R1cmUtZXJyb3IuZXJyb3IubGFiZWxcIiksICRbOV0gPSB0LCAkWzEwXSA9IHQ1KSA6IHQ1ID0gJFsxMF07XG4gIGxldCB0NjtcbiAgJFsxMV0gIT09IHQ1ID8gKHQ2ID0gLyogQF9fUFVSRV9fICovIGpzeChUZXh0LCB7IHNpemU6IDEsIHdlaWdodDogXCJtZWRpdW1cIiwgY2hpbGRyZW46IHQ1IH0pLCAkWzExXSA9IHQ1LCAkWzEyXSA9IHQ2KSA6IHQ2ID0gJFsxMl07XG4gIGxldCB0NztcbiAgJFsxM10gIT09IGVycm9yLm1lc3NhZ2UgfHwgJFsxNF0gIT09IHNob3dTdGFjayB8fCAkWzE1XSAhPT0gc3RhY2sgPyAodDcgPSBzaG93U3RhY2sgPyBmb3JtYXRTdGFjayhzdGFjaykgOiBlcnJvci5tZXNzYWdlLCAkWzEzXSA9IGVycm9yLm1lc3NhZ2UsICRbMTRdID0gc2hvd1N0YWNrLCAkWzE1XSA9IHN0YWNrLCAkWzE2XSA9IHQ3KSA6IHQ3ID0gJFsxNl07XG4gIGxldCB0ODtcbiAgJFsxN10gIT09IHQ3ID8gKHQ4ID0gLyogQF9fUFVSRV9fICovIGpzeChDb2RlLCB7IGNoaWxkcmVuOiB0NyB9KSwgJFsxN10gPSB0NywgJFsxOF0gPSB0OCkgOiB0OCA9ICRbMThdO1xuICBsZXQgdDk7XG4gICRbMTldICE9PSB0NiB8fCAkWzIwXSAhPT0gdDggPyAodDkgPSAvKiBAX19QVVJFX18gKi8ganN4cyhTdGFjaywgeyBtYXJnaW5Ub3A6IDQsIHNwYWNlOiAyLCBjaGlsZHJlbjogW1xuICAgIHQ2LFxuICAgIHQ4XG4gIF0gfSksICRbMTldID0gdDYsICRbMjBdID0gdDgsICRbMjFdID0gdDkpIDogdDkgPSAkWzIxXTtcbiAgbGV0IHQxMDtcbiAgJFsyMl0gIT09IGhlbHBJZCB8fCAkWzIzXSAhPT0gdCA/ICh0MTAgPSBoZWxwSWQgJiYgLyogQF9fUFVSRV9fICovIGpzeChCb3gsIHsgbWFyZ2luVG9wOiA0LCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeChUZXh0LCB7IGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4KFwiYVwiLCB7IGhyZWY6IGdlbmVyYXRlSGVscFVybChoZWxwSWQpLCByZWw6IFwibm9vcGVuZXIgbm9yZWZlcnJlclwiLCB0YXJnZXQ6IFwiX2JsYW5rXCIsIGNoaWxkcmVuOiB0KFwic3RydWN0dXJlLWVycm9yLmRvY3MtbGluay50ZXh0XCIpIH0pIH0pIH0pLCAkWzIyXSA9IGhlbHBJZCwgJFsyM10gPSB0LCAkWzI0XSA9IHQxMCkgOiB0MTAgPSAkWzI0XTtcbiAgbGV0IHQxMTtcbiAgJFsyNV0gIT09IHQgPyAodDExID0gdChcInN0cnVjdHVyZS1lcnJvci5yZWxvYWQtYnV0dG9uLnRleHRcIiksICRbMjVdID0gdCwgJFsyNl0gPSB0MTEpIDogdDExID0gJFsyNl07XG4gIGxldCB0MTI7XG4gICRbMjddICE9PSB0MTEgPyAodDEyID0gLyogQF9fUFVSRV9fICovIGpzeChCb3gsIHsgbWFyZ2luVG9wOiA0LCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeChCdXR0b24sIHsgdGV4dDogdDExLCBpY29uOiBTeW5jSWNvbiwgdG9uZTogXCJwcmltYXJ5XCIsIG9uQ2xpY2s6IGhhbmRsZVJlbG9hZCB9KSB9KSwgJFsyN10gPSB0MTEsICRbMjhdID0gdDEyKSA6IHQxMiA9ICRbMjhdO1xuICBsZXQgdDEzO1xuICAkWzI5XSAhPT0gdDEwIHx8ICRbMzBdICE9PSB0MTIgfHwgJFszMV0gIT09IHQ0IHx8ICRbMzJdICE9PSB0OSA/ICh0MTMgPSAvKiBAX19QVVJFX18gKi8ganN4cyhDYXJkLCB7IG1hcmdpblRvcDogNCwgcGFkZGluZzogNCwgcmFkaXVzOiAyLCBvdmVyZmxvdzogXCJhdXRvXCIsIHNoYWRvdzogMSwgdG9uZTogXCJpbmhlcml0XCIsIGNoaWxkcmVuOiBbXG4gICAgdDQsXG4gICAgdDksXG4gICAgdDEwLFxuICAgIHQxMlxuICBdIH0pLCAkWzI5XSA9IHQxMCwgJFszMF0gPSB0MTIsICRbMzFdID0gdDQsICRbMzJdID0gdDksICRbMzNdID0gdDEzKSA6IHQxMyA9ICRbMzNdO1xuICBsZXQgdDE0O1xuICByZXR1cm4gJFszNF0gIT09IHQxMyB8fCAkWzM1XSAhPT0gdDMgPyAodDE0ID0gLyogQF9fUFVSRV9fICovIGpzeChDYXJkLCB7IGhlaWdodDogXCJmaWxsXCIsIG92ZXJmbG93OiBcImF1dG9cIiwgcGFkZGluZzogNCwgc2l6aW5nOiBcImJvcmRlclwiLCB0b25lOiBcImNyaXRpY2FsXCIsIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4cyhDb250YWluZXIsIHsgY2hpbGRyZW46IFtcbiAgICB0MyxcbiAgICB0MTNcbiAgXSB9KSB9KSwgJFszNF0gPSB0MTMsICRbMzVdID0gdDMsICRbMzZdID0gdDE0KSA6IHQxNCA9ICRbMzZdLCB0MTQ7XG59XG5mdW5jdGlvbiBfdGVtcDIkMihzZWdtZW50LCBpKSB7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4KFBhdGhTZWdtZW50LCB7IGNoaWxkcmVuOiBzZWdtZW50IH0sIGAke3NlZ21lbnR9LSR7aX1gKTtcbn1cbmZ1bmN0aW9uIF90ZW1wJDMoKSB7XG4gIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbn1cbmZ1bmN0aW9uIFVua25vd25QYW5lKHByb3BzKSB7XG4gIGNvbnN0ICQgPSBjKDE0KSwge1xuICAgIGlzU2VsZWN0ZWQsXG4gICAgcGFuZSxcbiAgICBwYW5lS2V5XG4gIH0gPSBwcm9wcztcbiAgbGV0IHQwO1xuICAkWzBdICE9PSBwYW5lID8gKHQwID0gaXNSZWNvcmQocGFuZSkgJiYgcGFuZS50eXBlIHx8IG51bGwsICRbMF0gPSBwYW5lLCAkWzFdID0gdDApIDogdDAgPSAkWzFdO1xuICBjb25zdCB0eXBlID0gdDAsIHtcbiAgICB0XG4gIH0gPSB1c2VUcmFuc2xhdGlvbihzdHJ1Y3R1cmVMb2NhbGVOYW1lc3BhY2UpO1xuICBsZXQgdDE7XG4gICRbMl0gIT09IHQgPyAodDEgPSB0KFwicGFuZXMudW5rbm93bi1wYW5lLXR5cGUudGl0bGVcIiksICRbMl0gPSB0LCAkWzNdID0gdDEpIDogdDEgPSAkWzNdO1xuICBsZXQgdDI7XG4gICRbNF0gIT09IHQxID8gKHQyID0gLyogQF9fUFVSRV9fICovIGpzeChQYW5lSGVhZGVyLCB7IHRpdGxlOiB0MSB9KSwgJFs0XSA9IHQxLCAkWzVdID0gdDIpIDogdDIgPSAkWzVdO1xuICBsZXQgdDM7XG4gICRbNl0gIT09IHQgfHwgJFs3XSAhPT0gdHlwZSA/ICh0MyA9IC8qIEBfX1BVUkVfXyAqLyBqc3goUGFuZUNvbnRlbnQsIHsgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3goQm94LCB7IHBhZGRpbmc6IDQsIGNoaWxkcmVuOiB0eXBlb2YgdHlwZSA9PSBcInN0cmluZ1wiID8gLyogQF9fUFVSRV9fICovIGpzeChUZXh0LCB7IGFzOiBcInBcIiwgbXV0ZWQ6ICEwLCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeChUcmFuc2xhdGUsIHsgdCwgaTE4bktleTogXCJwYW5lcy51bmtub3duLXBhbmUtdHlwZS51bmtub3duLXR5cGUudGV4dFwiLCB2YWx1ZXM6IHtcbiAgICB0eXBlXG4gIH0gfSkgfSkgOiAvKiBAX19QVVJFX18gKi8ganN4KFRleHQsIHsgYXM6IFwicFwiLCBtdXRlZDogITAsIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4KFRyYW5zbGF0ZSwgeyB0LCBpMThuS2V5OiBcInBhbmVzLnVua25vd24tcGFuZS10eXBlLm1pc3NpbmctdHlwZS50ZXh0XCIgfSkgfSkgfSkgfSksICRbNl0gPSB0LCAkWzddID0gdHlwZSwgJFs4XSA9IHQzKSA6IHQzID0gJFs4XTtcbiAgbGV0IHQ0O1xuICByZXR1cm4gJFs5XSAhPT0gaXNTZWxlY3RlZCB8fCAkWzEwXSAhPT0gcGFuZUtleSB8fCAkWzExXSAhPT0gdDIgfHwgJFsxMl0gIT09IHQzID8gKHQ0ID0gLyogQF9fUFVSRV9fICovIGpzeHMoUGFuZSwgeyBpZDogcGFuZUtleSwgc2VsZWN0ZWQ6IGlzU2VsZWN0ZWQsIGNoaWxkcmVuOiBbXG4gICAgdDIsXG4gICAgdDNcbiAgXSB9KSwgJFs5XSA9IGlzU2VsZWN0ZWQsICRbMTBdID0gcGFuZUtleSwgJFsxMV0gPSB0MiwgJFsxMl0gPSB0MywgJFsxM10gPSB0NCkgOiB0NCA9ICRbMTNdLCB0NDtcbn1cbmNvbnN0IHBhbmVNYXAgPSB7XG4gIGNvbXBvbmVudDogbGF6eSgoKSA9PiBpbXBvcnQoXCIuL2luZGV4Lm1qc1wiKSksXG4gIGRvY3VtZW50OiBsYXp5KCgpID0+IGltcG9ydChcIi4vcGFuZS5tanNcIikudGhlbihmdW5jdGlvbihuKSB7XG4gICAgcmV0dXJuIG4ucGFuZTtcbiAgfSkpLFxuICBkb2N1bWVudExpc3Q6IGxhenkoKCkgPT4gaW1wb3J0KFwiLi9wYW5lLm1qc1wiKS50aGVuKGZ1bmN0aW9uKG4pIHtcbiAgICByZXR1cm4gbi5wYW5lJDE7XG4gIH0pKSxcbiAgbGlzdDogbGF6eSgoKSA9PiBpbXBvcnQoXCIuL2luZGV4Mi5tanNcIikpXG59LCBTdHJ1Y3R1cmVUb29sUGFuZSA9IG1lbW8oZnVuY3Rpb24ocHJvcHMpIHtcbiAgY29uc3QgJCA9IGMoMjMpLCB7XG4gICAgYWN0aXZlLFxuICAgIGNoaWxkSXRlbUlkLFxuICAgIGdyb3VwSW5kZXgsXG4gICAgaW5kZXgsXG4gICAgaXRlbUlkLFxuICAgIHBhbmUsXG4gICAgcGFuZUtleSxcbiAgICBwYXJhbXMsXG4gICAgcGF5bG9hZCxcbiAgICBwYXRoLFxuICAgIHNlbGVjdGVkLFxuICAgIHNpYmxpbmdJbmRleFxuICB9ID0gcHJvcHMsIFBhbmVDb21wb25lbnQgPSBwYW5lTWFwW3BhbmUudHlwZV0gfHwgVW5rbm93blBhbmU7XG4gIGxldCB0MDtcbiAgJFswXSAhPT0gcGFuZUtleSB8fCAkWzFdICE9PSBwYXRoIHx8ICRbMl0gIT09IHNlbGVjdGVkID8gKHQwID0gLyogQF9fUFVSRV9fICovIGpzeChMb2FkaW5nUGFuZSwgeyBwYW5lS2V5LCBwYXRoLCBzZWxlY3RlZCB9KSwgJFswXSA9IHBhbmVLZXksICRbMV0gPSBwYXRoLCAkWzJdID0gc2VsZWN0ZWQsICRbM10gPSB0MCkgOiB0MCA9ICRbM107XG4gIGNvbnN0IHQxID0gY2hpbGRJdGVtSWQgfHwgXCJcIjtcbiAgbGV0IHQyO1xuICAkWzRdICE9PSBQYW5lQ29tcG9uZW50IHx8ICRbNV0gIT09IGFjdGl2ZSB8fCAkWzZdICE9PSBpbmRleCB8fCAkWzddICE9PSBpdGVtSWQgfHwgJFs4XSAhPT0gcGFuZSB8fCAkWzldICE9PSBwYW5lS2V5IHx8ICRbMTBdICE9PSBzZWxlY3RlZCB8fCAkWzExXSAhPT0gdDEgPyAodDIgPSAvKiBAX19QVVJFX18gKi8ganN4KFBhbmVDb21wb25lbnQsIHsgY2hpbGRJdGVtSWQ6IHQxLCBpbmRleCwgaXRlbUlkLCBpc0FjdGl2ZTogYWN0aXZlLCBpc1NlbGVjdGVkOiBzZWxlY3RlZCwgcGFuZUtleSwgcGFuZSB9KSwgJFs0XSA9IFBhbmVDb21wb25lbnQsICRbNV0gPSBhY3RpdmUsICRbNl0gPSBpbmRleCwgJFs3XSA9IGl0ZW1JZCwgJFs4XSA9IHBhbmUsICRbOV0gPSBwYW5lS2V5LCAkWzEwXSA9IHNlbGVjdGVkLCAkWzExXSA9IHQxLCAkWzEyXSA9IHQyKSA6IHQyID0gJFsxMl07XG4gIGxldCB0MztcbiAgJFsxM10gIT09IHQwIHx8ICRbMTRdICE9PSB0MiA/ICh0MyA9IC8qIEBfX1BVUkVfXyAqLyBqc3goU3VzcGVuc2UsIHsgZmFsbGJhY2s6IHQwLCBjaGlsZHJlbjogdDIgfSksICRbMTNdID0gdDAsICRbMTRdID0gdDIsICRbMTVdID0gdDMpIDogdDMgPSAkWzE1XTtcbiAgbGV0IHQ0O1xuICByZXR1cm4gJFsxNl0gIT09IGdyb3VwSW5kZXggfHwgJFsxN10gIT09IGluZGV4IHx8ICRbMThdICE9PSBwYXJhbXMgfHwgJFsxOV0gIT09IHBheWxvYWQgfHwgJFsyMF0gIT09IHNpYmxpbmdJbmRleCB8fCAkWzIxXSAhPT0gdDMgPyAodDQgPSAvKiBAX19QVVJFX18gKi8ganN4KFBhbmVSb3V0ZXJQcm92aWRlciwgeyBmbGF0SW5kZXg6IGluZGV4LCBpbmRleDogZ3JvdXBJbmRleCwgcGFyYW1zLCBwYXlsb2FkLCBzaWJsaW5nSW5kZXgsIGNoaWxkcmVuOiB0MyB9KSwgJFsxNl0gPSBncm91cEluZGV4LCAkWzE3XSA9IGluZGV4LCAkWzE4XSA9IHBhcmFtcywgJFsxOV0gPSBwYXlsb2FkLCAkWzIwXSA9IHNpYmxpbmdJbmRleCwgJFsyMV0gPSB0MywgJFsyMl0gPSB0NCkgOiB0NCA9ICRbMjJdLCB0NDtcbn0sICh7XG4gIHBhcmFtczogcHJldlBhcmFtcyA9IHt9LFxuICBwYXlsb2FkOiBwcmV2UGF5bG9hZCA9IG51bGwsXG4gIC4uLnByZXZcbn0sIHtcbiAgcGFyYW1zOiBuZXh0UGFyYW1zID0ge30sXG4gIHBheWxvYWQ6IG5leHRQYXlsb2FkID0gbnVsbCxcbiAgLi4ubmV4dFxufSkgPT4ge1xuICBpZiAoIWlzRXF1YWwocHJldlBhcmFtcywgbmV4dFBhcmFtcykgfHwgIWlzRXF1YWwocHJldlBheWxvYWQsIG5leHRQYXlsb2FkKSkgcmV0dXJuICExO1xuICBjb25zdCBrZXlzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoWy4uLk9iamVjdC5rZXlzKHByZXYpLCAuLi5PYmplY3Qua2V5cyhuZXh0KV0pO1xuICBmb3IgKGNvbnN0IGtleSBvZiBrZXlzKVxuICAgIGlmIChwcmV2W2tleV0gIT09IG5leHRba2V5XSkgcmV0dXJuICExO1xuICByZXR1cm4gITA7XG59KTtcbmZ1bmN0aW9uIE5vRG9jdW1lbnRUeXBlc1NjcmVlbigpIHtcbiAgY29uc3QgJCA9IGMoMTcpLCB7XG4gICAgdFxuICB9ID0gdXNlVHJhbnNsYXRpb24oc3RydWN0dXJlTG9jYWxlTmFtZXNwYWNlKTtcbiAgbGV0IHQwO1xuICAkWzBdID09PSBTeW1ib2wuZm9yKFwicmVhY3QubWVtb19jYWNoZV9zZW50aW5lbFwiKSA/ICh0MCA9IC8qIEBfX1BVUkVfXyAqLyBqc3goQm94LCB7IGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4KFRleHQsIHsgc2l6ZTogMSwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3goV2FybmluZ091dGxpbmVJY29uLCB7fSkgfSkgfSksICRbMF0gPSB0MCkgOiB0MCA9ICRbMF07XG4gIGxldCB0MTtcbiAgJFsxXSAhPT0gdCA/ICh0MSA9IHQoXCJuby1kb2N1bWVudC10eXBlcy1zY3JlZW4udGl0bGVcIiksICRbMV0gPSB0LCAkWzJdID0gdDEpIDogdDEgPSAkWzJdO1xuICBsZXQgdDI7XG4gICRbM10gIT09IHQxID8gKHQyID0gLyogQF9fUFVSRV9fICovIGpzeChUZXh0LCB7IGFzOiBcImgxXCIsIHNpemU6IDEsIHdlaWdodDogXCJtZWRpdW1cIiwgY2hpbGRyZW46IHQxIH0pLCAkWzNdID0gdDEsICRbNF0gPSB0MikgOiB0MiA9ICRbNF07XG4gIGxldCB0MztcbiAgJFs1XSAhPT0gdCA/ICh0MyA9IHQoXCJuby1kb2N1bWVudC10eXBlcy1zY3JlZW4uc3VidGl0bGVcIiksICRbNV0gPSB0LCAkWzZdID0gdDMpIDogdDMgPSAkWzZdO1xuICBsZXQgdDQ7XG4gICRbN10gIT09IHQzID8gKHQ0ID0gLyogQF9fUFVSRV9fICovIGpzeChUZXh0LCB7IGFzOiBcInBcIiwgbXV0ZWQ6ICEwLCBzaXplOiAxLCBjaGlsZHJlbjogdDMgfSksICRbN10gPSB0MywgJFs4XSA9IHQ0KSA6IHQ0ID0gJFs4XTtcbiAgbGV0IHQ1O1xuICAkWzldICE9PSB0ID8gKHQ1ID0gdChcIm5vLWRvY3VtZW50LXR5cGVzLXNjcmVlbi5saW5rLXRleHRcIiksICRbOV0gPSB0LCAkWzEwXSA9IHQ1KSA6IHQ1ID0gJFsxMF07XG4gIGxldCB0NjtcbiAgJFsxMV0gIT09IHQ1ID8gKHQ2ID0gLyogQF9fUFVSRV9fICovIGpzeChUZXh0LCB7IGFzOiBcInBcIiwgbXV0ZWQ6ICEwLCBzaXplOiAxLCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeChcImFcIiwgeyBocmVmOiBcImh0dHBzOi8vd3d3LnNhbml0eS5pby9kb2NzL2NyZWF0ZS1hLXNjaGVtYS1hbmQtY29uZmlndXJlLXNhbml0eS1zdHVkaW9cIiwgdGFyZ2V0OiBcIl9ibGFua1wiLCByZWw6IFwibm9yZWZlcnJlclwiLCBjaGlsZHJlbjogdDUgfSkgfSksICRbMTFdID0gdDUsICRbMTJdID0gdDYpIDogdDYgPSAkWzEyXTtcbiAgbGV0IHQ3O1xuICByZXR1cm4gJFsxM10gIT09IHQyIHx8ICRbMTRdICE9PSB0NCB8fCAkWzE1XSAhPT0gdDYgPyAodDcgPSAvKiBAX19QVVJFX18gKi8ganN4KENhcmQsIHsgaGVpZ2h0OiBcImZpbGxcIiwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3goRmxleCwgeyBhbGlnbjogXCJjZW50ZXJcIiwgaGVpZ2h0OiBcImZpbGxcIiwganVzdGlmeTogXCJjZW50ZXJcIiwgcGFkZGluZzogNCwgc2l6aW5nOiBcImJvcmRlclwiLCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeChDb250YWluZXIsIHsgd2lkdGg6IDAsIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4KENhcmQsIHsgcGFkZGluZzogNCwgcmFkaXVzOiAyLCBzaGFkb3c6IDEsIHRvbmU6IFwiY2F1dGlvblwiLCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeHMoRmxleCwgeyBjaGlsZHJlbjogW1xuICAgIHQwLFxuICAgIC8qIEBfX1BVUkVfXyAqLyBqc3hzKFN0YWNrLCB7IGZsZXg6IDEsIG1hcmdpbkxlZnQ6IDMsIHNwYWNlOiAzLCBjaGlsZHJlbjogW1xuICAgICAgdDIsXG4gICAgICB0NCxcbiAgICAgIHQ2XG4gICAgXSB9KVxuICBdIH0pIH0pIH0pIH0pIH0pLCAkWzEzXSA9IHQyLCAkWzE0XSA9IHQ0LCAkWzE1XSA9IHQ2LCAkWzE2XSA9IHQ3KSA6IHQ3ID0gJFsxNl0sIHQ3O1xufVxuY29uc3QgRG9jdW1lbnRUaXRsZSA9IChwcm9wcykgPT4ge1xuICBjb25zdCAkID0gYyg3KSwge1xuICAgIGRvY3VtZW50SWQsXG4gICAgZG9jdW1lbnRUeXBlXG4gIH0gPSBwcm9wcywgZWRpdFN0YXRlID0gdXNlRWRpdFN0YXRlKGRvY3VtZW50SWQsIGRvY3VtZW50VHlwZSksIHNjaGVtYSA9IHVzZVNjaGVtYSgpLCB7XG4gICAgdFxuICB9ID0gdXNlVHJhbnNsYXRpb24oc3RydWN0dXJlTG9jYWxlTmFtZXNwYWNlKSwgaXNOZXdEb2N1bWVudCA9ICFlZGl0U3RhdGU/LnB1Ymxpc2hlZCAmJiAhZWRpdFN0YXRlPy5kcmFmdCwgZG9jdW1lbnRWYWx1ZSA9IGVkaXRTdGF0ZT8uZHJhZnQgfHwgZWRpdFN0YXRlPy5wdWJsaXNoZWQsIHNjaGVtYVR5cGUgPSBzY2hlbWEuZ2V0KGRvY3VtZW50VHlwZSksIHtcbiAgICB2YWx1ZSxcbiAgICBpc0xvYWRpbmc6IHByZXZpZXdWYWx1ZUlzTG9hZGluZ1xuICB9ID0gdW5zdGFibGVfdXNlVmFsdWVQcmV2aWV3KHtcbiAgICBlbmFibGVkOiAhMCxcbiAgICBzY2hlbWFUeXBlLFxuICAgIHZhbHVlOiBkb2N1bWVudFZhbHVlXG4gIH0pLCBkb2N1bWVudFRpdGxlID0gaXNOZXdEb2N1bWVudCA/IHQoXCJicm93c2VyLWRvY3VtZW50LXRpdGxlLm5ldy1kb2N1bWVudFwiLCB7XG4gICAgc2NoZW1hVHlwZTogc2NoZW1hVHlwZT8udGl0bGUgfHwgc2NoZW1hVHlwZT8ubmFtZVxuICB9KSA6IHZhbHVlPy50aXRsZSB8fCB0KFwiYnJvd3Nlci1kb2N1bWVudC10aXRsZS51bnRpdGxlZC1kb2N1bWVudFwiKSwgc2V0dGxlZCA9IGVkaXRTdGF0ZS5yZWFkeSAmJiAhcHJldmlld1ZhbHVlSXNMb2FkaW5nLCBuZXdUaXRsZSA9IHVzZUNvbnN0cnVjdERvY3VtZW50VGl0bGUoZG9jdW1lbnRUaXRsZSk7XG4gIGxldCB0MDtcbiAgJFswXSAhPT0gbmV3VGl0bGUgfHwgJFsxXSAhPT0gc2V0dGxlZCA/ICh0MCA9ICgpID0+IHtcbiAgICBzZXR0bGVkICYmIChkb2N1bWVudC50aXRsZSA9IG5ld1RpdGxlKTtcbiAgfSwgJFswXSA9IG5ld1RpdGxlLCAkWzFdID0gc2V0dGxlZCwgJFsyXSA9IHQwKSA6IHQwID0gJFsyXTtcbiAgbGV0IHQxO1xuICByZXR1cm4gJFszXSAhPT0gZG9jdW1lbnRUaXRsZSB8fCAkWzRdICE9PSBuZXdUaXRsZSB8fCAkWzVdICE9PSBzZXR0bGVkID8gKHQxID0gW2RvY3VtZW50VGl0bGUsIHNldHRsZWQsIG5ld1RpdGxlXSwgJFszXSA9IGRvY3VtZW50VGl0bGUsICRbNF0gPSBuZXdUaXRsZSwgJFs1XSA9IHNldHRsZWQsICRbNl0gPSB0MSkgOiB0MSA9ICRbNl0sIHVzZUVmZmVjdCh0MCwgdDEpLCBudWxsO1xufSwgUGFzc3Rocm91Z2hUaXRsZSA9IChwcm9wcykgPT4ge1xuICBjb25zdCAkID0gYyg1KSwge1xuICAgIHRpdGxlXG4gIH0gPSBwcm9wcywgbmV3VGl0bGUgPSB1c2VDb25zdHJ1Y3REb2N1bWVudFRpdGxlKHRpdGxlKTtcbiAgbGV0IHQwO1xuICAkWzBdICE9PSBuZXdUaXRsZSA/ICh0MCA9ICgpID0+IHtcbiAgICBkb2N1bWVudC50aXRsZSA9IG5ld1RpdGxlO1xuICB9LCAkWzBdID0gbmV3VGl0bGUsICRbMV0gPSB0MCkgOiB0MCA9ICRbMV07XG4gIGxldCB0MTtcbiAgcmV0dXJuICRbMl0gIT09IG5ld1RpdGxlIHx8ICRbM10gIT09IHRpdGxlID8gKHQxID0gW25ld1RpdGxlLCB0aXRsZV0sICRbMl0gPSBuZXdUaXRsZSwgJFszXSA9IHRpdGxlLCAkWzRdID0gdDEpIDogdDEgPSAkWzRdLCB1c2VFZmZlY3QodDAsIHQxKSwgbnVsbDtcbn0sIFN0cnVjdHVyZVRpdGxlID0gKHByb3BzKSA9PiB7XG4gIGNvbnN0ICQgPSBjKDgpLCB7XG4gICAgcmVzb2x2ZWRQYW5lc1xuICB9ID0gcHJvcHM7XG4gIGlmICghcmVzb2x2ZWRQYW5lcz8ubGVuZ3RoKVxuICAgIHJldHVybiBudWxsO1xuICBjb25zdCBsYXN0UGFuZSA9IHJlc29sdmVkUGFuZXNbcmVzb2x2ZWRQYW5lcy5sZW5ndGggLSAxXTtcbiAgaWYgKGlzTG9hZGluZ1BhbmUobGFzdFBhbmUpKSB7XG4gICAgbGV0IHQwMjtcbiAgICByZXR1cm4gJFswXSA9PT0gU3ltYm9sLmZvcihcInJlYWN0Lm1lbW9fY2FjaGVfc2VudGluZWxcIikgPyAodDAyID0gLyogQF9fUFVSRV9fICovIGpzeChQYXNzdGhyb3VnaFRpdGxlLCB7fSksICRbMF0gPSB0MDIpIDogdDAyID0gJFswXSwgdDAyO1xuICB9XG4gIGlmIChpc0RvY3VtZW50UGFuZShsYXN0UGFuZSkpIHtcbiAgICBpZiAobGFzdFBhbmU/LnRpdGxlKSB7XG4gICAgICBsZXQgdDAzO1xuICAgICAgcmV0dXJuICRbMV0gIT09IGxhc3RQYW5lLnRpdGxlID8gKHQwMyA9IC8qIEBfX1BVUkVfXyAqLyBqc3goUGFzc3Rocm91Z2hUaXRsZSwgeyB0aXRsZTogbGFzdFBhbmUudGl0bGUgfSksICRbMV0gPSBsYXN0UGFuZS50aXRsZSwgJFsyXSA9IHQwMykgOiB0MDMgPSAkWzJdLCB0MDM7XG4gICAgfVxuICAgIGxldCB0MDI7XG4gICAgcmV0dXJuICRbM10gIT09IGxhc3RQYW5lLm9wdGlvbnMuaWQgfHwgJFs0XSAhPT0gbGFzdFBhbmUub3B0aW9ucy50eXBlID8gKHQwMiA9IC8qIEBfX1BVUkVfXyAqLyBqc3goRG9jdW1lbnRUaXRsZSwgeyBkb2N1bWVudElkOiBsYXN0UGFuZS5vcHRpb25zLmlkLCBkb2N1bWVudFR5cGU6IGxhc3RQYW5lLm9wdGlvbnMudHlwZSB9KSwgJFszXSA9IGxhc3RQYW5lLm9wdGlvbnMuaWQsICRbNF0gPSBsYXN0UGFuZS5vcHRpb25zLnR5cGUsICRbNV0gPSB0MDIpIDogdDAyID0gJFs1XSwgdDAyO1xuICB9XG4gIGNvbnN0IHQwID0gbGFzdFBhbmU/LnRpdGxlO1xuICBsZXQgdDE7XG4gIHJldHVybiAkWzZdICE9PSB0MCA/ICh0MSA9IC8qIEBfX1BVUkVfXyAqLyBqc3goUGFzc3Rocm91Z2hUaXRsZSwgeyB0aXRsZTogdDAgfSksICRbNl0gPSB0MCwgJFs3XSA9IHQxKSA6IHQxID0gJFs3XSwgdDE7XG59O1xuZnVuY3Rpb24gdXNlQ29uc3RydWN0RG9jdW1lbnRUaXRsZShhY3RpdmVUaXRsZSkge1xuICBjb25zdCAkID0gYygzKSwgc3RydWN0dXJlVG9vbEJhc2VUaXRsZSA9IHVzZVN0cnVjdHVyZVRvb2woKS5zdHJ1Y3R1cmVDb250ZXh0LnRpdGxlO1xuICBsZXQgdDA7XG4gIHJldHVybiAkWzBdICE9PSBhY3RpdmVUaXRsZSB8fCAkWzFdICE9PSBzdHJ1Y3R1cmVUb29sQmFzZVRpdGxlID8gKHQwID0gW2FjdGl2ZVRpdGxlLCBzdHJ1Y3R1cmVUb29sQmFzZVRpdGxlXS5maWx0ZXIoX3RlbXAkMiksICRbMF0gPSBhY3RpdmVUaXRsZSwgJFsxXSA9IHN0cnVjdHVyZVRvb2xCYXNlVGl0bGUsICRbMl0gPSB0MCkgOiB0MCA9ICRbMl0sIHQwLmpvaW4oXCIgfCBcIik7XG59XG5mdW5jdGlvbiBfdGVtcCQyKHRpdGxlKSB7XG4gIHJldHVybiB0aXRsZTtcbn1cbmZ1bmN0aW9uIGlzRG9jdW1lbnRQYW5lKHBhbmUpIHtcbiAgcmV0dXJuIHBhbmUgIT09IExPQURJTkdfUEFORSAmJiBwYW5lLnR5cGUgPT09IFwiZG9jdW1lbnRcIjtcbn1cbmZ1bmN0aW9uIGlzTG9hZGluZ1BhbmUocGFuZSkge1xuICByZXR1cm4gcGFuZSA9PT0gTE9BRElOR19QQU5FO1xufVxuY29uc3QgU3R5bGVkUGFuZUxheW91dCA9IHN0eWxlZChQYW5lTGF5b3V0KWBcbiAgbWluLWhlaWdodDogMTAwJTtcbiAgbWluLXdpZHRoOiAzMjBweDtcbmAsIGlzU2F2ZUhvdGtleSA9IGlzSG90a2V5KFwibW9kK3NcIiksIFN0cnVjdHVyZVRvb2wgPSBtZW1vKGZ1bmN0aW9uKHQwKSB7XG4gIGNvbnN0ICQgPSBjKDMxKSwge1xuICAgIG9uUGFuZUNoYW5nZVxuICB9ID0gdDAsIHtcbiAgICBwdXNoOiBwdXNoVG9hc3RcbiAgfSA9IHVzZVRvYXN0KCksIHNjaGVtYSA9IHVzZVNjaGVtYSgpLCB7XG4gICAgbGF5b3V0Q29sbGFwc2VkLFxuICAgIHNldExheW91dENvbGxhcHNlZFxuICB9ID0gdXNlU3RydWN0dXJlVG9vbCgpLCB7XG4gICAgcGFuZURhdGFJdGVtcyxcbiAgICByZXNvbHZlZFBhbmVzXG4gIH0gPSB1c2VSZXNvbHZlZFBhbmVzKCksIGlzUmVzb2x2aW5nSW50ZW50ID0gdXNlUm91dGVyU3RhdGUoX3RlbXAkMSksIHtcbiAgICBzYW5pdHk6IHQxXG4gIH0gPSB1c2VUaGVtZSgpLCB7XG4gICAgbWVkaWFcbiAgfSA9IHQxLCBbcG9ydGFsRWxlbWVudCwgc2V0UG9ydGFsRWxlbWVudF0gPSB1c2VTdGF0ZShudWxsKTtcbiAgbGV0IHQyO1xuICAkWzBdICE9PSBzZXRMYXlvdXRDb2xsYXBzZWQgPyAodDIgPSAoKSA9PiBzZXRMYXlvdXRDb2xsYXBzZWQoITApLCAkWzBdID0gc2V0TGF5b3V0Q29sbGFwc2VkLCAkWzFdID0gdDIpIDogdDIgPSAkWzFdO1xuICBjb25zdCBoYW5kbGVSb290Q29sbGFwc2UgPSB0MjtcbiAgbGV0IHQzO1xuICAkWzJdICE9PSBzZXRMYXlvdXRDb2xsYXBzZWQgPyAodDMgPSAoKSA9PiBzZXRMYXlvdXRDb2xsYXBzZWQoITEpLCAkWzJdID0gc2V0TGF5b3V0Q29sbGFwc2VkLCAkWzNdID0gdDMpIDogdDMgPSAkWzNdO1xuICBjb25zdCBoYW5kbGVSb290RXhwYW5kID0gdDM7XG4gIGxldCB0NCwgdDU7XG4gICRbNF0gIT09IG9uUGFuZUNoYW5nZSB8fCAkWzVdICE9PSByZXNvbHZlZFBhbmVzID8gKHQ0ID0gKCkgPT4ge1xuICAgIHJlc29sdmVkUGFuZXMubGVuZ3RoICYmIG9uUGFuZUNoYW5nZShyZXNvbHZlZFBhbmVzKTtcbiAgfSwgdDUgPSBbb25QYW5lQ2hhbmdlLCByZXNvbHZlZFBhbmVzXSwgJFs0XSA9IG9uUGFuZUNoYW5nZSwgJFs1XSA9IHJlc29sdmVkUGFuZXMsICRbNl0gPSB0NCwgJFs3XSA9IHQ1KSA6ICh0NCA9ICRbNl0sIHQ1ID0gJFs3XSksIHVzZUVmZmVjdCh0NCwgdDUpO1xuICBsZXQgdDYsIHQ3O1xuICBpZiAoJFs4XSAhPT0gcHVzaFRvYXN0ID8gKHQ2ID0gKCkgPT4ge1xuICAgIGNvbnN0IGhhbmRsZUdsb2JhbEtleURvd24gPSAoZXZlbnQpID0+IHtcbiAgICAgIGlzU2F2ZUhvdGtleShldmVudCkgJiYgKGV2ZW50LnByZXZlbnREZWZhdWx0KCksIHB1c2hUb2FzdCh7XG4gICAgICAgIGNsb3NhYmxlOiAhMCxcbiAgICAgICAgaWQ6IFwiYXV0by1zYXZlLW1lc3NhZ2VcIixcbiAgICAgICAgc3RhdHVzOiBcImluZm9cIixcbiAgICAgICAgdGl0bGU6IFwiWW91ciB3b3JrIGlzIGF1dG9tYXRpY2FsbHkgc2F2ZWQhXCIsXG4gICAgICAgIGR1cmF0aW9uOiA0ZTNcbiAgICAgIH0pKTtcbiAgICB9O1xuICAgIHJldHVybiB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaGFuZGxlR2xvYmFsS2V5RG93biksICgpID0+IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVHbG9iYWxLZXlEb3duKTtcbiAgfSwgdDcgPSBbcHVzaFRvYXN0XSwgJFs4XSA9IHB1c2hUb2FzdCwgJFs5XSA9IHQ2LCAkWzEwXSA9IHQ3KSA6ICh0NiA9ICRbOV0sIHQ3ID0gJFsxMF0pLCB1c2VFZmZlY3QodDYsIHQ3KSwgIXNjaGVtYS5fb3JpZ2luYWw/LnR5cGVzLnNvbWUoX2lzQ3VzdG9tRG9jdW1lbnRUeXBlRGVmaW5pdGlvbikpIHtcbiAgICBsZXQgdDgyO1xuICAgIHJldHVybiAkWzExXSA9PT0gU3ltYm9sLmZvcihcInJlYWN0Lm1lbW9fY2FjaGVfc2VudGluZWxcIikgPyAodDgyID0gLyogQF9fUFVSRV9fICovIGpzeChOb0RvY3VtZW50VHlwZXNTY3JlZW4sIHt9KSwgJFsxMV0gPSB0ODIpIDogdDgyID0gJFsxMV0sIHQ4MjtcbiAgfVxuICBjb25zdCB0OCA9IHBvcnRhbEVsZW1lbnQgfHwgbnVsbCwgdDkgPSBsYXlvdXRDb2xsYXBzZWQgPyB2b2lkIDAgOiBcImZpbGxcIiwgdDEwID0gbWVkaWFbMV07XG4gIGxldCB0MTE7XG4gICRbMTJdICE9PSBwYW5lRGF0YUl0ZW1zID8gKHQxMSA9IHBhbmVEYXRhSXRlbXMubWFwKF90ZW1wMiQxKSwgJFsxMl0gPSBwYW5lRGF0YUl0ZW1zLCAkWzEzXSA9IHQxMSkgOiB0MTEgPSAkWzEzXTtcbiAgbGV0IHQxMjtcbiAgJFsxNF0gIT09IGlzUmVzb2x2aW5nSW50ZW50IHx8ICRbMTVdICE9PSBwYW5lRGF0YUl0ZW1zLmxlbmd0aCA/ICh0MTIgPSBwYW5lRGF0YUl0ZW1zLmxlbmd0aCA8PSAxICYmIGlzUmVzb2x2aW5nSW50ZW50ICYmIC8qIEBfX1BVUkVfXyAqLyBqc3goTG9hZGluZ1BhbmUsIHsgcGFuZUtleTogXCJpbnRlbnQtcmVzb2x2ZXJcIiB9KSwgJFsxNF0gPSBpc1Jlc29sdmluZ0ludGVudCwgJFsxNV0gPSBwYW5lRGF0YUl0ZW1zLmxlbmd0aCwgJFsxNl0gPSB0MTIpIDogdDEyID0gJFsxNl07XG4gIGxldCB0MTM7XG4gICRbMTddICE9PSBoYW5kbGVSb290Q29sbGFwc2UgfHwgJFsxOF0gIT09IGhhbmRsZVJvb3RFeHBhbmQgfHwgJFsxOV0gIT09IHQxMCB8fCAkWzIwXSAhPT0gdDExIHx8ICRbMjFdICE9PSB0MTIgfHwgJFsyMl0gIT09IHQ5ID8gKHQxMyA9IC8qIEBfX1BVUkVfXyAqLyBqc3hzKFN0eWxlZFBhbmVMYXlvdXQsIHsgZmxleDogMSwgaGVpZ2h0OiB0OSwgbWluV2lkdGg6IHQxMCwgb25Db2xsYXBzZTogaGFuZGxlUm9vdENvbGxhcHNlLCBvbkV4cGFuZDogaGFuZGxlUm9vdEV4cGFuZCwgY2hpbGRyZW46IFtcbiAgICB0MTEsXG4gICAgdDEyXG4gIF0gfSksICRbMTddID0gaGFuZGxlUm9vdENvbGxhcHNlLCAkWzE4XSA9IGhhbmRsZVJvb3RFeHBhbmQsICRbMTldID0gdDEwLCAkWzIwXSA9IHQxMSwgJFsyMV0gPSB0MTIsICRbMjJdID0gdDksICRbMjNdID0gdDEzKSA6IHQxMyA9ICRbMjNdO1xuICBsZXQgdDE0O1xuICAkWzI0XSAhPT0gcmVzb2x2ZWRQYW5lcyA/ICh0MTQgPSAvKiBAX19QVVJFX18gKi8ganN4KFN0cnVjdHVyZVRpdGxlLCB7IHJlc29sdmVkUGFuZXMgfSksICRbMjRdID0gcmVzb2x2ZWRQYW5lcywgJFsyNV0gPSB0MTQpIDogdDE0ID0gJFsyNV07XG4gIGxldCB0MTU7XG4gICRbMjZdID09PSBTeW1ib2wuZm9yKFwicmVhY3QubWVtb19jYWNoZV9zZW50aW5lbFwiKSA/ICh0MTUgPSAvKiBAX19QVVJFX18gKi8ganN4KFwiZGl2XCIsIHsgXCJkYXRhLXBvcnRhbFwiOiBcIlwiLCByZWY6IHNldFBvcnRhbEVsZW1lbnQgfSksICRbMjZdID0gdDE1KSA6IHQxNSA9ICRbMjZdO1xuICBsZXQgdDE2O1xuICByZXR1cm4gJFsyN10gIT09IHQxMyB8fCAkWzI4XSAhPT0gdDE0IHx8ICRbMjldICE9PSB0OCA/ICh0MTYgPSAvKiBAX19QVVJFX18gKi8ganN4cyhQb3J0YWxQcm92aWRlciwgeyBlbGVtZW50OiB0OCwgY2hpbGRyZW46IFtcbiAgICB0MTMsXG4gICAgdDE0LFxuICAgIHQxNVxuICBdIH0pLCAkWzI3XSA9IHQxMywgJFsyOF0gPSB0MTQsICRbMjldID0gdDgsICRbMzBdID0gdDE2KSA6IHQxNiA9ICRbMzBdLCB0MTY7XG59KTtcbmZ1bmN0aW9uIF90ZW1wJDEocm91dGVyU3RhdGUpIHtcbiAgcmV0dXJuIHR5cGVvZiByb3V0ZXJTdGF0ZS5pbnRlbnQgPT0gXCJzdHJpbmdcIjtcbn1cbmZ1bmN0aW9uIF90ZW1wMiQxKHQwKSB7XG4gIGNvbnN0IHtcbiAgICBhY3RpdmUsXG4gICAgY2hpbGRJdGVtSWQsXG4gICAgZ3JvdXBJbmRleCxcbiAgICBpdGVtSWQsXG4gICAga2V5OiBwYW5lS2V5LFxuICAgIHBhbmUsXG4gICAgaW5kZXg6IHBhbmVJbmRleCxcbiAgICBwYXJhbXM6IHBhbmVQYXJhbXMsXG4gICAgcGF0aCxcbiAgICBwYXlsb2FkLFxuICAgIHNpYmxpbmdJbmRleCxcbiAgICBzZWxlY3RlZFxuICB9ID0gdDA7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4KEZyYWdtZW50LCB7IGNoaWxkcmVuOiBwYW5lID09PSBMT0FESU5HX1BBTkUgPyAvKiBAX19QVVJFX18gKi8ganN4KExvYWRpbmdQYW5lLCB7IHBhbmVLZXksIHBhdGgsIHNlbGVjdGVkIH0pIDogLyogQF9fUFVSRV9fICovIGpzeChTdHJ1Y3R1cmVUb29sUGFuZSwgeyBhY3RpdmUsIGdyb3VwSW5kZXgsIGluZGV4OiBwYW5lSW5kZXgsIHBhbmUsIGNoaWxkSXRlbUlkLCBpdGVtSWQsIHBhbmVLZXksIHBhcmFtczogcGFuZVBhcmFtcywgcGF5bG9hZCwgcGF0aCwgc2VsZWN0ZWQsIHNpYmxpbmdJbmRleCB9KSB9LCBgJHtwYW5lID09PSBMT0FESU5HX1BBTkUgPyBcImxvYWRpbmdcIiA6IHBhbmUudHlwZX0tJHtwYW5lSW5kZXh9YCk7XG59XG5mdW5jdGlvbiBTdHJ1Y3R1cmVUb29sQm91bmRhcnkodDApIHtcbiAgY29uc3QgJCA9IGMoMTQpLCB7XG4gICAgdG9vbDogdDFcbiAgfSA9IHQwLCB7XG4gICAgb3B0aW9uc1xuICB9ID0gdDEsIHtcbiAgICB1bnN0YWJsZV9zb3VyY2VzOiBzb3VyY2VzXG4gIH0gPSB1c2VXb3Jrc3BhY2UoKSwgW2ZpcnN0U291cmNlXSA9IHNvdXJjZXM7XG4gIGxldCB0MjtcbiAgJFswXSAhPT0gb3B0aW9ucyA/ICh0MiA9IG9wdGlvbnMgfHwge30sICRbMF0gPSBvcHRpb25zLCAkWzFdID0gdDIpIDogdDIgPSAkWzFdO1xuICBjb25zdCB7XG4gICAgc291cmNlLFxuICAgIGRlZmF1bHREb2N1bWVudE5vZGUsXG4gICAgc3RydWN0dXJlXG4gIH0gPSB0MjtcbiAgbGV0IHQzO1xuICAkWzJdID09PSBTeW1ib2wuZm9yKFwicmVhY3QubWVtb19jYWNoZV9zZW50aW5lbFwiKSA/ICh0MyA9IFtdLCAkWzJdID0gdDMpIDogdDMgPSAkWzJdLCB1c2VFZmZlY3QoX3RlbXAyLCB0Myk7XG4gIGxldCB0NDtcbiAgJFszXSA9PT0gU3ltYm9sLmZvcihcInJlYWN0Lm1lbW9fY2FjaGVfc2VudGluZWxcIikgPyAodDQgPSB7XG4gICAgZXJyb3I6IG51bGxcbiAgfSwgJFszXSA9IHQ0KSA6IHQ0ID0gJFszXTtcbiAgY29uc3QgW3Q1LCBzZXRFcnJvcl0gPSB1c2VTdGF0ZSh0NCksIHtcbiAgICBlcnJvclxuICB9ID0gdDU7XG4gIGlmIChlcnJvcikge1xuICAgIGxldCB0NjI7XG4gICAgcmV0dXJuICRbNF0gIT09IGVycm9yID8gKHQ2MiA9IC8qIEBfX1BVUkVfXyAqLyBqc3goU3RydWN0dXJlRXJyb3IsIHsgZXJyb3IgfSksICRbNF0gPSBlcnJvciwgJFs1XSA9IHQ2MikgOiB0NjIgPSAkWzVdLCB0NjI7XG4gIH1cbiAgY29uc3QgdDYgPSBzb3VyY2UgfHwgZmlyc3RTb3VyY2UubmFtZTtcbiAgbGV0IHQ3LCB0ODtcbiAgJFs2XSA9PT0gU3ltYm9sLmZvcihcInJlYWN0Lm1lbW9fY2FjaGVfc2VudGluZWxcIikgPyAodDcgPSAvKiBAX19QVVJFX18gKi8ganN4KFN0cnVjdHVyZVRvb2wsIHsgb25QYW5lQ2hhbmdlOiBzZXRBY3RpdmVQYW5lcyB9KSwgdDggPSAvKiBAX19QVVJFX18gKi8ganN4KEludGVudFJlc29sdmVyLCB7fSksICRbNl0gPSB0NywgJFs3XSA9IHQ4KSA6ICh0NyA9ICRbNl0sIHQ4ID0gJFs3XSk7XG4gIGxldCB0OTtcbiAgJFs4XSAhPT0gZGVmYXVsdERvY3VtZW50Tm9kZSB8fCAkWzldICE9PSBzdHJ1Y3R1cmUgPyAodDkgPSAvKiBAX19QVVJFX18gKi8ganN4cyhTdHJ1Y3R1cmVUb29sUHJvdmlkZXIsIHsgZGVmYXVsdERvY3VtZW50Tm9kZSwgc3RydWN0dXJlLCBjaGlsZHJlbjogW1xuICAgIHQ3LFxuICAgIHQ4XG4gIF0gfSksICRbOF0gPSBkZWZhdWx0RG9jdW1lbnROb2RlLCAkWzldID0gc3RydWN0dXJlLCAkWzEwXSA9IHQ5KSA6IHQ5ID0gJFsxMF07XG4gIGxldCB0MTA7XG4gIHJldHVybiAkWzExXSAhPT0gdDYgfHwgJFsxMl0gIT09IHQ5ID8gKHQxMCA9IC8qIEBfX1BVUkVfXyAqLyBqc3goRXJyb3JCb3VuZGFyeSwgeyBvbkNhdGNoOiBzZXRFcnJvciwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3goU291cmNlUHJvdmlkZXIsIHsgbmFtZTogdDYsIGNoaWxkcmVuOiB0OSB9KSB9KSwgJFsxMV0gPSB0NiwgJFsxMl0gPSB0OSwgJFsxM10gPSB0MTApIDogdDEwID0gJFsxM10sIHQxMDtcbn1cbmZ1bmN0aW9uIF90ZW1wMigpIHtcbiAgcmV0dXJuIHNldEFjdGl2ZVBhbmVzKFtdKSwgX3RlbXA7XG59XG5mdW5jdGlvbiBfdGVtcCgpIHtcbiAgcmV0dXJuIHNldEFjdGl2ZVBhbmVzKFtdKTtcbn1cbmV4cG9ydCB7XG4gIFN0cnVjdHVyZVRvb2xCb3VuZGFyeSBhcyBkZWZhdWx0XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgzLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/sanity/lib/_chunks-es/index3.mjs\n"));

/***/ })

}]);